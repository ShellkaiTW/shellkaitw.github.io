{"version":"https://jsonfeed.org/version/1.1","title":"Shellkai's Blog","home_page_url":"https://localhost:5173","feed_url":"https://localhost:5173/feed.json","description":"Copyright © ShellkaiTW 2024 - All right reserved\tPowered by SvelteKit/Urara","icon":"https://localhost:5173/assets/any@512.png","favicon":"https://localhost:5173/kon-favicon.png","authors":[{"name":"Shellkai Huang","url":"https://localhost:5173","avatar":"/assets/profile.jpg"}],"language":"zh-TW","items":[{"id":"certificate-ca-server","url":"https://localhost:5173/certificate-ca-server","title":"Web","content_html":"<h2 id=\"windows-server-簽署-enterprise-ca\" data-svelte-h=\"svelte-fp9yc5\"><a href=\"#windows-server-簽署-enterprise-ca\">Windows Server 簽署 (Enterprise CA)</a></h2> <p>安裝 CA Server 提供簽證服務(選擇 Certification Authority 及 Certification Authority Web Enrollment)<img src=\"https://hackmd.io/_uploads/rJdQha3cn.png\" alt=\"https://hackmd.io/_uploads/rJdQha3cn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">使用MMC請求CA簽證<img src=\"https://hackmd.io/_uploads/HJRbIwVpn.png\" alt=\"https://hackmd.io/_uploads/HJRbIwVpn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇Computer account<img src=\"https://hackmd.io/_uploads/H1-B26292.png\" alt=\"https://hackmd.io/_uploads/H1-B26292.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">點開 Personal &gt; Certificates再按右鍵選擇 All Tasks &gt; Advanced Operations &gt; Create Custom Request<img src=\"https://hackmd.io/_uploads/SJ6HnTnq3.png\" alt=\"https://hackmd.io/_uploads/SJ6HnTnq3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Proceed without enrollment policy<img src=\"https://hackmd.io/_uploads/SJ28n625h.png\" alt=\"https://hackmd.io/_uploads/SJ28n625h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SyHwna29h.png\" alt=\"https://hackmd.io/_uploads/SyHwna29h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定簽證資訊：Details &gt; Properties<img src=\"https://hackmd.io/_uploads/SkBL8v4p3.png\" alt=\"https://hackmd.io/_uploads/SkBL8v4p3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/ByPO3Th9n.png\" alt=\"https://hackmd.io/_uploads/ByPO3Th9n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">到 Subject 欄位加入 Common name 和 DNS (<code data-svelte-h=\"svelte-1xg83ew\">*</code>為目的網域之萬用類型)<img src=\"https://hackmd.io/_uploads/By9Fn63q2.png\" alt=\"https://hackmd.io/_uploads/By9Fn63q2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">到 Private Key 欄位點開 Key options將 Key Size 設為 2048 並勾選 Make private key exportable<img src=\"https://hackmd.io/_uploads/S1Qchphcn.png\" alt=\"https://hackmd.io/_uploads/S1Qchphcn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">使用 Internet Explorer 進行簽證 (<strong data-svelte-h=\"svelte-iwo5gz\">使用 Chrome Engine 的瀏覽器會出現安全性錯誤</strong>)前往<code data-svelte-h=\"svelte-13zni43\">http://[hostname].[domain]/certsrv</code>並輸入帳號密碼選擇 Request a certificate<img src=\"https://hackmd.io/_uploads/BJ6jPDVpn.png\" alt=\"https://hackmd.io/_uploads/BJ6jPDVpn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 advanced certificate request<img src=\"https://hackmd.io/_uploads/rkNjhp352.png\" alt=\"https://hackmd.io/_uploads/rkNjhp352.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇  Submit a certificate request using a base64-encoded CMC or PKCS #10 file, or submit a renewal request by using a base-64-encoded PKCS #7 file.<img src=\"https://hackmd.io/_uploads/SJTo26n53.png\" alt=\"https://hackmd.io/_uploads/SJTo26n53.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">打開剛剛建立好的請求檔案<img src=\"https://hackmd.io/_uploads/SkLhhanqn.png\" alt=\"https://hackmd.io/_uploads/SkLhhanqn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">複製並貼至 Internet Explorer 內並將 Certificate Template 類型選擇 Web Server 後按 Submit<img src=\"https://hackmd.io/_uploads/rkepnTn5n.png\" alt=\"https://hackmd.io/_uploads/rkepnTn5n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">生成完畢後，選擇 Download certificate 來下載簽證<img src=\"https://hackmd.io/_uploads/BkdTh6nqn.png\" alt=\"https://hackmd.io/_uploads/BkdTh6nqn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">到 IIS 的 Server Certificate 並選擇 Complete Certificate Request<img src=\"https://hackmd.io/_uploads/r1rA262q3.png\" alt=\"https://hackmd.io/_uploads/r1rA262q3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">導入剛剛下載的簽證，並設定一個 Friendly name<img src=\"https://hackmd.io/_uploads/HJhA26h52.png\" alt=\"https://hackmd.io/_uploads/HJhA26h52.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定 https 的網站，導入簽證<img src=\"https://hackmd.io/_uploads/HJNJT63q2.png\" alt=\"https://hackmd.io/_uploads/HJNJT63q2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">即完成了簽證，前往目標網站時不會出現安全性錯誤<img src=\"https://hackmd.io/_uploads/Bknk6p352.png\" alt=\"https://hackmd.io/_uploads/Bknk6p352.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"debian-簽證使用-windows-server\" data-svelte-h=\"svelte-1rb0la7\"><a href=\"#debian-簽證使用-windows-server\">Debian (簽證使用 Windows Server)</a></h2> <p data-svelte-h=\"svelte-11vzsag\">安裝 OpenSSL：<code>apt install openssl</code> <strong>生成帶 SAN 值 CA 憑證的兩種方式方式 1：</strong>一行指令生成帶 SAN 值 CA 請求 (CR)：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>openssl req -new -newkey rsa:2048 -nodes -keyout [keyname].key -out [csrname].csr -subj \"/CN=[domainname]/\" -addext \"subjectAltName = DNS:[dnsname].[domainname],DNS:＊.[domain],DNS:[dnsname]\"</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1byt50y\"><strong>方式 2：</strong>建立一個設定 CA 的資料夾並更換目前路徑：<code>mkdir /tmp/CA/</code> <code>cd /tmp/CA</code>生成包含 SAN 的 CA 設定檔並編輯：<code>touch san.conf</code> <code>vim san.conf</code>在 san.conf 內寫入以下資料：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>[ req ]default_bits       = 2048distinguished_name = req_distinguished_namereq_extensions     = req_ext[ req_distinguished_name ]commonName                 = Common Name (e.g. server FQDN or YOUR name)[alt_names]DNS.1   = [ur_dns_server.1]DNS.2   = [ur_dns_server.2]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1ypaz3v\">儲存後用 OpenSSL 建立 CA 憑證請求：<code>openssl req -out [urcsrname].csr -newkey rsa:2048 -nodes -keyout [urkeyname].key -config san.cnf</code>將 key 放至 apache2 資料夾內：<code>mv [urkeyname].key /etc/apache2</code>將憑證請求放至與 Windows Server 端的共享資料夾內：<code>mv [urcsrname].csr /share</code>在 Windows Server 操作簽署完憑證後，將 Windows 用的 cer 格式轉為 Linux 用的 crt 格式，並將生成結果存於 apache2 資料夾內：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>openssl x509 -in /share/[urcername].cer -out /etc/apache2/[urcrtname].crt -inform DER</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"預設-html-網頁設定\" data-svelte-h=\"svelte-1g4mnaq\"><a href=\"#預設-html-網頁設定\">預設 html 網頁設定</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>vim /var/www/html/index.html</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"web-server-apache2\" data-svelte-h=\"svelte-czte7a\"><a href=\"#web-server-apache2\">Web Server (apache2)</a></h2> <p data-svelte-h=\"svelte-1t8euxs\">安裝 apache2：<code>apt install apache2</code>重啟 apache2 服務：<code>service apache2 restart</code></p> <h3 id=\"啟用-https-ssl\" data-svelte-h=\"svelte-1afepzh\"><a href=\"#啟用-https-ssl\">啟用 https (SSL)</a></h3> <p data-svelte-h=\"svelte-1bj1fjz\">啟用 SSL &amp; ReWrite Engine</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>a2enmod ssla2enmod rewrite</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-wm8zjk\">編輯 apache2 的設定檔：<code>vim /etc/apache2/apache2.conf</code>在文件末端加入以下資料：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>&lt;Directory /var/www/html&gt;AllowOverride All&lt;/Directory&gt;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-iuw89k\">編輯 apache2 的網站設定檔：<code>vim /etc/apache2/sites-avaliable/000-default.conf</code>寫入以下資料：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>&lt;VirtualHost *:443&gt;        ServerAdmin webmaster@localhost        DocumentRoot /var/www/html        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined        SSLEngine on        SSLCertificateFile /etc/apache2/[urcrtfile].crt        SSLCertificateKeyFile /etc/apache2/[urkeyfile].key&lt;/VirtualHost&gt;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/B1vgTT2cn.png\" alt=\"https://hackmd.io/_uploads/B1vgTT2cn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"網址重新導向\" data-svelte-h=\"svelte-me9s10\"><a href=\"#網址重新導向\">網址重新導向</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 將 http://www.wsdomain.com.tw/outside 重新導向至 http://outside.out</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>編輯 apache2 的網站設定檔：<code data-svelte-h=\"svelte-1lg9tco\">vim /etc/apache2/sites-avaliable/000-default.conf</code>加入 <code data-svelte-h=\"svelte-1osjzt4\">Redirect /outside http://www.outside.out</code> <img src=\"https://hackmd.io/_uploads/rJG-6p39h.png\" alt=\"https://hackmd.io/_uploads/rJG-6p39h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 將 http://www.wsdomain.com.tw 重新導向至 https://www.wsdomain.com.tw</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-iqaaqz\">編輯 apache2 的網站設定檔：<code>vim /etc/apache2/sites-avaliable/000-default.conf</code>加入 <code>Redirect / https://www.wsdomain.com.tw</code></p> <h3 id=\"站台登入驗證\" data-svelte-h=\"svelte-q70sp3\"><a href=\"#站台登入驗證\">站台登入驗證</a></h3> <p>建立給 apache2 驗證登入使用者資訊的文件：<code data-svelte-h=\"svelte-z1llyw\">touch /etc/apache2/.htpasswd</code>新增使用者到 htpasswd：<code data-svelte-h=\"svelte-1ye8t5\">htpasswd /etc/apache2/.htpasswd [username]</code> <img src=\"https://hackmd.io/_uploads/SkdzaRyJA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">新增後，編輯 apache2 的網站設定檔：<code data-svelte-h=\"svelte-1lg9tco\">vim /etc/apache2/sites-avaliable/000-default.conf</code>加入登入功能，其中 AuthName 是要求登入時會顯示的訊息</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>&lt;Directory /var/www/html&gt;AuthType BasicAuthName [loginmessage]AuthUserFile /etc/apache2/.htpasswdRequire valid-user&lt;/Directory&gt;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"使用者個人網頁模組-userdir\" data-svelte-h=\"svelte-1smh9sa\"><a href=\"#使用者個人網頁模組-userdir\">使用者個人網頁模組 (userdir)</a></h3> <p>啟用模組：<code data-svelte-h=\"svelte-zymyuo\">a2enmod userdir</code>編輯模組設定檔：<code data-svelte-h=\"svelte-1lanh7d\">vim /etc/apache2/mods-enabled/userdir.conf</code> <img src=\"https://hackmd.io/_uploads/SkPT4vlAT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">其中第一行的意思是站台會存取使用者目錄中 html 資料夾內的檔案，若使用者目錄中沒有此資料夾則網頁會顯示「Not Found」，預設值是 public_html第二行是不為哪些使用者啟用站台，預設值是 root 使用者若啟用了該模組，也要記得將目錄的權限更改為755：<code data-svelte-h=\"svelte-16n9ba8\">chmod -R 755 /[homedir]/[webdir]</code></p> <h3 id=\"更換-port\" data-svelte-h=\"svelte-1k2hrhy\"><a href=\"#更換-port\">更換 Port</a></h3> <p>編輯 Port 設定檔：<code data-svelte-h=\"svelte-2fua5s\">vim /etc/apache2/port.conf</code> <img src=\"https://hackmd.io/_uploads/rySLPmSmT.png\" alt=\"image.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">如果要改 http 的 Port：將 80 改成你要的 Port如果要改 https 的 Port：將 443 (兩個) 改成你要的 Port最後編輯網站設定檔：<code data-svelte-h=\"svelte-1lg9tco\">vim /etc/apache2/sites-avaliable/000-default.conf</code> <img src=\"https://hackmd.io/_uploads/r1q8dmrXa.png\" alt=\"image.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">將最上方的 80 改成你要的 Port</p> <h3 id=\"更換站台\" data-svelte-h=\"svelte-gq3x42\"><a href=\"#更換站台\">更換站台</a></h3> <p data-svelte-h=\"svelte-1e9ab83\">先關閉預設站台：<code>a2dissite 000-default.conf</code>再啟用你要的站台：<code>a2ensite [ursitename]</code></p> <h3 id=\"預設檔案\" data-svelte-h=\"svelte-129yhep\"><a href=\"#預設檔案\">預設檔案</a></h3> <p data-svelte-h=\"svelte-13zi9ur\">若網頁檔名不是 index.html 或 index.htm 需要設定預設檔案名稱，開啟設定檔：<code>vim /etc/apache2/apache2.conf</code></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>&lt;Directory $PATH$&gt;    DirectoryIndex [filename]&lt;/Directory&gt;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/rka5bPgC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"403-forbidden-解決\" data-svelte-h=\"svelte-p1ypgn\"><a href=\"#403-forbidden-解決\">403 Forbidden 解決</a></h3> <p>在更改站台路徑後可能會出現 403 Forbidden 的問題<img src=\"https://hackmd.io/_uploads/S1RlxPg0a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">開啟設定檔：<code data-svelte-h=\"svelte-2i1yor\">vim /etc/apache2/apache2.conf</code></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>&lt;Directory $PATH$&gt;    Options Indexes FollowSymLinks    AllowOverride None    Require all granted&lt;/Directory&gt;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/HkNrQLRRp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定後重啟 apache2：<code data-svelte-h=\"svelte-175m26\">service apache2 restart</code></p> <h2 id=\"web-server-nginx\" data-svelte-h=\"svelte-1hkupka\"><a href=\"#web-server-nginx\">Web Server (Nginx)</a></h2> <p data-svelte-h=\"svelte-vhz1f4\">安裝 Nginx：<code>apt install nginx</code>重啟 Nginx 服務：<code>service nginx restart</code></p> <h3 id=\"nginxconf-檢查\" data-svelte-h=\"svelte-1s452vj\"><a href=\"#nginxconf-檢查\">nginx.conf 檢查</a></h3> <p data-svelte-h=\"svelte-1hzw9l6\"><code>nginx -t</code></p> <h3 id=\"限制-ip-存取站台\" data-svelte-h=\"svelte-1qqr7ic\"><a href=\"#限制-ip-存取站台\">限制 IP 存取站台</a></h3> <p data-svelte-h=\"svelte-ptd6cj\">編輯 Nginx 的網站設定檔：<code>vim /etc/nginx/sites-available/default</code>編輯 server 區域下的 location 區域：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code># 黑名單設定方法location / &#123;deny 192.168.10.55;deny 192.168.1.0/24;&#125;# 白名單設定方法location / &#123;allow 192.168.10.55;allow 192.168.1.0/24;deny all; #需要禁止全部 IP 存取才可設定白名單 (預設為 allow all)&#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>註：這裡設定有先後的層級之分，若在白名單內把deny all寫在allow的前面會使allow設定不運作若站台存取遭拒會顯示：<img src=\"https://hackmd.io/_uploads/SkdwHlNeT.png\" alt=\"https://hackmd.io/_uploads/SkdwHlNeT.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rJwKoyVga.png\" alt=\"https://hackmd.io/_uploads/rJwKoyVga.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"站台登入驗證-1\" data-svelte-h=\"svelte-2ju6fb\"><a href=\"#站台登入驗證-1\">站台登入驗證</a></h3> <p data-svelte-h=\"svelte-1uftmpj\">安裝 apache2-utils (會使用到 htpasswd 指令)：<code>apt install apache2-utils</code>建立給 Nginx 驗證登入使用者資訊的文件：<code>touch /etc/nginx/.htpasswd</code>新增使用者到 htpasswd：<code>htpasswd /etc/nginx/.htpasswd [username]</code>新增後，編輯 Nginx 的網站設定檔：<code>vim /etc/nginx/sites-available/default</code>加入登入功能到 location 區塊，其中 auth_basic 是要求登入時會顯示的訊息：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>location / &#123;        auth_basic \"[loginmessage]\";        auth_basic_user_file /etc/nginx/.htpasswd;        &#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"啟用-https-ssl-1\" data-svelte-h=\"svelte-1gspjf5\"><a href=\"#啟用-https-ssl-1\">啟用 https (SSL)</a></h3> <p data-svelte-h=\"svelte-9v15ui\">編輯 Nginx 的網站設定檔：<code>vim /etc/nginx/sites-available/default</code>在 server 區塊下設定 SSL：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>server &#123;    # SSL configuratuion    listen 443 ssl default_server;    listen [::]:443 ssl default_server;    ssl_certificate /etc/nginx/[urcrtfile].crt;    ssl_certificate_key /etc/nginx/[urkeyfile].key;&#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ry9yNBNlp.png\" alt=\"https://hackmd.io/_uploads/ry9yNBNlp.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BkQEIB4lT.png\" alt=\"https://hackmd.io/_uploads/BkQEIB4lT.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"網址重新導向-1\" data-svelte-h=\"svelte-v7fgf4\"><a href=\"#網址重新導向-1\">網址重新導向</a></h3> <p data-svelte-h=\"svelte-1thil54\">編輯 Nginx 的網站設定檔：<code>vim /etc/nginx/sites-available/default</code>在 location 區塊下設定：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code># 當存取 test.com 時會重新導向至 redirect.comlocation / &#123;    return 301 http://redirect.com;&#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/r1ycdB4lT.png\" alt=\"https://hackmd.io/_uploads/r1ycdB4lT.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BynrFHVgT.png\" alt=\"https://hackmd.io/_uploads/BynrFHVgT.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"http-to-https-重新導向\" data-svelte-h=\"svelte-1gnl6cu\"><a href=\"#http-to-https-重新導向\">http to https 重新導向</a></h3> <p>與前面重新導向相似，但是需要將 http 和 https 站台分開來寫<img src=\"https://hackmd.io/_uploads/ryx5ruBd0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">在 http 的站台內寫 <code data-svelte-h=\"svelte-1x48b96\">return</code> 到 https<strong data-svelte-h=\"svelte-1jfvoe2\">注意：不是寫在 location 區塊內</strong>若一個站台對到多個 DNS 紀錄可以寫為</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>return 301 https://$host$request_uri;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"負載平衡分流-load-balance\" data-svelte-h=\"svelte-gumo5e\"><a href=\"#負載平衡分流-load-balance\">負載平衡/分流 (Load Balance)</a></h3> <p data-svelte-h=\"svelte-8sojpg\">編輯 Nginx 的網站設定檔：<code>vim /etc/nginx/sites-available/default</code>新增 upstream 區塊並編輯 server 區塊：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code>upstream [load_balance_URL] &#123;    server [server1]:[port];    server [server2]:[port];    ...&#125;location / &#123;    proxy_pass http://[load_balance_URL];&#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash= was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ByAIZpGpp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>若要監察存取紀錄可以在站台檔案的開頭新增 log 格式，並在 server 區塊新增 <code data-svelte-h=\"svelte-7rufrc\">access_log /var/log/nginx/access.log upstreamlog;</code>：<img src=\"https://hackmd.io/_uploads/HJyGL6Maa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">註：最後的<code data-svelte-h=\"svelte-jx4t1d\">upstreamlog</code>指的是給 log 的格式名稱再用指令<code data-svelte-h=\"svelte-cw2vgg\">tail -f /var/log/nginx/access.log</code> 實時監察站台存取紀錄：<img src=\"https://hackmd.io/_uploads/S1IqXCGpa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">只要出現設定檔中的多個 IP 就代表負載設定成功</p> <h3 id=\"更換站台-1\" data-svelte-h=\"svelte-12gthyy\"><a href=\"#更換站台-1\">更換站台</a></h3> <p>編輯 Nginx 設定檔：<code data-svelte-h=\"svelte-ijz9n\">vim /etc/nginx/nginx.conf</code>找到 <code data-svelte-h=\"svelte-cuvryw\">include /etc/nginx/sites-enables/*;</code> <img src=\"https://hackmd.io/_uploads/S1rkLCfa6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">可以自行新增或編輯，讓 <code data-svelte-h=\"svelte-1pwnvq6\">include</code> 後面接自己站台的路徑，並把預設站台移除</p> <h3 id=\"location-匹配選擇機制\" data-svelte-h=\"svelte-1eyry6s\"><a href=\"#location-匹配選擇機制\">location (匹配選擇機制)</a></h3> <p data-svelte-h=\"svelte-1ty9fel\">僅使用<code>/</code>表示一般配置 (最長路徑)，會<strong>搜尋全部的 location 後才挑選出最符合請求路徑的配置檔</strong> (有可能被其它規則攔截)</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>    # 最基本的設定，會匹配到所有 http://www.domain.com 的請求，但是優先順序會被排到正規表示法和最長路徑之後    # 例如 http://www.domain.com/abc 或 http://www.domain.com/bruh 兩者皆可符合該規則     location / &#123;        ....    &#125;    # 匹配到以 /news 開頭的所有請求，但還不會馬上採用，會繼續往下搜尋是否有較長符合路徑的項目    location /news &#123;        ....    &#125;    # 匹配到以 /news/taiwan 開頭的所有請求，也是不會馬上採用，但若是有來自 http://www.domain.com/news/taiwan/... 開頭的請求，則會取代上面 /news 配置成為優先保留項再繼續往下搜尋    location /news/taiwan &#123;        ....    &#125;    # 匹配到以 /news/taiwan/keelung 開頭的所有請求，也是不會馬上採用，分為以下兩個情境    # 1. 來自 http://www.domain.com/news/taiwan/hsinchu 開頭的請求，依然會採用上面 /news/taiwan 的配置然後繼續往下搜尋    # 2. 來自 http://www.domain.com/news/taiwan/keelung 開頭的請求，則會取代上面 /news/taiwan 的配置成為新的優先保留項然後才再繼續往下搜尋    location /news/taiwan/keelung &#123;        ....    &#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-ebm0tg\">使用<code>= /</code>代表精準匹配，需<strong>完全符合且匹配，確認後立即採用</strong></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>    # 只能 http://www.domain.com 才能符合，後面不能帶任何字元，e.g. http://www.domain.com (O), http://www.domain.com/abc (X)    location = / &#123;        ....    &#125;    # 來自 http://www.domain.com/news/taiwan/taipei 的要求會立即採用此配置    location = /news/taiwan/taipei &#123;        ....    &#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-196y3so\">使用<code>~ /</code>代表使用正規表示法來做匹配，會<strong>區分大小寫</strong>，若要<strong>不區分大小寫需使用</strong><code>~* /</code>，由於第一個匹配到的規則設定會立即採用，所以採用此種方式的配置其順序很重要</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>    # 1. 來自 http://www.domain.com/images 開頭的要求會匹配此規則且立即採用該配置，但 http://www.domain.com/Images 開頭的要求則不符合該規則    location ~ ^/images &#123;        ....    &#125;    # 來自 http://www.domain.com/images 和 http://www.domain.com/Images 開頭的要求皆能符合此規則且會立即採用該配置    location ~* ^/images &#123;        ....    &#125;    # 匹配所有以 .gif 和 .jpg 和 .jpeg 結尾的要求，這邊分兩個情境來說明    # 1. 來自 http://www.domain.com/Images/dog.jpg 的請求雖然符合該配置的規則，但是卻會先被上面的 ~* ^/images 這條規則先攔截，因此該請求其實是到不了這條規則的    # 2. 來自 http://www.domain.com/news/images/cat.gif 的請求符合該配置的規則且沒在其它地方被攔截，所以會立即採用該配置    location ~* .(gif|jpg|jpeg)$ &#123;        ....    &#125;    # 匹配所有 URI 路徑以 admin 和 swagger 和 api 開頭的要求，這邊分兩個情境來說明    # 例如來自 http://www.domain.com/admin/... 或 http://www.domain.com/Admin/... 開頭的請求皆符合此規則且會立即採用該配置    location ~* ^/(admin|swagger|api)/? &#123;        ....    &#125;  </code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1npotiy\">使用<code>^~</code>代表排除正規表示法的匹配，類似於一般配置，不同的是一旦符合即馬上採用該配置</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>    # 匹配到所有請求，但還不會馬上採用，會繼續往下搜尋是否有其它較長符合路徑的項目    location / &#123;        ....    &#125;    # 匹配到以 /news 開頭的所有請求，但還不會馬上採用，會繼續往下搜尋是否有較長符合路徑的項目    location /news &#123;        ....    &#125;    # 匹配到以 /news/taiwan 開頭的所有請求，因為使用了 ^~ 所以如果有符合 /news/taiwan 開頭的 URI 會立即採用該配置，停止往下搜尋    # 1. 來自 http://www.domain.com/news/taiwan/keelung/index 的請求符合該配置的規則，所以採用該配置    # 2. 來自 http://www.domain.com/news/japan/osaka/index 的請求不符合該配置的規則，繼續往下搜尋    location ^~ /news/taiwan &#123;        ....    &#125;    # 匹配到以 /news/japan 開頭的所有請求，但還不會馬上採用，會繼續往下搜尋是否有較長符合路徑的項目    location /news/japan &#123;        ....    &#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <div class=\"overflow-x-auto mb-4\"><table class=\"table w-full\"><thead data-svelte-h=\"svelte-10be3iz\"><tr><th>參數</th> <th>說明</th> <th>是否立即採用</th></tr></thead> <tbody data-svelte-h=\"svelte-1hqfv7t\"><tr><td>/</td> <td>最長路徑</td> <td>否</td></tr> <tr><td>= /</td> <td>精準匹配</td> <td>是</td></tr> <tr><td>^~ /</td> <td>類似最長路徑，但會馬上採用</td> <td>是</td></tr> <tr><td>~ /</td> <td>正規表示法，區分大小寫</td> <td>是</td></tr> <tr><td>~* /</td> <td>正規表示法，不區分大小寫</td> <td>是</td></tr></tbody></table></div>","summary":"Self-Signed Certificate + OpenSSL + ADCS + Nginx & Apache2","image":"/badssl.png","date_published":"2024-09-16T00:00:00.000Z","date_modified":"2024-09-16T00:00:00.000Z","tags":["Web","SSL","OS","Nginx","Apache2"],"_indieweb":{"type":"article"}},{"id":"debian","url":"https://localhost:5173/debian","title":"Debian","content_html":"<h2 id=\"安裝功能\" data-svelte-h=\"svelte-1hzw6e2\"><a href=\"#安裝功能\">安裝功能</a></h2> <p data-svelte-h=\"svelte-3ux6py\">安裝 package 指令：<code>apt install [package-name]</code></p> <h2 id=\"vim\" data-svelte-h=\"svelte-1s244mk\"><a href=\"#vim\">vim</a></h2> <p>vim 設定檔編輯：<code data-svelte-h=\"svelte-1t38vfe\">vim /etc/vim/vimrc</code>設定行號指令：<code data-svelte-h=\"svelte-1w10d1x\">set nu</code> <img src=\"https://hackmd.io/_uploads/rkgk7aTnc2.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p data-svelte-h=\"svelte-1c7c1u3\">vim 一般模式指令：Esc + :w       - 保存文件，不退出 vimEsc + :w file  - 將修改另外保存到 file 中，不退出 vimEsc + :w!      - 強制保存，不退出 vimEsc + :wq      - 保存文件，退出 vimEsc + :wq!     - 強制保存文件，退出 vimEsc + :q       - 不保存文件，退出 vimEsc + :q!      - 不保存文件，強制退出 vimEsc + :e!      - 放棄所有修改，從上次保存文件開始再編輯</p> <p>vim 編輯模式指令：插入字元：i取代字元：r可視模式：v刪除內容：d撤銷最近一次編輯：u將誤刪的內容回復：p多行選擇：Shift+V預設編輯器設定：<code data-svelte-h=\"svelte-31uww1\">update-alternatives --config editor</code>選擇 <code data-svelte-h=\"svelte-1s1ryvw\">/usr/bin/vim.basic</code> <img src=\"https://hackmd.io/_uploads/Hy27pah5n.png\" alt=\"https://hackmd.io/_uploads/Hy27pah5n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">輸入 <code data-svelte-h=\"svelte-jgibi1\">editor</code> 即可叫出 vim</p> <h3 id=\"在-putty-上直接對-vim-貼上資料\" data-svelte-h=\"svelte-1xspbcs\"><a href=\"#在-putty-上直接對-vim-貼上資料\">在 putty 上直接對 vim 貼上資料</a></h3> <p>編輯 vim 設定檔： <code data-svelte-h=\"svelte-1t38vfe\">vim /etc/vim/vimrc</code>加入鼠標模式：<code data-svelte-h=\"svelte-10umn1a\">:set mouse=</code>儲存後在 putty 上按 <code data-svelte-h=\"svelte-zy6dbc\">Shift+Insert</code> 即可在 vim 上貼上資料<img src=\"https://hackmd.io/_uploads/ryi466hcn.png\" alt=\"https://hackmd.io/_uploads/ryi466hcn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"開啟新-console\" data-svelte-h=\"svelte-158uymp\"><a href=\"#開啟新-console\">開啟新 Console</a></h2> <p data-svelte-h=\"svelte-b9wu7y\">使用快捷鍵：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>Ctrl + Shift + F2 // 開啟第二個 Console</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1qeg44k\">其中 F2 可以替換成要開的 Console 代號</p> <h2 id=\"刪除相關指令\" data-svelte-h=\"svelte-p5rsrp\"><a href=\"#刪除相關指令\">刪除相關指令</a></h2> <h3 id=\"檔案相關\" data-svelte-h=\"svelte-1m622ym\"><a href=\"#檔案相關\">檔案相關</a></h3> <p>刪除檔案：<code data-svelte-h=\"svelte-luw82u\">rm [filelocation]</code>刪除目錄：<code data-svelte-h=\"svelte-1heozli\">rm -d [dirlocation]</code> <code data-svelte-h=\"svelte-u7xevg\">rmdir [dirlocation]</code>若目錄內有資料：<code data-svelte-h=\"svelte-1yb5khg\">rm -vrf [dirlocation]</code> <img src=\"https://hackmd.io/_uploads/B1QST6nq3.png\" alt=\"https://hackmd.io/_uploads/B1QST6nq3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"完整刪除套件-apt\" data-svelte-h=\"svelte-157e7tf\"><a href=\"#完整刪除套件-apt\">完整刪除套件 (apt)</a></h3> <p data-svelte-h=\"svelte-4787ae\">先將刪除目標的服務停止：<code>service [service] stop</code>完整刪除：<code>apt-get purge [package1] [package2]...</code>(註：若要將全部相關的套件都刪除，先輸入主要的套件名稱 (如：apache2)，再用 Tab 鍵去找尋相關的副套件)接下來要找尋系統中已經用不到的套件，有些是與欲刪除的套件有相關的：<code>apt autoremove</code>最後再找尋是否還有殘留未刪除的檔案：<code>whereis [service]</code></p> <h2 id=\"hostname-更改\" data-svelte-h=\"svelte-14m2566\"><a href=\"#hostname-更改\">hostname 更改</a></h2> <p data-svelte-h=\"svelte-jxcdqq\">查看目前 hostname：<code>hostname</code>更改 hostname：<code>hostnamectl set-hostname [the-hostname-u-want-to-change]</code></p> <h2 id=\"samba-資料夾共享\" data-svelte-h=\"svelte-1r5m7df\"><a href=\"#samba-資料夾共享\">Samba (資料夾共享)</a></h2> <p data-svelte-h=\"svelte-5xfstb\">Samba 設定檔編輯：<code>vim /etc/samba/smb.conf</code>建立資料夾：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>mkdir /public</div><div class='line'>mkdir /private</div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1przzpo\">path=/home/jackey：上述的jackey這個分享目錄，位在主機中實體的路徑為/home/jackeywritable = yes：可以讀寫，修改分享目錄中的檔案public = yes：所有人都可以訪問此共享資料夾read only = no：非唯讀模式，其他人可以寫入更改完後執行<code>service smbd restart</code>來重置 Samba 服務，使設定值生效。</p> <h3 id=\"samba-存取驗證-smbpasswd\" data-svelte-h=\"svelte-17va5j1\"><a href=\"#samba-存取驗證-smbpasswd\">Samba 存取驗證 (smbpasswd)</a></h3> <p>限制在 <code data-svelte-h=\"svelte-1redfxp\">smbuser</code> 群組的使用者才可存取資料夾設定方式：<img src=\"https://hackmd.io/_uploads/B14jpF30a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定後還要將使用者加入 <code data-svelte-h=\"svelte-1qcgx2a\">smbpasswd</code> 內</p> <p data-svelte-h=\"svelte-1dp44ke\">一次新增 9 個使用者 (user01~user09) 到 smbpasswd 且密碼為 Skills39：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>for ((i=1;i&lt;=9;i++))&gt; do&gt; (echo \"Skills39\"; echo \"Skills39\") | smbpasswd -s -a user0$i&gt; done</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"chmod-權限修改\" data-svelte-h=\"svelte-gmmpn1\"><a href=\"#chmod-權限修改\">chmod (權限修改)</a></h2> <h3 id=\"數字代表的權限\" data-svelte-h=\"svelte-1x5l8mo\"><a href=\"#數字代表的權限\">數字代表的權限</a></h3> <p data-svelte-h=\"svelte-17cdq0n\">7 = 讀、寫和執行權限5 = 讀和執行權限4 = 唯讀權限第一位數字：文件所有者第二位數字：群組使用者 (與文件所有者在同一使用者群組)第三位數字：其他使用者</p> <h3 id=\"資料夾權限更改\" data-svelte-h=\"svelte-g67lyv\"><a href=\"#資料夾權限更改\">資料夾權限更改</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>chmod 777 [dirlocation] //將資料夾權限設為所有人都可以修改</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"資料夾及內部檔案權限更改\" data-svelte-h=\"svelte-1o1g43w\"><a href=\"#資料夾及內部檔案權限更改\">資料夾及內部檔案權限更改</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>chmod -R 777 [dirlocation] //將資料夾及內部檔案權限設為所有人都可以修改</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"修改-ip-位置\" data-svelte-h=\"svelte-of4ge9\"><a href=\"#修改-ip-位置\">修改 IP 位置</a></h2> <p data-svelte-h=\"svelte-o42m6n\">修改網卡設定檔：<code>vim /etc/network/interfaces</code>修改為下列資訊：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code>auto ens33iface ens33 inet staticaddress [ur ip address] (or [ur ip address]/[ur subnet])netmask [ur netmask]gateway [ur gateway]dns-nameservers [ur dns-server]</code></div></pre><!-- Note from shiki-twoslash: the language root= was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-jyd11n\">DNS 設定：修改/建立 DNS 設定檔：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>vim /etc/resolv.conf</div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-12eeknf\">輸入：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>nameserver [ur dns-server]</div></code></div></pre><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/H1uEzKXy0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"error-rtnetlink-answers-file-exists\" data-svelte-h=\"svelte-2vb28g\"><a href=\"#error-rtnetlink-answers-file-exists\">error: RTNETLINK answers: File exists</a></h3> <p><img src=\"https://hackmd.io/_uploads/BJzymBWBR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">可透過指令刪除現有配置來重置介面：<code data-svelte-h=\"svelte-6pt5fq\">ip addr flush dev eth0</code>再使用 <code data-svelte-h=\"svelte-14elun0\">service networking restart</code> 來重新套用介面設定並啟用</p> <h2 id=\"自訂網卡名稱-attr\" data-svelte-h=\"svelte-3a2k7r\"><a href=\"#自訂網卡名稱-attr\">自訂網卡名稱 (ATTR)</a></h2> <p data-svelte-h=\"svelte-1ngii5c\">編輯及新增檔案：<code>vim /etc/udev/rules.d/net.rules</code>輸入以下內容：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>ATTR&#123;address&#125;==\"[網路介面MAC位置]\",NAME=\"[想更改為什麼網卡名稱]\"</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/S1fWYnuc6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">輸入後退出再編輯網路介面設定：<code data-svelte-h=\"svelte-20hn60\">vim /etc/network/interface</code> <img src=\"https://hackmd.io/_uploads/HyEdF2_c6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">最後將電腦重啟：<code data-svelte-h=\"svelte-2xt341\">reboot</code></p> <h2 id=\"關閉最後登入訊息顯示\" data-svelte-h=\"svelte-bx05hp\"><a href=\"#關閉最後登入訊息顯示\">關閉最後登入訊息顯示</a></h2> <p data-svelte-h=\"svelte-1rjf8os\">輸入 <code>touch ~/.hushlogin</code>，登出後即生效</p> <h2 id=\"ufw-firewall-useless\" data-svelte-h=\"svelte-14ph00u\"><a href=\"#ufw-firewall-useless\">ufw (Firewall) (useless)</a></h2> <p>輸入 <code data-svelte-h=\"svelte-1qfydfu\">apt install ufw</code> 安裝 ufw檢查 ufw 是否運作正常：<code data-svelte-h=\"svelte-1trx1af\">service ufw status</code>ufw：<img src=\"https://hackmd.io/_uploads/HkSYT6hc3.png\" alt=\"https://hackmd.io/_uploads/HkSYT6hc3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">可使用 <code data-svelte-h=\"svelte-1hrohei\">ufw status</code> 查看目前允許或拒絕存取的 Port<img src=\"https://hackmd.io/_uploads/By3Ypphqh.png\" alt=\"https://hackmd.io/_uploads/By3Ypphqh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">輸入 <code data-svelte-h=\"svelte-1k0chy3\">ufw allow/deny [port] from/to [link]</code> 可增加要允許或拒絕規則</p> <h2 id=\"iptables\" data-svelte-h=\"svelte-1b0gsvg\"><a href=\"#iptables\">iptables</a></h2> <p data-svelte-h=\"svelte-q3ktjn\">查看目前規則：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>iptables -Loriptables -L --line-numbers (可查看帶有編號的規則，可用於刪除規則)</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/BkEq6p35h.png\" alt=\"https://hackmd.io/_uploads/BkEq6p35h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"基本設定\" data-svelte-h=\"svelte-tyxhgj\"><a href=\"#基本設定\">基本設定</a></h3> <p data-svelte-h=\"svelte-1yqumv3\">清除規則：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>iptables -F //清除所有的已訂定的規則iptables -X //殺掉所有使用者建立的 tablesiptables -Z //將所有的 chain 的計數與流量統計都歸零</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/H1Acaah5n.png\" alt=\"https://hackmd.io/_uploads/H1Acaah5n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定預設 Chain Policy 為 DROP：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>iptables -P INPUT DROPiptables -P OUTPUT DROPiptables -P FORWARD DROP</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/HJlcEy9h6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"port-連線管理\" data-svelte-h=\"svelte-5qmkr9\"><a href=\"#port-連線管理\">Port 連線管理</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>//允許 Port 80 連線iptables -A INPUT -p tcp --dport 80 -j ACCEPT//拒絕 Port 30 連線iptables -A INPUT -p tcp --dport 30 -j REJECT</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"nat-轉址服務\" data-svelte-h=\"svelte-99c45w\"><a href=\"#nat-轉址服務\">NAT 轉址服務</a></h3> <h4 id=\"snat-原位址轉換-內傳外\" data-svelte-h=\"svelte-12mi6dw\"><a href=\"#snat-原位址轉換-內傳外\">SNAT (原位址轉換) (內傳外)</a></h4> <p data-svelte-h=\"svelte-ficulg\"><strong>若要做 NAT 設定，設定指令最前面要先打 iptables -t nat</strong>使用 iptables 來完成此項目。</p> <p data-svelte-h=\"svelte-193e93w\">NAT 設定：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>// 外網位置為 39.53.6.1/24，網卡為 eth1iptables -t nat -A POSTROUTING -o eth1 -j SNAT --to 39.53.6.1</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1xt52ia\">NAT 設定 (若外網 IP 非固定 IP)：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>// 外網網卡為 eth1iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h4 id=\"dnat-目的位址轉換-外傳內\" data-svelte-h=\"svelte-f3mbbg\"><a href=\"#dnat-目的位址轉換-外傳內\">DNAT (目的位址轉換) (外傳內)</a></h4> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>// 內網位置為 192.168.39.2/24，網卡為 eth0 (設定完後本機的位置都會一律被定向到內網的192.168.39.2，建議搭配 Port 使用)iptables –t nat –A PREROUTING –i eth0 –j DNAT --to 192.168.39.2</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"port-forwarding\" data-svelte-h=\"svelte-ssesp0\"><a href=\"#port-forwarding\">Port Forwarding</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 將 localhost 上的 Web Server 的 80 Port 做 Port Fowarding 至 8000 Portiptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8000iptables -t nat -A OUTPUT -p tcp -d localhost --dport 80 -j REDIRECT --to-ports 8000// 將在 eth0 收到的 80 Port 封包全部做 Port Forwarding 至 8080 Portiptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"啟用-ipv4-封包轉發\" data-svelte-h=\"svelte-f9frhn\"><a href=\"#啟用-ipv4-封包轉發\">啟用 IPv4 封包轉發</a></h3> <p>若有做 NAT 或 Port Forwarding 都需要啟用封包轉發輸入 <code data-svelte-h=\"svelte-1r22xip\">sysctl -w net.ipv4.ip_forward=1</code> 來允許系統做 Port Forwarding (重啟後會消失)若想永久保存可編輯 <code data-svelte-h=\"svelte-157ke2k\">/etc/sysctl.conf</code>將註解的 <code data-svelte-h=\"svelte-9mxdir\">net.ipv4.ip_forward=1</code> 取消註解，重啟或輸入<code data-svelte-h=\"svelte-t9g8dz\">sysctl -p</code>來生效<img src=\"https://hackmd.io/_uploads/ByoUA-P6a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">現在既可以直接使用 8000 Port 訪問，也可以使用 80 Port 自動轉至 8000 Port 來訪問<img src=\"https://hackmd.io/_uploads/H1ubS3Iea.png\" alt=\"https://hackmd.io/_uploads/H1ubS3Iea.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BkFT43Lga.png\" alt=\"https://hackmd.io/_uploads/BkFT43Lga.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/B1zsE38e6.png\" alt=\"https://hackmd.io/_uploads/B1zsE38e6.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <strong data-svelte-h=\"svelte-oidmfn\"># 此方式較麻煩故淘汰，可見下面方法保存</strong> <del data-svelte-h=\"svelte-1rnr5ft\">若想在重啟後一樣保留 Port Forwarding 的設定，可以至 <code>/etc/network/interface</code> 的網卡設定檔，在最下方加入post-up [iptables command]在網卡啟動後就會自動執行</del></p> <h3 id=\"icmp-封包管理-ip-a-連線到-ip-b-限制\" data-svelte-h=\"svelte-4mcb3l\"><a href=\"#icmp-封包管理-ip-a-連線到-ip-b-限制\">ICMP 封包管理 (IP A 連線到 IP B 限制)</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 規定 192.168.10.58 不能傳送 ICMP 封包到 192.168.10.56iptables -A INPUT -s 192.168.10.58 -d 192.168.10.56 -p icmp -j DROP/REJECT// 取消規則iptables -D INPUT (規則編號)</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>可以使用 Ping 指令來測試規則是否正常運行：規則未啟用：(可正常 Ping 通)<img src=\"https://hackmd.io/_uploads/H1L6XjMz6.png\" alt=\"https://hackmd.io/_uploads/H1L6XjMz6.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">規則已啟用：(使用 DROP：顯示逾時)<img src=\"https://hackmd.io/_uploads/SkSlNozMT.png\" alt=\"https://hackmd.io/_uploads/SkSlNozMT.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">(使用 REJECT：顯示封包無法抵達目標主機)<img src=\"https://hackmd.io/_uploads/rybisP8Ga.png\" alt=\"https://hackmd.io/_uploads/rybisP8Ga.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"保存當前設定-全部規則皆適用\" data-svelte-h=\"svelte-15lpa99\"><a href=\"#保存當前設定-全部規則皆適用\">保存當前設定 (全部規則皆適用)</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>apt install iptables-persistent</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-sh7lhf\">都點選 OK 後，重開機規則不會消失如果有做變更則重新安裝套件即可：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>apt reinstall iptables-persistent</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"刪除某一行規則\" data-svelte-h=\"svelte-9vle50\"><a href=\"#刪除某一行規則\">刪除某一行規則</a></h3> <p data-svelte-h=\"svelte-1il1msn\">先查看規則號碼：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>iptables -L --line-numbers</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1h57vd1\">依照編號選擇要刪除的規則：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>iptables -D INPUT 1 # 若只有上述那行，那就是 1</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"dns-server-bind9\" data-svelte-h=\"svelte-oyqkff\"><a href=\"#dns-server-bind9\">DNS Server (Bind9)</a></h2> <p data-svelte-h=\"svelte-mjh2zy\">設定完記得使用 <code>service named restart</code> 重啟 DNS 服務</p> <h3 id=\"正解建立\" data-svelte-h=\"svelte-14ke0rf\"><a href=\"#正解建立\">正解建立</a></h3> <p><code data-svelte-h=\"svelte-ubmcvq\">named.conf.local</code> 設定檔內容<img src=\"https://hackmd.io/_uploads/SytsT6h5h.png\" alt=\"https://hackmd.io/_uploads/SytsT6h5h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-1o9fgwo\">db.wsdomain.com.tw</code> 設定檔內容<img src=\"https://hackmd.io/_uploads/rkE2aahc3.png\" alt=\"https://hackmd.io/_uploads/rkE2aahc3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">使用瀏覽器輸入 <code data-svelte-h=\"svelte-1sw59ua\">wsdomain.com.tw</code> 可導向至 <code data-svelte-h=\"svelte-rsrqol\">192.168.100.201</code> 的主機輸入 <code data-svelte-h=\"svelte-kcn8rd\">www.wsdomain.com.tw</code> 也可導向至 <code data-svelte-h=\"svelte-rsrqol\">192.168.100.201</code> 的主機輸入 <code data-svelte-h=\"svelte-1sgbnj6\">amogus.wsdomain.com.tw</code> 可導向至 <code data-svelte-h=\"svelte-yve35c\">192.168.100.204</code> 的主機</p> <h3 id=\"反解建立\" data-svelte-h=\"svelte-1elbq8t\"><a href=\"#反解建立\">反解建立</a></h3> <p>假設要在 <code data-svelte-h=\"svelte-1a75nlu\">192.168.39.0/24</code> 的網段上建立 <code data-svelte-h=\"svelte-103gjeb\">wsc2024.fr</code> 的反解<code data-svelte-h=\"svelte-vock1u\">named.conf.default-zones</code> 設定檔內容 (第一個區域是正解使用)<img src=\"https://hackmd.io/_uploads/rylStq5t3.png\" alt=\"https://hackmd.io/_uploads/rylStq5t3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-16pltl1\">db.39.168.192</code> 設定檔內容<img src=\"https://hackmd.io/_uploads/HySH95cYn.png\" alt=\"https://hackmd.io/_uploads/HySH95cYn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">nslookup 伺服器位置後會出現其對應的網域<img src=\"https://hackmd.io/_uploads/ryER5c5Y2.png\" alt=\"https://hackmd.io/_uploads/ryER5c5Y2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"dns-授權\" data-svelte-h=\"svelte-i6kdwx\"><a href=\"#dns-授權\">DNS 授權</a></h3> <p>設定主網域 <code data-svelte-h=\"svelte-1vj7x7r\">diego.com</code> 將子網域 <code data-svelte-h=\"svelte-hxsmpd\">branch.diego.com</code> 授權上層伺服器設定：<img src=\"https://hackmd.io/_uploads/ByAfijtC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/HkgCuoFRT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">下層伺服器設定：<img src=\"https://hackmd.io/_uploads/H1wTDiYC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">註 1：第一個的 NS 規則不能隨便設定，盡量是域名，確保全部記錄都能被解析註 2：在指定 NS 紀錄時，若沒有自行輸入句點 (<code data-svelte-h=\"svelte-1p1ls1w\">.</code>)，就會自動補齊名稱例：<code data-svelte-h=\"svelte-10k33cn\">dns.branch</code> 在 <code data-svelte-h=\"svelte-1vj7x7r\">diego.com</code> 的 DNS 檔案就會變成 <code data-svelte-h=\"svelte-tkmcc2\">dns.branch.diego.com.</code></p> <h3 id=\"請求轉送\" data-svelte-h=\"svelte-ts4n7h\"><a href=\"#請求轉送\">請求轉送</a></h3> <p>編輯檔案：<code data-svelte-h=\"svelte-1ym7hrd\">vim /etc/bind/named.conf.options</code> <img src=\"https://hackmd.io/_uploads/HkcLPiJZC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"建立大量有順序紀錄\" data-svelte-h=\"svelte-f0xpof\"><a href=\"#建立大量有順序紀錄\">建立大量有順序紀錄</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 建立 test1.domain.com ~ test100.domain.com 的 A 紀錄，並指向 192.168.1.1$GENERATE    1-100    test$.domain.com    IN    A    192.168.1.1</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/S1BI4LRAT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"編輯版本號碼-有版本詢問時回傳特定文字\" data-svelte-h=\"svelte-1svlfih\"><a href=\"#編輯版本號碼-有版本詢問時回傳特定文字\">編輯版本號碼 (有版本詢問時，回傳特定文字)</a></h3> <p>編輯檔案：<code data-svelte-h=\"svelte-1ym7hrd\">vim /etc/bind/named.conf.options</code>更改 version 下的內容為回傳的內容<img src=\"https://hackmd.io/_uploads/SkogZzAca.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">查詢版本指令：<code data-svelte-h=\"svelte-196mv23\">nslookup -debug -class=chaos -query=txt version.bind [DNS-IP]</code> <img src=\"https://hackmd.io/_uploads/r1V_GzA5a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"mx-紀錄建立\" data-svelte-h=\"svelte-168r1du\"><a href=\"#mx-紀錄建立\">MX 紀錄建立</a></h3> <p><img src=\"https://hackmd.io/_uploads/S1aoQbyd0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">需要 Mail Server 的 FQDN 的 A Record 來當作 MX Record 的參考<img src=\"https://hackmd.io/_uploads/Byt8VbJdR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/H1V5BZJ_A.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"web-file-server\" data-svelte-h=\"svelte-11lxpbj\"><a href=\"#web-file-server\">Web File Server</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>// SRV1：192.168.100.201 (www.wsdomain.com.tw) SRV2：192.168.100.202// 在 SRV1 的 /var/www/wsdomain 之下建立 /file 資料夾，提供 File Server 服務，且此服務的資料夾路徑為 SRV2 的共享資料夾 (/share/file)mkdir /var/www/wsdomain/filemount -t cifs -o username=root,password=Skills39,domain=wsdomain.com //192.168.100.202/file/ /var/www/wsdomain/file// domain 參數不一定需要保留，但如果 Server 是在有建立 AD 的環境下需要保留</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>用瀏覽器輸入<code data-svelte-h=\"svelte-nhp48t\">www.wsdomain.com.tw/file/</code>即可訪問目前目錄下的文件<img src=\"https://hackmd.io/_uploads/BygaTTh93.png\" alt=\"https://hackmd.io/_uploads/BygaTTh93.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"return-code-13-read-only\" data-svelte-h=\"svelte-1jdfuh7\"><a href=\"#return-code-13-read-only\">Return Code 13 (Read-Only)</a></h3> <p data-svelte-h=\"svelte-1d8twq\">若遇到錯誤並且返回代碼 13 的錯誤時可以參考以下步驟安裝套件：<code>apt install cifs-utils</code>建立並編輯一個檔案 (此處路徑用<code>cifs.auth</code>)：<code>vim cifs.auth</code>檔案格式：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>user=[username]password=[password]domain=[domain]// domain 參數不一定需要保留，但如果 Server 是在有建立 AD 的環境下需要保留</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-18hfx94\">存檔後，即可掛載：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>mount -t cifs -o credentials=cifs.auth //192.168.100.202/file /var/www/wsdomain/file</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"查看目前目錄下檔案及目錄之權限\" data-svelte-h=\"svelte-n9xv4n\"><a href=\"#查看目前目錄下檔案及目錄之權限\">查看目前目錄下檔案及目錄之權限</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>ls -al</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/H1q66phq2.png\" alt=\"https://hackmd.io/_uploads/H1q66phq2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"批量加入使用者-for-loop\" data-svelte-h=\"svelte-1jrn5fz\"><a href=\"#批量加入使用者-for-loop\">批量加入使用者 (for loop)</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>//加入九個使用者，名稱為 user001~user009for ((i=1;i&lt;=9;i++))&gt; do&gt; useradd user00$i&gt; done</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"使用者和群組常用設定指令\" data-svelte-h=\"svelte-hok9yu\"><a href=\"#使用者和群組常用設定指令\">使用者和群組常用設定指令</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>useradd [username] //建立使用者useradd -g [groupname] [username] //建立有初始群組的使用者useradd -G [groupname] [username] //建立一般群組的使用者useradd -m [username] //建立有家目錄的使用者 (/home)useradd -p &#96;openssl passwd -1 [password]&#96; -s /bin/bash [username] //建立帶密碼且路徑為/bin/bash的使用者userdel [username] //刪除使用者groupadd [groupname] //創立使用者群組usermod -a -G [groupname] [username] or gpasswd -a [username] [groupname] //將使用者加入群組usermod -g [groupname] [username] //更改使用者的主要用戶組usermod -s /bin/bash [username] //更改使用者預設路徑為/bin/bashgpasswd -d [username] [groupname] //將使用者移出群組mkhomedir_helper [username] //幫已存在的使用者創立家目錄 (/home)rm -r /home/[username] //刪除使用者的家目錄 (/home)</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <ul data-svelte-h=\"svelte-a5zyjt\"><li>其實在預設狀態下不論使用 useradd 或 adduser 建立的使用者根目錄都會是家目錄，以上關於家目錄的設定指令是以防萬一使用</li></ul> <h2 id=\"密碼常用指令\" data-svelte-h=\"svelte-1k7cbc5\"><a href=\"#密碼常用指令\">密碼常用指令</a></h2> <p>強制使用者首次登入時更改密碼：<code data-svelte-h=\"svelte-19jdch5\">chage -d 0 [username]</code>限制更改密碼的最短/最大長度：(1) 編輯密碼驗證策略：<code data-svelte-h=\"svelte-1jt219o\">vim /etc/pam.d/common-password</code>(2-1) 設定密碼最短長度為 8 個字元：在<code data-svelte-h=\"svelte-1phnlau\">password [success=1 default=ignore] pam.unix.so obscure yescrypt</code> 後面加入 <code data-svelte-h=\"svelte-19ylbwm\">minlen=8</code> <img src=\"https://hackmd.io/_uploads/Hk4Cpph5h.png\" alt=\"https://hackmd.io/_uploads/Hk4Cpph5h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">(註：minlen=最短長度 maxlen=最大長度)(2-3) 取消密碼複雜性限制：在 <code data-svelte-h=\"svelte-1fntbme\">password requsite pam_deny.so</code> 中間加入 <code data-svelte-h=\"svelte-gempn1\">dictcheck=0</code> <img src=\"https://hackmd.io/_uploads/HycQD2pp6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"dhcp-server\" data-svelte-h=\"svelte-1ab70iw\"><a href=\"#dhcp-server\">DHCP Server</a></h2> <p data-svelte-h=\"svelte-2wcoxr\">安裝套件：<code>apt install isc-dhcp-server</code>編輯設定檔：<code>vim /etc/dhcp/dhcpd.conf</code></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>option domain-name \"thedomain.com\"; // 網域名稱default-lease-time 600; // 預設租賃時間max-lease-time 3600; // 最大租賃時間authoritative;// 網段設定 (可以只輸入這段)subnet 10.121.210.0 netmask 255.255.255.0 &#123;    range 10.121.210.1 10.121.210.253; // 分配IP範圍    option domain-name-servers 8.8.8.8; // DNS 設定    option routers 10.121.210.254; // 目標路由器IP&#125;</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-l7hxzj\">如果需要為特定電腦保留 IP 位置：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>host [主機名稱] &#123;    hardware ethernet [MAC 位置];    fixed-address [保留的IP位置];&#125;</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1iclkal\">編輯發位址的網卡：<code>vim /etc/default/isc-dhcp-server</code></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>INTERFACEv4=\"eth0\" //欲發位址的網卡名稱，若有多張網卡則以空格分隔</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-kgilzd\">設定完重啟服務：<code>service isc-dhcp-server restart</code></p> <h3 id=\"檢查-dhcp-server-已發出去的-ip-位址\" data-svelte-h=\"svelte-h8tvec\"><a href=\"#檢查-dhcp-server-已發出去的-ip-位址\">檢查 DHCP Server 已發出去的 IP 位址</a></h3> <p data-svelte-h=\"svelte-1qn092x\">用 tail 指令實時檢查 log ，並且濾出關於 DHCP 的紀錄</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>tail -f /var/log/syslog | grep dhcpd //僅可用於 Debian 11tail -f journalctl | grep dhcpd | vim - //可用於 Debian 12</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"設定跨網段-dhcp-server\" data-svelte-h=\"svelte-p74h1u\"><a href=\"#設定跨網段-dhcp-server\">設定跨網段 DHCP Server</a></h3> <p>可對現有網路介面設定子介面達成跨網段 DHCP Server編輯網路介面設定檔：<code data-svelte-h=\"svelte-1tvkct9\">vim /etc/network/interfaces</code>設定網路子介面：<img src=\"https://hackmd.io/_uploads/rJh1HC_qa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>auto [主介面]:0iface [主介面]:0 inet staticaddress [子介面IP位置，依照 DHCP 網段設定]// 子介面不可設定 Gateway，會無法啟動介面// 在編輯 DHCP 發位址的網卡時，一定要設定子介面</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/r1riL0Oqa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"dhcp-relay\" data-svelte-h=\"svelte-1v4vhno\"><a href=\"#dhcp-relay\">DHCP Relay</a></h3> <p>DHCP Relay Agent 可接收 Client 端所發出的 DHCP Request/Discover 封包，並轉發至指定的 DHCP Server安裝套件：<code data-svelte-h=\"svelte-1t7osv3\">apt install isc-dhcp-relay</code>編輯檔案：<code data-svelte-h=\"svelte-47vs4a\">vim /etc/etc/default/isc-dhcp-relay</code> <img src=\"https://hackmd.io/_uploads/Sy6hMA_qa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>SERVERS=\"[你的 DHCP Server IP]\"INTERFACES=\"[接收 Client 請求及能與 DHCP Server 連線的網路介面]\"</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"在-root-使用-rmcp-及-mv-指令前先確認是否要執行\" data-svelte-h=\"svelte-1hcxnci\"><a href=\"#在-root-使用-rmcp-及-mv-指令前先確認是否要執行\">在 root 使用 rm，cp 及 mv 指令前先確認是否要執行</a></h2> <p>編輯 root 的 bashrc 檔案：<code data-svelte-h=\"svelte-1ep630o\">vim ~/.bashrc</code> <img src=\"https://hackmd.io/_uploads/S1Lu7OZt2.png\" alt=\"https://hackmd.io/_uploads/S1Lu7OZt2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">將下面三行註解解除掉後存檔：<img src=\"https://hackmd.io/_uploads/SJnFXOWKn.png\" alt=\"https://hackmd.io/_uploads/SJnFXOWKn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">最後重新載入 bashrc：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>. ~/.bashrc</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ByRsejrka.png\" alt=\"https://hackmd.io/_uploads/ByRsejrka.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"sudo-設定\" data-svelte-h=\"svelte-1tbw5dq\"><a href=\"#sudo-設定\">sudo 設定</a></h2> <p data-svelte-h=\"svelte-upo26v\">安裝設定 sudo 的套件：<code>apt install sudo</code>修改設定檔預設編輯器從 nano 到 vim：<code>EDITOR=vim visudo</code>編輯設定檔：<code>visudo</code></p> <h3 id=\"設定某些使用者或群組不需密碼即可使用-sudo\" data-svelte-h=\"svelte-11sly8v\"><a href=\"#設定某些使用者或群組不需密碼即可使用-sudo\">設定某些使用者或群組不需密碼即可使用 sudo</a></h3> <p data-svelte-h=\"svelte-t73ym7\">若是使用者，在使用者區域增加：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>[username]    ALL=(ALL) NOPASSWD:ALL</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1fgub3z\">若是群組，在群組區域增加：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>%[groupname]    ALL=(ALL) NOPASSWD:ALL</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/r1dBMh5Yn.png\" alt=\"https://hackmd.io/_uploads/r1dBMh5Yn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">指令說明：<img src=\"https://hackmd.io/_uploads/S1UXdwi03.png\" alt=\"https://hackmd.io/_uploads/S1UXdwi03.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"限制-sudo-使用者可使用的指令\" data-svelte-h=\"svelte-wuu0uw\"><a href=\"#限制-sudo-使用者可使用的指令\">限制 sudo 使用者可使用的指令</a></h3> <p data-svelte-h=\"svelte-1w639ct\">先將欲設定的使用者加入 sudo 群組：<code>usermod -aG sudo [username]</code>假設要限制 sudo 群組僅可使用 cat, mv 及 ls 三個指令，在文件的群組區域內增加：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>%sudo   ALL=(ALL:ALL) /bin/cat, /bin/mv, /bin/ls</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ByMR2PoR3.png\" alt=\"https://hackmd.io/_uploads/ByMR2PoR3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">(註：大多的指令路徑都是在 /bin (/usr/bin) 或 /sbin 資料夾內)最終結果：當在 sudo 群組內的使用者使用 sudo 執行其他指令會顯示不允許執行<img src=\"https://hackmd.io/_uploads/HygOaAwsC2.png\" alt=\"https://hackmd.io/_uploads/HygOaAwsC2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"log-查看-以-vim-開啟\" data-svelte-h=\"svelte-o9kz1e\"><a href=\"#log-查看-以-vim-開啟\">log 查看 (以 vim 開啟)</a></h2> <p data-svelte-h=\"svelte-bjnkhy\">Debian 12：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>journalctl | vim -</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"ifconfig\" data-svelte-h=\"svelte-7xeag9\"><a href=\"#ifconfig\">ifconfig</a></h2> <p data-svelte-h=\"svelte-1dy7bj5\">ifconfig 指令已於 Debian 12 上移除，不過安裝 net-tools 套件後即可使用</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>apt install net-tools</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"硬碟設定\" data-svelte-h=\"svelte-1f80tvu\"><a href=\"#硬碟設定\">硬碟設定</a></h2> <p>在 VMware 掛載了多顆 SCSI 硬碟到 Debian 會在目錄 <code data-svelte-h=\"svelte-1fxnrw\">/dev</code> 下顯示，編號從 <code data-svelte-h=\"svelte-t73ocs\">sda</code> 開始排序，若尾碼帶有數字代表此硬碟的分區代號，像是 <code data-svelte-h=\"svelte-1tm02pa\">sda1、sda2、sda5</code> 等分區都是從 <code data-svelte-h=\"svelte-t73ocs\">sda</code> 硬碟分割出來的<img src=\"https://hackmd.io/_uploads/rkrSr_nCa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rk9mHd2C6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">也可以使用指令 <code data-svelte-h=\"svelte-1h6t8k\">fdisk -l</code> 查看硬碟資訊<img src=\"https://hackmd.io/_uploads/ry6fu_2A6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"掛載\" data-svelte-h=\"svelte-1r0i2xe\"><a href=\"#掛載\">掛載</a></h3> <p data-svelte-h=\"svelte-lsnq8x\">使用指令掛載硬碟：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>mkdir /data1 // 先建立一個資料夾，為掛載的目標資料夾mount /dev/[disk_code] /data1</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/H1SAdu3Ap.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若遇到 wrong fs type 問題可能是硬碟還未初始化，可透過指令格式化硬碟：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>mkfs -t ext4 /dev/[disk_code]// 在使用 mkfs 指令時需要指定硬碟格式，通常為 ext4// 而使用 mount 時若硬碟格式是 ext4 則無需特別指定</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/SJoFYOh06.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"sed-stream-editor\" data-svelte-h=\"svelte-1jpgfoy\"><a href=\"#sed-stream-editor\">sed (Stream Editor)</a></h2> <p data-svelte-h=\"svelte-mhr5zx\">sed 適合用於更改大量檔案且要修改的資料皆相同的時候</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>// 將檔案的第 12 行的 /var/www/html 更改為 /home/usersed -i '12s#/var/www/html#/home/user#' [file_name]</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>-i：於文件中執行操作</div><div class='line'>12：更改文件的第 12 行</div><div class='line'>s：進行替換操作</div><div class='line'>#：分隔符號</div><div class='line'>a：加入文字操作</div></code></div></pre><!-- HTML_TAG_END --> <p>可以寫成一個 for loop script：<img src=\"https://hackmd.io/_uploads/BJS-zUCCa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">根據語法變化，如果要放 Tab 在 Debian 視情況使用 <code data-svelte-h=\"svelte-k4570\">\\t</code> 或 <code data-svelte-h=\"svelte-1edbfnw\">\\\\\\t</code></p> <h2 id=\"echo-html\" data-svelte-h=\"svelte-natx0g\"><a href=\"#echo-html\">echo html</a></h2> <p data-svelte-h=\"svelte-1195szi\">適合用於 for 迴圈製造網頁</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>echo \"&lt;h1&gt;HTML Content&lt;/h1&gt;\" &gt; [file].html</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ryI2vU0Ra.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/H1savIC06.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"chrony-ntp-client\" data-svelte-h=\"svelte-12wuvrt\"><a href=\"#chrony-ntp-client\">chrony (NTP Client)</a></h2> <p data-svelte-h=\"svelte-ochhgj\">安裝套件：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>apt install chrony</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-rai2wg\">編輯設定檔：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>vim /etc/chrony/chrony.conf</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>將預設的 pool 註解，新增一行 pool 加入自己的 NTP Server<img src=\"https://hackmd.io/_uploads/rJs8Lelk0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p data-svelte-h=\"svelte-mfh653\">重新啟動服務：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>service chrony restart</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>使用指令 <code data-svelte-h=\"svelte-zzgs5e\">chronyc sources</code> 可查看當前 NTP 狀態：<img src=\"https://hackmd.io/_uploads/r1c0IggkC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"ftp-server-vsftpd\" data-svelte-h=\"svelte-1l6g50h\"><a href=\"#ftp-server-vsftpd\">FTP Server (vsftpd)</a></h2> <p data-svelte-h=\"svelte-ochhgj\">安裝套件：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" sudo=\"=\"><div class='code-container'><code>apt install vsftpd</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"使用-ipv4\" data-svelte-h=\"svelte-1vtfbj8\"><a href=\"#使用-ipv4\">使用 IPv4</a></h3> <p>如果要允許 IPv4，必須先將 IPv6 停用，只能<strong data-svelte-h=\"svelte-1k0tgnv\">二擇一</strong> <img src=\"https://hackmd.io/_uploads/SJD1qlXyR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"允許-root-登入\" data-svelte-h=\"svelte-1vrg7pg\"><a href=\"#允許-root-登入\">允許 Root 登入</a></h3> <p>將 <code data-svelte-h=\"svelte-4h59b4\">pam_service_name</code> 從 <code data-svelte-h=\"svelte-ztxiqp\">vsftpd</code> 改成 <code data-svelte-h=\"svelte-c71s74\">ftp</code> <img src=\"https://hackmd.io/_uploads/rkAyUgmyR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">這樣 vsftpd 就會到檔案 <code data-svelte-h=\"svelte-fwj8za\">/etc/ftpusers</code> 去找允許登入的使用者<img src=\"https://hackmd.io/_uploads/BJ5I8emyA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">預設的 <code data-svelte-h=\"svelte-ztxiqp\">vsftpd</code> 是到 <code data-svelte-h=\"svelte-1r8ahx9\">/etc/shells</code> 去找與以下 shell 相符的使用者<img src=\"https://hackmd.io/_uploads/ByrZwgmkA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"參數解釋\" data-svelte-h=\"svelte-16imikv\"><a href=\"#參數解釋\">參數解釋</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'># 允許匿名使用者登入</div><div class='line'>anonymous_enable=YES</div><div class='line'># 匿名使用者目錄</div><div class='line'>anon_root=(none)</div><div class='line'># 允許本機使用者登入</div><div class='line'>local_enable=YES</div><div class='line'># 允許上傳檔案 (全局設定)</div><div class='line'>write_enable=YES</div></code></div></pre><!-- HTML_TAG_END --> <h3 id=\"ssl\" data-svelte-h=\"svelte-19qfsya\"><a href=\"#ssl\">SSL</a></h3> <p><img src=\"https://hackmd.io/_uploads/BkdnLMQ10.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'># 導入憑證檔案</div><div class='line'>rsa_cert_file=/etc/ca/ooo.crt</div><div class='line'># 導入憑證鑰匙</div><div class='line'>rsa_private_key_file=/etc/ca/ooo.key</div><div class='line'># 啟用 SSL 功能</div><div class='line'>ssl_enable=YES</div></code></div></pre><!-- HTML_TAG_END --> <h2 id=\"靜態路由-ip-route\" data-svelte-h=\"svelte-fmbz4u\"><a href=\"#靜態路由-ip-route\">靜態路由 (ip route)</a></h2> <p data-svelte-h=\"svelte-2uv36a\">注意：<strong>用直接輸入指令的方式無法在重開機或重啟服務後保留</strong></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>ip route add [destination-network_segment] dev [network-interface]ip route add [destination-network_segment] via [nexthop-router-ip]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1vqvj5o\">dev：設定這網段的要走哪個介面卡為路由via：設定這網段的下一跳躍路徑為哪台路由器</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 設靜態路由，讓 192.168.10.0/24 和 10.0.0.0/28 的網段可以互通// SRV1：192.168.10.1 (eth0)、10.0.0.2 (eth1)// SRV2：10.0.0.1 (eth0)SRV1 上的設定：ip route 10.0.0.0/28 dev eth1 (若 default 路由就是 eth1 也可以略過不設定)SRV2 上的設定：ip route 192.168.10.0/24 via 10.0.0.2</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"重啟後保留靜態路由設定\" data-svelte-h=\"svelte-ijgpmw\"><a href=\"#重啟後保留靜態路由設定\">重啟後保留靜態路由設定</a></h3> <p>將 ip route 寫到網路介面的設定檔：<code data-svelte-h=\"svelte-1vdws8d\">/etc/network/interfaces</code> <img src=\"https://hackmd.io/_uploads/BJ6tCNTw0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">並將寫法改成</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>pre-up ip addr flush eth0// 在介面啟動之前先清除介面資料up ip route replace [destination-network_segment] via [nexthop-router-ip] dev [network-interface]// replace 為避免二次新增路由導致錯誤</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-5ob2m5\">重啟電腦或 <code>service networking restart</code> 的時候就會自動加到路由表內</p> <h2 id=\"playbook-ansible\" data-svelte-h=\"svelte-1v5i5vo\"><a href=\"#playbook-ansible\">PlayBook (Ansible)</a></h2> <p data-svelte-h=\"svelte-1wn0q3d\">執行指令：<code>ansible-playbook -v [your_yaml]</code> <code>-v</code>：表示列出執行詳細資訊可用 <code>ansible-doc [function]</code> 官方內建 Document 查看功能的變數用途</p> <h3 id=\"bash-commends-on-playbook\" data-svelte-h=\"svelte-19a1uhy\"><a href=\"#bash-commends-on-playbook\">Bash commends on PlayBook</a></h3> <h4 id=\"method-1-command\" data-svelte-h=\"svelte-1h4q5u6\"><a href=\"#method-1-command\">Method 1 (command)</a></h4> <p><img src=\"https://hackmd.io/_uploads/SJbfn1ZDR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">可直接用 command 鍵值輸入 bash 指令</p> <h4 id=\"method-2\" data-svelte-h=\"svelte-1cfi42n\"><a href=\"#method-2\">Method 2</a></h4> <p><img src=\"https://hackmd.io/_uploads/BJKRpDDQC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-13x8bpv\">gather_facts</code>：蒐集主機相關資料，並存入資料庫中，若日後有需要可使用，簡單的腳本可關閉此功能<code data-svelte-h=\"svelte-1wlaodd\">become</code>：提升執行權限，若啟用則會以 sudo 權限執行指令，若以 root 使用者執行則可以無需此指令</p> <p>簡單的複製檔案腳本，若有需要以 Echo 顯示訊息，則需要搭配 register 跟 debug 來使用有 Echo：<img src=\"https://hackmd.io/_uploads/rykqAvvQ0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">無 Echo：<img src=\"https://hackmd.io/_uploads/ryJ4yOvm0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"file-檔案資料夾處理\" data-svelte-h=\"svelte-1el3sev\"><a href=\"#file-檔案資料夾處理\">file (檔案、資料夾處理)</a></h3> <p><img src=\"https://hackmd.io/_uploads/SJc6hzaD0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-13wngm1\">state</code> 可選變數說明：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>absent = 刪除檔案或資料夾</div><div class='line'>directory = 建立資料夾</div><div class='line'>touch = 建立檔案</div><div class='line'>hard = 建立檔案硬連結 (需有 src、dest)</div><div class='line'>link = 建立檔案軟連結 (需有 src、dest)</div></code></div></pre><!-- HTML_TAG_END --> <h3 id=\"lineinfile-編輯檔案內文字\" data-svelte-h=\"svelte-ao4d8m\"><a href=\"#lineinfile-編輯檔案內文字\">lineinfile (編輯檔案內文字)</a></h3> <p>新增內容：<img src=\"https://hackmd.io/_uploads/rkeXPWpP0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/r1NIw-awR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-5222v6\">|</code>：當有多行文字需要輸入到文件時可以使用刪除內容：<img src=\"https://hackmd.io/_uploads/BJWZakTDC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">匹配 /etc/bind/db.wsc2024 的內容，內容為 “IN  A 192.168.1.1”，若偵測到就會將該行刪除刪除文件需要將 <code data-svelte-h=\"svelte-13wngm1\">state</code> 設為 <code data-svelte-h=\"svelte-11q1p09\">absent</code> (預設為 <code data-svelte-h=\"svelte-zwm5ar\">present</code>) 並搭配 <code data-svelte-h=\"svelte-93ob71\">regexp</code> (正規表示匹配) (或 <code data-svelte-h=\"svelte-1netlkt\">regex </code>) 使用，<code data-svelte-h=\"svelte-ukk4fo\">^</code> 表示行的開頭，<code data-svelte-h=\"svelte-44q85m\">$</code> 表示行的結尾若只用 <code data-svelte-h=\"svelte-ukk4fo\">^</code> 代表只取開頭，只用 <code data-svelte-h=\"svelte-44q85m\">$</code> 代表只取結尾<strong data-svelte-h=\"svelte-yql6m3\">注意：只要匹配到就會整行刪除！</strong></p> <p>示例：<img src=\"https://hackmd.io/_uploads/ryWRvG6vA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">原檔案：<img src=\"https://hackmd.io/_uploads/Hk-NR-awR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">執行後：<img src=\"https://hackmd.io/_uploads/SyXbdMpvR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>換個匹配對象：<img src=\"https://hackmd.io/_uploads/rkN_OzawC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">執行後<img src=\"https://hackmd.io/_uploads/S1v8_Mpv0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>只用 <code data-svelte-h=\"svelte-44q85m\">$</code> 取結尾：<img src=\"https://hackmd.io/_uploads/ryPfYfpPR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rkQWKfpDR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"blockinfile\" data-svelte-h=\"svelte-qoypto\"><a href=\"#blockinfile\">blockinfile</a></h3> <p>與 lineinfile 相似<img src=\"https://hackmd.io/_uploads/HydBKC3vA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-4i67c2\">marker</code>：會在更動行數的頭尾各新增一行作為標示，預設內容為 <code data-svelte-h=\"svelte-z7zv9i\"># BEGIN ANSIBLE MANAGED BLOCK</code> 跟 <code data-svelte-h=\"svelte-3h2lr2\"># END ANSIBLE MANAGED BLOCK</code> <code data-svelte-h=\"svelte-1y1ums9\">block</code>：表示要在檔案內新增甚麼內容<img src=\"https://hackmd.io/_uploads/HJpIC0nv0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">預設的 <code data-svelte-h=\"svelte-4i67c2\">marker</code> 就算為空還是會有預設的空格，可以透過 lineinfile 匹配刪除空格</p> <h3 id=\"replace-全局替換\" data-svelte-h=\"svelte-1yh1wo7\"><a href=\"#replace-全局替換\">replace (全局替換)</a></h3> <p><img src=\"https://hackmd.io/_uploads/BkdFrzpwR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">將全部匹配到 Listen 的內容全部替換為 I dont want to listen<code data-svelte-h=\"svelte-lswoi\">replace</code>：後面接要替換上去的內容原檔案：<img src=\"https://hackmd.io/_uploads/Hk-NR-awR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">執行後：<img src=\"https://hackmd.io/_uploads/BkwKIGawR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>換個寫法：<img src=\"https://hackmd.io/_uploads/rJ-fvf6vC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">執行後：<img src=\"https://hackmd.io/_uploads/HkBPPf6vC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"copy-複製檔案\" data-svelte-h=\"svelte-dk79tg\"><a href=\"#copy-複製檔案\">copy (複製檔案)</a></h3> <p><img src=\"https://hackmd.io/_uploads/Bk5HifpvC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-1fkgjes\">src</code>：檔案的來源<code data-svelte-h=\"svelte-1bztso\">dest</code>：複製後的檔案的目的地</p> <h3 id=\"apt-安裝-apt-套件\" data-svelte-h=\"svelte-elcpcy\"><a href=\"#apt-安裝-apt-套件\">apt (安裝 apt 套件)</a></h3> <h4 id=\"單套件\" data-svelte-h=\"svelte-1vngudr\"><a href=\"#單套件\">單套件</a></h4> <p><img src=\"https://hackmd.io/_uploads/B1enwqfv0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-1x67wg7\">name</code>：愈安裝的套件名稱</p> <h4 id=\"多套件\" data-svelte-h=\"svelte-z0r5ob\"><a href=\"#多套件\">多套件</a></h4> <p><img src=\"https://hackmd.io/_uploads/HyPca9MDC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-p01k54\">pkg</code>：選擇套件</p> <h3 id=\"stat-檢查檔案或路徑是否存在\" data-svelte-h=\"svelte-199gvjj\"><a href=\"#stat-檢查檔案或路徑是否存在\">stat (檢查檔案或路徑是否存在)</a></h3> <p><img src=\"https://hackmd.io/_uploads/rkGM0NhvC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-1nur1y3\">path</code>：要檢查的檔案或路徑<code data-svelte-h=\"svelte-h9awu3\">exist</code>：用來存放結果的暫存器</p> <p>判斷結果是否執行動作：<img src=\"https://hackmd.io/_uploads/BJJiJH2DC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若 /etc/bind/db.wsc2024 的檔案不存在，則執行上面的動作<code data-svelte-h=\"svelte-fjmxyg\">when</code>：根據暫存器回傳結果決定是否要執行</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>stat 變數：</div><div class='line'>exist.stat.exists = 當 exist 暫存器內路徑的檔案存在時執行</div><div class='line'>not exist.stat.exists = 當 exist 暫存器內路徑的檔案不存在時執行</div><div class='line'></div><div class='line'>exist.stat.isdir = 當 exist 暫存器內路徑為資料夾時執行</div><div class='line'>not exist.stat.isdir = 當 exist 暫存器內路徑為檔案或不存在時執行</div></code></div></pre><!-- HTML_TAG_END --> <h3 id=\"read_csv-讀取-csv-檔案\" data-svelte-h=\"svelte-137f1nc\"><a href=\"#read_csv-讀取-csv-檔案\">read_csv (讀取 CSV 檔案)</a></h3> <p><img src=\"https://hackmd.io/_uploads/SyyYoTmuC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-o4kdo8\">fieldnames</code>：設定 CSV 的 column (列名稱)</p> <h3 id=\"user-使用者建立及管理\" data-svelte-h=\"svelte-6fygyw\"><a href=\"#user-使用者建立及管理\">user (使用者建立及管理)</a></h3> <p><img src=\"https://hackmd.io/_uploads/HkNA6pmOA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-1x67wg7\">name</code>：使用者名稱<code data-svelte-h=\"svelte-mu0rz9\">password</code>：使用者密碼，需透過雜湊函數加密<code data-svelte-h=\"svelte-78vwa3\">group</code>：使用者群組，<strong data-svelte-h=\"svelte-j63yxz\">若本機沒有則需要事先建立</strong> <code data-svelte-h=\"svelte-1hdzauk\">uid</code>：使用者 UID，需確保變數型態為整數<code data-svelte-h=\"svelte-x4ikgk\">shell</code>：使用者 Shell 路徑，通常為 <code data-svelte-h=\"svelte-107dxid\">/bin/bash</code> <code data-svelte-h=\"svelte-12cat00\">create_home</code>：是否建立使用者家目錄 (home)</p> <h4 id=\"loop\" data-svelte-h=\"svelte-1cmyjoy\"><a href=\"#loop\">loop</a></h4> <p data-svelte-h=\"svelte-y3i6rt\"><code>loop</code>：以物件或變數或字串做迴圈，以變數 <code>item</code> 作為 loop 當前所跑到的值</p> <h3 id=\"read_csv--user-以-csv-檔案匯入-users\" data-svelte-h=\"svelte-12luuvr\"><a href=\"#read_csv--user-以-csv-檔案匯入-users\">read_csv + user (以 CSV 檔案匯入 Users)</a></h3> <p><img src=\"https://hackmd.io/_uploads/BkP1mCQ_R.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"debug--msg-print-out-輸出文字\" data-svelte-h=\"svelte-1etic72\"><a href=\"#debug--msg-print-out-輸出文字\">debug + msg (print out) (輸出文字)</a></h3> <p><img src=\"https://hackmd.io/_uploads/SkEpPH2vC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">用 shell 指令 echo hostname 並輸出<code data-svelte-h=\"svelte-1xsfixj\">stdout</code>：標準輸出，一般暫存器無特殊後綴都會需要<img src=\"https://hackmd.io/_uploads/ByqmkU2PA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若無加 <code data-svelte-h=\"svelte-1xsfixj\">stdout</code>：<img src=\"https://hackmd.io/_uploads/SJnskI3vC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>特殊：<code data-svelte-h=\"svelte-1nk32my\">stat</code> 的暫存器可依據需要做判斷的資料型態調整後綴<img src=\"https://hackmd.io/_uploads/rkuq6r3DR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/S16YArnw0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"vars_prompt-輸入值\" data-svelte-h=\"svelte-srsx2d\"><a href=\"#vars_prompt-輸入值\">vars_prompt (輸入值)</a></h3> <p>Official Document Example:<img src=\"https://hackmd.io/_uploads/SyEaA7NOR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"easy-rsa-ca-tool\" data-svelte-h=\"svelte-l1mkp0\"><a href=\"#easy-rsa-ca-tool\">Easy-RSA (CA Tool)</a></h2> <p data-svelte-h=\"svelte-94c93z\">Easy-RSA 是 OpenVPN 的自簽根憑證及簽證工具安裝指令：<code>apt install openvpn easy-rsa</code>Easy-RSA 的預設路徑在<code>/usr/share/easy-rsa</code>，可移動到 <code>/etc/openvpn/easy-rsa</code></p> <h3 id=\"自簽-root-ca\" data-svelte-h=\"svelte-1j07von\"><a href=\"#自簽-root-ca\">自簽 Root CA</a></h3> <p data-svelte-h=\"svelte-195swsl\">將當前工作路徑切換到 Easy-RSA 的路徑，便於作業<code>cd /etc/openvpn/easy-rsa</code>先初始化 Easy-RSA 給 Root CA 使用的 PKI<code>./easyrsa init-pki</code>編輯 Root CA 的 Profile，屆時會套用到生成的 Root CA 上<code>vim pki/vars</code>參數說明：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>set_var EASYRSA_DN：可選 org 或 cn_only，若選 cn_only 只會有 Common Name 的資料</div><div class='line'>set_var EASYRSA_REQ_COUNTRY：Country Name (國家)</div><div class='line'>set_var EASYRSA_REQ_PROVINCE：Province Name(省/州)</div><div class='line'>set_var EASYRSA_REQ_CITY：City (城市)</div><div class='line'>set_var EASYRSA_REQ_ORG：Organization (公司/組織)</div><div class='line'>set_var EASYRSA_REQ_EMAIL：Email (電子郵件)</div><div class='line'>set_var EASYRSA_REQ_OU：Organization Unit (組織單位/部門)</div><div class='line'>set_var EASYRSA_KEY_SIZE：金鑰位元數</div><div class='line'>set_var EASYRSA_REQ_DN：Common Name (一般 CA 為你要保護的網域名稱，Root CA 就當作為此憑證的名字)</div><div class='line'>set_var EASYRSA_DIGEST：使用的加密模型</div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-19gq906\">建立 Root CA ：<code>./easyrsa build-ca nopass</code> (<code>nopass</code>：不設定密碼)</p> <h3 id=\"簽署旗下的-request\" data-svelte-h=\"svelte-189xhpw\"><a href=\"#簽署旗下的-request\">簽署旗下的 Request</a></h3> <p data-svelte-h=\"svelte-1llqedg\">先導入請求到 Easy-RSA 內暫存：<code>./easyrsa import-req [request-file-path] [register-name]</code>簽證暫存的檔案：<code>./easyrsa sign_req [ca-type] [register-name]</code> <code>ca-type</code>：若作為服務或伺服器使用，值通常為 <code>server</code> 或 <code>ca</code> <strong>若使用 ca 模式就不會將 SAN 值寫入憑證</strong></p> <h2 id=\"openconnect-ssl-vpn-server-ocserv\" data-svelte-h=\"svelte-lysikq\"><a href=\"#openconnect-ssl-vpn-server-ocserv\">OpenConnect SSL VPN Server (ocserv)</a></h2> <p data-svelte-h=\"svelte-ohazwf\">反正就是比 OpenVPN 好用的 VPN Server (吧)，Client 通常會使用 AnyConnect 連結安裝指令：<code>apt install ocserv</code>編輯設定檔：<code>vim /etc/ocserv/ocserv.conf</code>參數說明：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>listen-port：TCP 監聽的介面的 IP 位址 (預設為全介面都監聽)</div><div class='line'>udp-listen-host：UDP 監聽的介面的 IP 位址 (預設為全介面都監聽)</div><div class='line'>tcp-port：TCP 接入 VPN 的監聽 Port</div><div class='line'>udp-port：UDP 接入 VPN 的監聽 Port</div><div class='line'>socket-file：用於進程的作業檔案的路徑 (若 VPN 出問題可將值換為 /run/ocserv.socket)</div><div class='line'>run-as-user：執行 ocserv 進程的使用者 (無須更改)</div><div class='line'>run-as-group：執行 ocserv 進程的群組 (無須更改)</div><div class='line'>server-cert：用於 VPN 憑證的路徑 (用與 Web Server 一樣的請求產生方式)</div><div class='line'>server-key：用於 VPN 憑證的私鑰的路徑</div><div class='line'>dh-params：密鑰交換協議檔案路徑 (需透過指令生成)</div><div class='line'>ca-cert：簽署 VPN 憑證的 CA 根憑證</div></code></div></pre><!-- HTML_TAG_END --> <h2 id=\"debian-加入-windows-server-ad-網域\" data-svelte-h=\"svelte-yn2q1o\"><a href=\"#debian-加入-windows-server-ad-網域\">Debian 加入 Windows Server AD 網域</a></h2> <p>安裝 realm 及加入網域的必要套件：<code data-svelte-h=\"svelte-btno2d\">apt install realmd ascli sssd sssd-tools samba-common-bin</code>可先搜尋網域是否有被偵測到：<code data-svelte-h=\"svelte-9oyzms\">realm discover [domain-name]</code> <img src=\"https://hackmd.io/_uploads/H1kCKFtwC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">加入網域：<code data-svelte-h=\"svelte-6adyt8\">realm join -v [domain-name]</code> <img src=\"https://hackmd.io/_uploads/rkJMqYFPR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-u383ll\">-v, --verbose</code> 表示會將指令的進度跟詳細作業列印出來</p> <h3 id=\"不使用完整網域使用者名稱並允許使用者登入\" data-svelte-h=\"svelte-1hyo51p\"><a href=\"#不使用完整網域使用者名稱並允許使用者登入\">不使用完整網域使用者名稱並允許使用者登入</a></h3> <p>編輯 <code data-svelte-h=\"svelte-4ftg8b\">/etc/sssd/sssd.conf</code>，將 <code data-svelte-h=\"svelte-11x877\">fallback_homedir</code> 值設為 <code data-svelte-h=\"svelte-ff00uh\">/home/%u</code>、<code data-svelte-h=\"svelte-wm929w\">use_fully_qualified_names</code> 值設為 <code data-svelte-h=\"svelte-1yqjz6r\">False</code>、<code data-svelte-h=\"svelte-f1jyb8\">access_provider</code> 值設為 <code data-svelte-h=\"svelte-1gk0qnu\">simple</code> <img src=\"https://hackmd.io/_uploads/B1N_E1X_C.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">存檔退出後，重啟服務：<code data-svelte-h=\"svelte-v8ubtb\">service sssd restart</code>若需要幫使用者建立家目錄 (home) 可輸入指令，將會在使用者登入後建立：<code data-svelte-h=\"svelte-1apsclq\">pam-auth-update --enable mkhomedir</code> <img src=\"https://hackmd.io/_uploads/ByXlvJ7uC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BJmHvkQdA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">如果沒有建立家目錄會顯示：<img src=\"https://hackmd.io/_uploads/ByC1_y7dR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"解壓縮-targz\" data-svelte-h=\"svelte-hler9o\"><a href=\"#解壓縮-targz\">解壓縮 tar.gz</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>tar zxf [path_of_source.tar.gz] [export_destination_folder_path]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"vlan-子介面\" data-svelte-h=\"svelte-g2g1wk\"><a href=\"#vlan-子介面\">VLAN 子介面</a></h2> <p>安裝 VLAN 套件：<code data-svelte-h=\"svelte-7ur38t\">apt install vlan</code>啟用 VLAN 功能：<code data-svelte-h=\"svelte-19b7nu2\">modprobe 8021q</code>編輯網卡介面設定檔：<code data-svelte-h=\"svelte-1tvkct9\">vim /etc/network/interfaces</code> <img src=\"https://hackmd.io/_uploads/B1QgxDfd0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <strong data-svelte-h=\"svelte-1s0unfe\">VLAN 介面名稱可以直接在設定檔編輯，無需在 rule 裡設定</strong> <code data-svelte-h=\"svelte-1rm6xbr\">vlan-raw-device</code>：表示這個 VLAN Interface 是從哪張網卡分出來的存檔後退出執行：<code data-svelte-h=\"svelte-14elun0\">service networking restart</code> <img src=\"https://hackmd.io/_uploads/SykueDMd0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"跨-vlan-使用-dhcp-server--dhcp-relay\" data-svelte-h=\"svelte-yvq2tv\"><a href=\"#跨-vlan-使用-dhcp-server--dhcp-relay\">跨 VLAN 使用 DHCP Server + DHCP Relay</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>VLAN 10：172.16.10.0/24</div><div class='line'>VLAN 20：172.16.20.0/24</div><div class='line'>設定 VLAN 20 的 DHCP Server (172.16.20.20) 要能提供 Dynamic IP 給 VLAN 10 的 Client</div><div class='line'>中間有台 Gateway 為 Trunk 介面，同時也是 DHCP Relay Agent</div></code></div></pre><!-- HTML_TAG_END --> <p>DHCP Server 端設定：<img src=\"https://hackmd.io/_uploads/rJg0lOfOR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">給兩個網段的 DHCP，一個自己 VLAN 網段，一個要發 IP 的其他 VLAN 網段，<strong data-svelte-h=\"svelte-9m9bf5\">但自己 VLAN 網段的部分不做任何設定</strong></p> <p>Gateway 對 DHCP Relay Agent 的設定<img src=\"https://hackmd.io/_uploads/H16pEOM_A.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>Client 動態取得 IP Address 後：<img src=\"https://hackmd.io/_uploads/SJzHSuMdA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"設定介面啟用或關閉時的行為\" data-svelte-h=\"svelte-2vypr6\"><a href=\"#設定介面啟用或關閉時的行為\">設定介面啟用或關閉時的行為</a></h2> <div class=\"overflow-x-auto mb-4\"><table class=\"table w-full\"><thead data-svelte-h=\"svelte-zjcp9j\"><tr><th>指令</th> <th>時機表示</th></tr></thead> <tbody data-svelte-h=\"svelte-mmc2h5\"><tr><td>pre-up</td> <td>介面啟用前</td></tr> <tr><td>up</td> <td>介面啟用時</td></tr> <tr><td>post-up</td> <td>介面啟用後</td></tr> <tr><td>pre-down</td> <td>介面關閉前</td></tr> <tr><td>down</td> <td>介面關閉時</td></tr> <tr><td>post-down</td> <td>介面關閉後</td></tr></tbody></table></div> <p data-svelte-h=\"svelte-19npn7w\">後面可以接要同時執行的指令</p> <p><img src=\"https://hackmd.io/_uploads/S10awuGuR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"strongswan-ipsec--ikev1v2\" data-svelte-h=\"svelte-17t48sg\"><a href=\"#strongswan-ipsec--ikev1v2\">StrongSwan (IPSec &amp; IKEv1、v2)</a></h2> <p>安裝套件：<code data-svelte-h=\"svelte-1bc6d5u\">apt install strongswan</code>編輯設定檔：<code data-svelte-h=\"svelte-es5g5u\">vim /etc/ipsec.conf</code> <img src=\"https://hackmd.io/_uploads/B11oChMuA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <code data-svelte-h=\"svelte-ubkgpk\">strictcrlpolicy</code>：驗證時是否對遠端的 SSL 憑證嚴格地檢查是否包含 CRL (通常為 <code data-svelte-h=\"svelte-13hb7sz\">no</code>)<code data-svelte-h=\"svelte-18vr0kj\">uniqueids</code>：用於控制多次連線 (通常為 <code data-svelte-h=\"svelte-13hb7sz\">no</code>)</p> <p data-svelte-h=\"svelte-xl5s3b\"><code>keyexchange</code>：要採用的 IKE 版本，依據你在 Cisco Router 端的設定或另一端 Linux 設定<code>left</code>：遠端裝置<code>right</code>：本地裝置<code>ike</code>：選擇的 IKE 加密演算法套件，分 3 個部分組成，用<code>-</code>連接，第一部分加密算法：3des，aes[encryption_bit] 等，第二部分認證算法：md5，sha1，sha256 等，第三部分 DH 算法：modp[hash_bits] 等<code>esp</code>：選擇的 ESP 加密演算法套件，分 3 個部分組成，用<code>-</code>連接，第一部分加密算法：3des，aes[encryption_bit] 等，第二部分認證算法：md5，sha1，sha256 等，第三部分 DH 算法：modp[hash_bits] 等<a href=\"https://docs.strongswan.org/docs/5.9/config/IKEv2CipherSuites.html\" rel=\"nofollow noopener noreferrer external\" target=\"_blank\">其他加密套件可參考官方 Document (IKEv2)</a></p> <h3 id=\"建立用於-ipsec-的-tunnel\" data-svelte-h=\"svelte-1okz82n\"><a href=\"#建立用於-ipsec-的-tunnel\">建立用於 IPSec 的 Tunnel</a></h3> <p>編輯網卡介面設定檔：<code data-svelte-h=\"svelte-1tvkct9\">vim /etc/network/interfaces</code> <img src=\"https://hackmd.io/_uploads/rkrrYlXuR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p data-svelte-h=\"svelte-13dgjvv\">新增 Tunnel 指令，需在介面啟用前添加，所以使用 <code>pre-up</code>：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>pre-up ip tunnel add [tunnel_name] mode gre remote [remote_ip] local [local_ip] ttl 255</div></code></div></pre><!-- HTML_TAG_END --> <p>其他兩則刪除指令可自行評估是否需要，可能會出現錯誤<img src=\"https://hackmd.io/_uploads/r1aN5eQOC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Cisco Router 端：<img src=\"https://hackmd.io/_uploads/HkePilXdR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BJwc9eQd0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">從中間 Router (ISP) 抓包，封包類型從 ICMP 變為 ESP，表示已經過加密：<img src=\"https://hackmd.io/_uploads/HyOboeXuA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"frrouting-frr\" data-svelte-h=\"svelte-1sehmt7\"><a href=\"#frrouting-frr\">FRRouting (FRR)</a></h2> <p>FRR 是一款路由工具，支援 BGP / OSPF / EIGRP / RIP 等常見協定安裝套件：<code data-svelte-h=\"svelte-j1ljko\">apt install frr</code>編輯：<code data-svelte-h=\"svelte-1s2tdw6\">vim /etc/frr/daemons</code>將需要的服務的值改為 <code data-svelte-h=\"svelte-19ypsff\">yes</code>，若有 Process Code 的需求，可使用 instances假設開啟 OSPF 的 Process Code 1，就是 <code data-svelte-h=\"svelte-13i6dcp\">ospfd_instances=1</code>註：若 OSPF 使用 Process Code 則無法宣告網段，僅可在介面裡宣告<img src=\"https://hackmd.io/_uploads/HJubEdmOR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">存檔退出後重啟服務：<code data-svelte-h=\"svelte-1gn7jbs\">service frr restart</code>使用指令進入 FRR：<code data-svelte-h=\"svelte-1grhrkw\">vtysh</code>，操作指令與 Cisco IOS 相似<img src=\"https://hackmd.io/_uploads/HJuMYqmdR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p>","image":"/debian.jpg","date_published":"2024-09-16T00:00:00.000Z","date_modified":"2024-09-16T00:00:00.000Z","tags":["Linux","OS"],"_indieweb":{"type":"article"}},{"id":"winsrv","url":"https://localhost:5173/winsrv","title":"Windows Server","content_html":"<h2 id=\"gpo-相關設定\" data-svelte-h=\"svelte-6z2xkb\"><a href=\"#gpo-相關設定\">GPO 相關設定</a></h2> <h3 id=\"初次登錄動畫關閉\" data-svelte-h=\"svelte-dhtil8\"><a href=\"#初次登錄動畫關閉\">初次登錄動畫關閉</a></h3> <p data-svelte-h=\"svelte-5hga6e\">打開 GPO，找到「<strong>Administrative Templates\\System\\Logon</strong>」中的「<strong>Show first sign-in animation</strong>」，設定為 <strong>Disable</strong>，再執行 <code>gpupdate /force</code>來立即套用更新</p> <h3 id=\"禁止存取控制台設定\" data-svelte-h=\"svelte-1xaqksb\"><a href=\"#禁止存取控制台設定\">禁止存取控制台設定</a></h3> <p>GPO -&gt; User Configuration -&gt; Policies -&gt; Administrative Templetes -&gt; Control Panel -&gt; 設定 Prohibit access to Control Panel and PC settings 為 <strong data-svelte-h=\"svelte-tra0oh\">Enabled</strong> <img src=\"https://hackmd.io/_uploads/HJi2R6hqh.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"限制或禁止使用者使用特定應用程式\" data-svelte-h=\"svelte-epwre2\"><a href=\"#限制或禁止使用者使用特定應用程式\">限制或禁止使用者使用特定應用程式</a></h3> <p>GPO -&gt; User Configuration -&gt; Administrative Templetes -&gt; System -&gt; 設定 Don’t run specified Windows applications<img src=\"https://hackmd.io/_uploads/Sy5jSED03.png\" alt=\"https://hackmd.io/_uploads/Sy5jSED03.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定為 <strong data-svelte-h=\"svelte-tra0oh\">Enabled</strong>，並點選 List of disallowed applications，在 Value 欄位設定要禁用的應用程式<img src=\"https://hackmd.io/_uploads/HkgS8Vw02.png\" alt=\"https://hackmd.io/_uploads/HkgS8Vw02.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"設定在-logon-ui-看不到上個登入的使用者\" data-svelte-h=\"svelte-lnk77j\"><a href=\"#設定在-logon-ui-看不到上個登入的使用者\">設定在 Logon UI 看不到上個登入的使用者</a></h3> <p>GPO -&gt; Computer Configuration -&gt; Policies -&gt; Administrative Templetes -&gt; System -&gt; Logon -&gt; 設定 Block user from showing account details on sign-in 為 <strong data-svelte-h=\"svelte-tra0oh\">Enabled</strong> <img src=\"https://hackmd.io/_uploads/rkMTCT2q2.png\" alt=\"https://hackmd.io/_uploads/rkMTCT2q2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"登入時自動掛載共享資料夾\" data-svelte-h=\"svelte-12i782l\"><a href=\"#登入時自動掛載共享資料夾\">登入時自動掛載共享資料夾</a></h3> <p data-svelte-h=\"svelte-924v4l\">Step 1. 製作 Bash Script</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 掛載 \\windc.nsc49.skills.twweb 網路位置到電腦，且磁碟代號為 W:net use W: /deletenet use W: \\windc.nsc49.skills.twweb</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>Step 2. 用 GPO 設定讓此指令在登入時自動執行新增 GPO -&gt; User Configuration -&gt; Policies -&gt; Windows Settings -&gt; Script (Logon/Logoff) -&gt; Logon -&gt; Add -&gt; Browse -&gt; 將 Script 丟至彈出的資料夾 -&gt; 選擇後點選 OK<img src=\"https://hackmd.io/_uploads/rkd1JRhq2.png\" alt=\"https://hackmd.io/_uploads/rkd1JRhq2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/ryScekxjp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">註：最好放在下面「Show Files…」的資料夾內，否則有機率腳本會無法生效</p> <h3 id=\"若共享資料夾有跨網域\" data-svelte-h=\"svelte-lz2frv\"><a href=\"#若共享資料夾有跨網域\">若共享資料夾有跨網域</a></h3> <p data-svelte-h=\"svelte-1e9k50f\">只需讓 Script 使用網域管理員身分登入即可：</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 掛載 \\windc.nsc49.skills.twweb 網路位置到電腦，且磁碟代號為 W:，使用 AD/Administrator 身分來登入net use W: /deletenet use W: \\windc.nsc49.skills.twweb /user:ADAdministrator Skills39 /p:yes</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id=\"讓-windows-server-也能掛載-debian-smbd\" data-svelte-h=\"svelte-k62u4a\"><a href=\"#讓-windows-server-也能掛載-debian-smbd\">讓 Windows Server 也能掛載 Debian SMBD</a></h3> <p>Local GPO -&gt; Computer Configuration -&gt; Administrative Templates -&gt; Network -&gt; Lanman Workstation -&gt; 設定 Enable insecure guest logons 為 <strong data-svelte-h=\"svelte-tra0oh\">Enabled</strong> <img src=\"https://hackmd.io/_uploads/rynWy0n92.png\" alt=\"https://hackmd.io/_uploads/rynWy0n92.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"gpo-個別使用者套用規則\" data-svelte-h=\"svelte-19caf4p\"><a href=\"#gpo-個別使用者套用規則\">GPO 個別使用者套用規則</a></h3> <p>若要指定特別使用者套用 Group Policy (刪除 Authentication Users)，至少要保留一台 Computer (最好是 Server 和 Client 都保留)<img src=\"https://hackmd.io/_uploads/SJMjm3FRT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"開機時自動跳出訊息\" data-svelte-h=\"svelte-hofbxf\"><a href=\"#開機時自動跳出訊息\">開機時自動跳出訊息</a></h3> <p>GPO -&gt; Computer Configuration -&gt; Windows Settings -&gt; Security Settings -&gt; Local Policy -&gt; Security Options<img src=\"https://hackmd.io/_uploads/r15ckli0T.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SyCi61j0T.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/H1zjyeiRa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">當電腦準備登入時會顯示：<img src=\"https://hackmd.io/_uploads/S1MRyejRp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"禁止使用-windows-update\" data-svelte-h=\"svelte-1bqfzki\"><a href=\"#禁止使用-windows-update\">禁止使用 Windows Update</a></h3> <p>GPO -&gt; Computer Configuration -&gt; Administrative Templates -&gt; Windows Components -&gt; Windows Update -&gt; 設定 Remove access to use all Windows Update features 為 <strong data-svelte-h=\"svelte-tra0oh\">Enabled</strong> <img src=\"https://hackmd.io/_uploads/BJ7flZjC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">效果：<img src=\"https://hackmd.io/_uploads/SJl3gGbsR6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"登入時自動將檔案複製到桌面\" data-svelte-h=\"svelte-1pm9i5y\"><a href=\"#登入時自動將檔案複製到桌面\">登入時自動將檔案複製到桌面</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 將 PuTTY 複製到使用者的桌面上copy C:putty.exe %USERPROFILE%Desktop// %USERPROFILE% 指的是當前登入使用者的 User 目錄</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-15ocirl\">寫好後將檔案另存為 cmd，可參照上面的步驟套用於 GPO</p> <h3 id=\"用指令載入登錄檔\" data-svelte-h=\"svelte-eeh9bo\"><a href=\"#用指令載入登錄檔\">用指令載入登錄檔</a></h3> <p>將登錄機碼匯出為 <code data-svelte-h=\"svelte-1f6dfg\">.reg</code> 格式的檔案：右鍵 -&gt; Export -&gt; 選擇路徑<img src=\"https://hackmd.io/_uploads/H1HquOl1C.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>reg import [reg_file].reg</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1rf15va\">另存為 cmd，一樣可以套用於 GPO</p> <h2 id=\"dns\" data-svelte-h=\"svelte-1ygr0y3\"><a href=\"#dns\">DNS</a></h2> <h3 id=\"dns-快取紀錄關閉\" data-svelte-h=\"svelte-1ipv3j1\"><a href=\"#dns-快取紀錄關閉\">DNS 快取紀錄關閉</a></h3> <p data-svelte-h=\"svelte-1oz3ht5\">按一下 Windows Key + R，輸入 regedit 後 Enter設定「<strong>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Dnscache</strong>」中的 <strong>Start</strong> 值為 4，重啟後即可關閉 DNS 快取紀錄</p> <h3 id=\"dns-同步\" data-svelte-h=\"svelte-ayfpyk\"><a href=\"#dns-同步\">DNS 同步</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>DC：192.168.39.10 (Primary DNS)</div><div class='line'>SRV：192.168.39.20 (Secondary DNS)</div></code></div></pre><!-- HTML_TAG_END --> <p>先允許 Primary DNS 跟 Secondary DNS 的 Zone Transfer 功能DC：<img src=\"https://hackmd.io/_uploads/r1KPerlC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">SRV：<img src=\"https://hackmd.io/_uploads/SyOQWHgRp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇域名按右鍵 -&gt; Transfer new copy of zone from Master<img src=\"https://hackmd.io/_uploads/r1rqWSgRp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">即可完成同步</p> <p data-svelte-h=\"svelte-11bnbis\">若要設定自動同步項可以看下方的 SOA</p> <h4 id=\"通知-notify\" data-svelte-h=\"svelte-zysikv\"><a href=\"#通知-notify\">通知 (Notify)</a></h4> <p>在 Primary DNS 上設定當記錄發生變化時通知 Secondary DNS<img src=\"https://hackmd.io/_uploads/SJ3xUBlAT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定 Secondary DNS 可以接收 Notify<img src=\"https://hackmd.io/_uploads/B10Uvrg0p.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h4 id=\"start-of-authority-record-soa\" data-svelte-h=\"svelte-1pq0ti3\"><a href=\"#start-of-authority-record-soa\">Start of Authority Record (SOA)</a></h4> <p><img src=\"https://hackmd.io/_uploads/rkkD_HxAT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Refresh interval：Secondary DNS 多久向 Primary DNS 伺服器同步Retry interval：當 Secondary DNS 向 Primary DNS 同步但無法連線到 Primary DNS，多久後重試Expires after：當 Secondary DNS 無法連線到 Primary DNS 會一直重試，如果重試超過到期時間就放棄重試Minimum TTL：當其它 DNS 伺服器查詢這個網域的記錄時，資料儲存在對方伺服器快取中的時間 (若在到期前若對方伺服器又收到相同查詢就會直接回應快取中的資料)</p> <h3 id=\"conditional-forwarders\" data-svelte-h=\"svelte-ofr1m5\"><a href=\"#conditional-forwarders\">Conditional Forwarders</a></h3> <p>與 Forward 功能相似，但是可以指定網域傳送到指定伺服器<img src=\"https://hackmd.io/_uploads/S13rUWy_A.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rJTtLWJu0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">DNS Domain：當收到這個網域的 DNS Request 時送到指定的 DNS ServersIP addresses of the master servers：指定網域的 DNS Servers</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>本地 DNS：wsc2024.tw / 172.16.20.10</div><div class='line'>遠端 DNS：worldskills.org / 8.8.8.8</div></code></div></pre><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ByeFwZkO0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/B1uqDZkuA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"使用者設定-cmd--for-loop\" data-svelte-h=\"svelte-i385jf\"><a href=\"#使用者設定-cmd--for-loop\">使用者設定 (cmd &amp; for loop)</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>//加入九個使用者，名稱為 IT01~IT09for /l %a in (1 1 9) do net user IT0%a /add//加入九個使用者，名稱為 HQ01~HQ09，密碼為 Skills39for /l %a in (1 1 9) do net user HQ0%a Skills39 /add//刪除使用者net user [username] /del</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"進階使用者設定-powershell--for-loop\" data-svelte-h=\"svelte-gtdgk0\"><a href=\"#進階使用者設定-powershell--for-loop\">進階使用者設定 (PowerShell &amp; for loop)</a></h2> <h3 id=\"set-aduser\" data-svelte-h=\"svelte-4np15j\"><a href=\"#set-aduser\">Set-ADUser</a></h3> <p data-svelte-h=\"svelte-1jmolw9\">通常是使用者的細項資料設定才會用到</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>//將 FA001~009 九個使用者的 Display Name 設定為 Flight Attendant 001~0091..9 | % &#123; Set-ADUser -Identity FA00$_ -DisplayName \"Flight Attendant 00$_\" &#125;// \"$_\" 是一個特殊的 PowerShell 自動變數，代表執行中的腳本或指令所傳遞過來的變數</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/By0zKd-NA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>若忘記指令也可透過 PowerShell IDE 尋找指令<img src=\"https://hackmd.io/_uploads/HyFtKuZEA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"dsmod\" data-svelte-h=\"svelte-12dfwjr\"><a href=\"#dsmod\">dsmod</a></h3> <p data-svelte-h=\"svelte-1rk2d4\">dsmod 與 Set-ADUser 的功能相同先使用 <code>dsquery</code> 指令列出所有的完整使用者名稱 (包含所屬網域等參數)，在使用 <code>dsmod</code> 指令時需要</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>dsquery user// 列出所有使用者完整名稱</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/ryT_7DHO0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>dsmod user /?// 可查看所有 dsmod 可修改的參數及表示方式</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>dsmod user [full_user_name] -office \"IT Manager\"// 將使用者的 Office 參數改為 IT Manager</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/Sy5WNDrO0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BkozEwHOA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"群組設定-cmd--for-loop\" data-svelte-h=\"svelte-927kq7\"><a href=\"#群組設定-cmd--for-loop\">群組設定 (cmd &amp; for loop)</a></h2> <p data-svelte-h=\"svelte-12obcyg\">通常僅會在 Windows Server 題目中沒有要求做 Active Directory 時才會用到</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>//新增群組net localgroup [groupname] /add//將 IT01~09 共九人加入 IT 群組for /l %a in (1 1 9) do net localgroup IT IT0%a /add//將使用者移出群組net localgroup [groupname] [username] /del//重新命名群組wmic group where name=\"[oldname]\" rename [newname]//檢查群組內的使用者net localgroup [groupname]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-1sf15ix\">PS：若群組名稱或使用者名稱有空格，需要用雙引號(&quot;&quot;)括起來</p> <h3 id=\"一次允許多個可使用遠端桌面的使用者\" data-svelte-h=\"svelte-1pnrob9\"><a href=\"#一次允許多個可使用遠端桌面的使用者\">一次允許多個可使用遠端桌面的使用者</a></h3> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>//將 IT01~09 共九人允許使用遠端桌面連線for /l %a in (1 1 9) do net localgroup \"Remote Desktop Users\" IT0%a /add</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"允許-icmp-協議\" data-svelte-h=\"svelte-jb9b1l\"><a href=\"#允許-icmp-協議\">允許 ICMP 協議</a></h2> <p>進入 Control Panel -&gt; Windows Defender Firewall -&gt; Advenced settings<img src=\"https://hackmd.io/_uploads/r1s-A6n5n.png\" alt=\"https://hackmd.io/_uploads/r1s-A6n5n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選 Inbound rules -&gt; New Rule<img src=\"https://hackmd.io/_uploads/HJnfR63qh.png\" alt=\"https://hackmd.io/_uploads/HJnfR63qh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/HyVQAa252.png\" alt=\"https://hackmd.io/_uploads/HyVQAa252.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/S1hQ0ph92.png\" alt=\"https://hackmd.io/_uploads/S1hQ0ph92.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SyQE0a352.png\" alt=\"https://hackmd.io/_uploads/SyQE0a352.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 ICMP：<img src=\"https://hackmd.io/_uploads/By64063q3.png\" alt=\"https://hackmd.io/_uploads/By64063q3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/B1SBAah9n.png\" alt=\"https://hackmd.io/_uploads/B1SBAah9n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BkvUATnch.png\" alt=\"https://hackmd.io/_uploads/BkvUATnch.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/S1zwC6nqn.png\" alt=\"https://hackmd.io/_uploads/S1zwC6nqn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">即完成 ICMP 設定<img src=\"https://hackmd.io/_uploads/SkSuCT3c2.png\" alt=\"https://hackmd.io/_uploads/SkSuCT3c2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"讓網域內電腦自動信任-ca-憑證\" data-svelte-h=\"svelte-1hgj8bt\"><a href=\"#讓網域內電腦自動信任-ca-憑證\">讓網域內電腦自動信任 CA 憑證</a></h2> <h3 id=\"允許自動信任設定\" data-svelte-h=\"svelte-1bn527i\"><a href=\"#允許自動信任設定\">允許自動信任設定</a></h3> <p>打開 Group Policy Management -&gt; Create a GPO in this domain, and Link it here<img src=\"https://hackmd.io/_uploads/HkxKAa2cn.png\" alt=\"https://hackmd.io/_uploads/HkxKAa2cn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Computer Configuration -&gt; Policies -&gt; Windows Settings -&gt; Security Settings -&gt; Public Keys -&gt; Certificate Services Client - Auto-Enrollmemt設定 Configuration Model 為 <strong data-svelte-h=\"svelte-tra0oh\">Enabled</strong> <img src=\"https://hackmd.io/_uploads/SJcKApn93.png\" alt=\"https://hackmd.io/_uploads/SJcKApn93.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"設定自動信任的電腦\" data-svelte-h=\"svelte-12ij8jf\"><a href=\"#設定自動信任的電腦\">設定自動信任的電腦</a></h3> <p>選擇 Automatic Certification Settings右鍵 -&gt; New -&gt; Automatic Certificate Request<img src=\"https://hackmd.io/_uploads/BylcRah93.png\" alt=\"https://hackmd.io/_uploads/BylcRah93.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Computer<img src=\"https://hackmd.io/_uploads/BJ550p35h.png\" alt=\"https://hackmd.io/_uploads/BJ550p35h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/H1LoC625n.png\" alt=\"https://hackmd.io/_uploads/H1LoC625n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/r1b2R6hq3.png\" alt=\"https://hackmd.io/_uploads/r1b2R6hq3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">輸入 <code data-svelte-h=\"svelte-1fy3f7c\">gpupdate /force</code> 後，即完成設定<img src=\"https://hackmd.io/_uploads/Hkh16KO2h.png\" alt=\"https://hackmd.io/_uploads/Hkh16KO2h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"共享資料夾管理-file-server-resource-manager\" data-svelte-h=\"svelte-k1pf10\"><a href=\"#共享資料夾管理-file-server-resource-manager\">共享資料夾管理 (File Server Resource Manager)</a></h2> <p>安裝 File Server Resource Manager<img src=\"https://hackmd.io/_uploads/HJn7SZjnp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"限制共享資料夾空間\" data-svelte-h=\"svelte-ch0v1b\"><a href=\"#限制共享資料夾空間\">限制共享資料夾空間</a></h3> <p>選擇 Quota Management -&gt; Quotas<img src=\"https://hackmd.io/_uploads/BkJdH-snp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">右鍵 Create Quota<img src=\"https://hackmd.io/_uploads/ByeZkR2c2.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選好要套用的共享資料夾，如果在系統給的選項內沒有題目的條件就用 Custom Properties<img src=\"https://hackmd.io/_uploads/HkiIUbihp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"限制共享資料夾存放檔案類型\" data-svelte-h=\"svelte-5xvxel\"><a href=\"#限制共享資料夾存放檔案類型\">限制共享資料夾存放檔案類型</a></h3> <p><strong data-svelte-h=\"svelte-p7pb6r\">Step 1. 建立檔案類型群組</strong>選擇 File Screening Management -&gt; File Groups<img src=\"https://hackmd.io/_uploads/B1sspZo3a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">右鍵 Create File Group<img src=\"https://hackmd.io/_uploads/HJUj0Wsn6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">將此群組包含的檔案類型都加到 Files to include 內 (註：＊.exe 代表封鎖全部附檔名為 exe 的檔案)<img src=\"https://hackmd.io/_uploads/H1KZRZohT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p><strong data-svelte-h=\"svelte-1ikqcpl\">Step 2. 建立禁止檔案類型範本</strong>選擇 File Screening Management -&gt; File Screen Templates<img src=\"https://hackmd.io/_uploads/S1K2hWona.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">右鍵 Create File Screen Template<img src=\"https://hackmd.io/_uploads/B1Eiyfona.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <strong data-svelte-h=\"svelte-36j3yp\">若顯示錯誤，將虛擬機重開就可解決</strong> <img src=\"https://hackmd.io/_uploads/ByN_pbs3T.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p><strong data-svelte-h=\"svelte-18l87u8\">Step 3. 套用範本到共享資料夾</strong>選擇 File Screening Management -&gt; File Screens<img src=\"https://hackmd.io/_uploads/rk0p_-j2a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">右鍵 Create File Screen<img src=\"https://hackmd.io/_uploads/SklXxzj36.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選好要套用的共享資料夾，並將選項選到剛剛設定的範本<img src=\"https://hackmd.io/_uploads/SJGceMoha.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"快速啟動網路介面控制\" data-svelte-h=\"svelte-1tjaib9\"><a href=\"#快速啟動網路介面控制\">快速啟動網路介面控制</a></h2> <p>按一下 Windows Key + R，輸入 ncpa.cpl 後 Enter<img src=\"https://hackmd.io/_uploads/HkXDvaLL2.png\" alt=\"https://hackmd.io/_uploads/HkXDvaLL2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">可直接打開控制台網路介面<img src=\"https://hackmd.io/_uploads/Hkd38pU8n.png\" alt=\"https://hackmd.io/_uploads/Hkd38pU8n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"更改-remote-desktop-的-tcp-port-登錄檔修改\" data-svelte-h=\"svelte-fuiknc\"><a href=\"#更改-remote-desktop-的-tcp-port-登錄檔修改\">更改 Remote Desktop 的 TCP Port (登錄檔修改)</a></h2> <p>按一下 Windows Key + R，輸入 regedit 後 Enter在「<strong data-svelte-h=\"svelte-1f1gqr1\">HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</strong>」下，找到「<strong data-svelte-h=\"svelte-ldgmsq\">PortNumber</strong>」選項並編輯其機碼值為欲設定的 Port 後重啟即可<img src=\"https://hackmd.io/_uploads/HJckBqzF3.png\" alt=\"https://hackmd.io/_uploads/HJckBqzF3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"dhcp-server-位址保留\" data-svelte-h=\"svelte-19cxttp\"><a href=\"#dhcp-server-位址保留\">DHCP Server 位址保留</a></h2> <p>打開 DHCP -&gt; 選擇要設定的 Scope -&gt; Reservations -&gt; New Reservation<img src=\"https://hackmd.io/_uploads/S1EOa9qtn.png\" alt=\"https://hackmd.io/_uploads/S1EOa9qtn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Reservation name (此保留設定的名稱)IP address (欲保留的 IP 位址)MAC address (保留的 IP 要給誰)Description (描述此保留設定，可略過)<img src=\"https://hackmd.io/_uploads/H1BNR9qtn.png\" alt=\"https://hackmd.io/_uploads/H1BNR9qtn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定好後，到被保留 IP 的電腦上執行 <code data-svelte-h=\"svelte-pv0nhz\">ipconfig /renew</code> (電腦網卡須設定為 DHCP)<img src=\"https://hackmd.io/_uploads/B1yiJi9Y3.png\" alt=\"https://hackmd.io/_uploads/B1yiJi9Y3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"vpn-設定\" data-svelte-h=\"svelte-1i017zr\"><a href=\"#vpn-設定\">VPN 設定</a></h2> <p>新增 VPN 規則，選擇 DirectAccess and VPN (RAS)<img src=\"https://hackmd.io/_uploads/BkaBU3Ps3.png\" alt=\"https://hackmd.io/_uploads/BkaBU3Ps3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">重啟後點選 Remote Access Management Console 後再選 RRAS Management console<img src=\"https://hackmd.io/_uploads/Sk6283Doh.png\" alt=\"https://hackmd.io/_uploads/Sk6283Doh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇伺服器，右鍵選擇 Configure and Enable Routing and Remote Access<img src=\"https://hackmd.io/_uploads/r1CKRvn32.png\" alt=\"https://hackmd.io/_uploads/r1CKRvn32.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Custom configuration<img src=\"https://hackmd.io/_uploads/Hk4b1u32n.png\" alt=\"https://hackmd.io/_uploads/Hk4b1u32n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 VPN Access 即可<img src=\"https://hackmd.io/_uploads/HJKFkO333.png\" alt=\"https://hackmd.io/_uploads/HJKFkO333.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若無設定 DHCP：設定 VPN 的 Static address pool，並輸入範圍可使用 VPN 的 IP 範圍<img src=\"https://hackmd.io/_uploads/rymwDnwih.png\" alt=\"https://hackmd.io/_uploads/rymwDnwih.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">(若有設定 DHCP 可直接略過到下一步驟)回到 Server Manager，選 Tools -&gt; Active Directory Users and Computers<img src=\"https://hackmd.io/_uploads/SkhOg5_32.png\" alt=\"https://hackmd.io/_uploads/SkhOg5_32.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選取想要遠端存取的使用者，並右鍵選擇「Add to a group…」<img src=\"https://hackmd.io/_uploads/HJJcG9dnh.png\" alt=\"https://hackmd.io/_uploads/HJJcG9dnh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">輸入 Remote 後選擇 Check Names<img src=\"https://hackmd.io/_uploads/HJEpX5uhn.png\" alt=\"https://hackmd.io/_uploads/HJEpX5uhn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Remote Desktop Users 後，按 OK<img src=\"https://hackmd.io/_uploads/Hki8Ncu2h.png\" alt=\"https://hackmd.io/_uploads/Hki8Ncu2h.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Network Policy Server<img src=\"https://hackmd.io/_uploads/BJDHD_323.png\" alt=\"https://hackmd.io/_uploads/BJDHD_323.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">點開 Policies -&gt; Network Policies -&gt; New<img src=\"https://hackmd.io/_uploads/rJ3fu_nh2.png\" alt=\"https://hackmd.io/_uploads/rJ3fu_nh2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rJlxvs2nh.png\" alt=\"https://hackmd.io/_uploads/rJlxvs2nh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">設定後在 Client 端上可輸入在群組內使用者的帳號和密碼登入 VPN若遇到登入失敗的問題或一直卡在連線中：一樣到 Network Policy Server<img src=\"https://hackmd.io/_uploads/H1oKHvx1a.png\" alt=\"https://hackmd.io/_uploads/H1oKHvx1a.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇剛剛建立的規則，按右鍵 -&gt; Properties<img src=\"https://hackmd.io/_uploads/HJodMwxJa.png\" alt=\"https://hackmd.io/_uploads/HJodMwxJa.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Constraints -&gt; Authentication Methods -&gt; Add… -&gt; 選 Microsoft: Secured password (EAP-MSCHAP v2) -&gt; OK<img src=\"https://hackmd.io/_uploads/SJxzrwx16.png\" alt=\"https://hackmd.io/_uploads/SJxzrwx16.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SJ-HIvlyT.png\" alt=\"https://hackmd.io/_uploads/SJ-HIvlyT.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"sstp-設定\" data-svelte-h=\"svelte-9cxdp3\"><a href=\"#sstp-設定\">SSTP 設定</a></h3> <h4 id=\"有-web-server--https\" data-svelte-h=\"svelte-1tqhik2\"><a href=\"#有-web-server--https\">有 Web Server + HTTPS</a></h4> <p>如果有 Web Server，SSTP 所使用的憑證需要和 Web Server 一樣故要簽一張萬用域名(*)的憑證 (若 Web Server 和 SSTP 的 FQDN 不一樣的話)<img src=\"https://hackmd.io/_uploads/r1wZT0kD0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">簽好後到 Server Manager -&gt; Tools -&gt; Routing and Remote Access<img src=\"https://hackmd.io/_uploads/HyV4fJew0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Server -&gt; 右鍵 -&gt; Properties<img src=\"https://hackmd.io/_uploads/HyQXZyxDA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/B1f0jJlwR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>先設定 CA Server 的 Certificate Templates</div><div class='line'>MMC -&gt; Certificate Templates -&gt; IPSec -&gt; 右鍵 Duplicate Template</div><div class='line'>![image](https://hackmd.io/_uploads/SJ0plU-S0.png)</div><div class='line'>Request Handling -&gt; 勾選 Allow private key to be exported</div><div class='line'>![image](https://hackmd.io/_uploads/HJWMZ8bHR.png)</div><div class='line'>Subject Name -&gt; 選擇 Supply in the request</div><div class='line'>![image](https://hackmd.io/_uploads/Sy93-8-B0.png)</div><div class='line'>Extensions Application -&gt; Edit...</div><div class='line'>![image](https://hackmd.io/_uploads/rk9eGUbHR.png)</div><div class='line'>Add... -&gt; Server Authentication</div><div class='line'>![image](https://hackmd.io/_uploads/r1xVfL-rC.png)![image](https://hackmd.io/_uploads/SyD8GUWSA.png)</div><div class='line'>Certificate Templates 設定完成</div></code></div></pre><!-- HTML_TAG_END --> <h3 id=\"radius-驗證伺服器\" data-svelte-h=\"svelte-u4b2z\"><a href=\"#radius-驗證伺服器\">RADIUS 驗證伺服器</a></h3> <p>若題目有要求用 AD 使用者帳號驗證，但 VPN 不是安裝在 Domain Contoller 上的時候就會需要 RADIUS在 Domain Controller 上先安裝 Network Policy and Access Services<img src=\"https://hackmd.io/_uploads/HyZMWglPC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">安裝後 -&gt; 點選 Tools -&gt; Network Policy Server -&gt; NPS (Local)確認選項是 VPN Connections 後，點選 Configure VPN or Dial-Up<img src=\"https://hackmd.io/_uploads/HyF2QegvC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Virtual Private Network (VPN) Connections<img src=\"https://hackmd.io/_uploads/BkC-4xlDR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Next -&gt; Add…<img src=\"https://hackmd.io/_uploads/BkzfBgxw0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">將被驗證方的資料輸入完後按 Verify…<img src=\"https://hackmd.io/_uploads/HyAozexDR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">再按 Resolve，系統會確定 Client 端是否在線，若在線下面的 IP address 會顯示<img src=\"https://hackmd.io/_uploads/ByKLSlew0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">將三個選項都確認無誤後再下一步<img src=\"https://hackmd.io/_uploads/BJYGUeewC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">接著設定可以使用 VPN 的群組<img src=\"https://hackmd.io/_uploads/SyIsLgeDR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">IP Fliter 可依需求設定，若無需設定直接 Next<img src=\"https://hackmd.io/_uploads/SygknxeDA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">僅勾選 Strongest encryption<img src=\"https://hackmd.io/_uploads/HJCGhelDR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Realm Name 可直接跳過<img src=\"https://hackmd.io/_uploads/rywFnlgv0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">RADIUS Server 端設定完成，轉到 Client 端Server Manager -&gt; Tools -&gt; Routing and Remote Access -&gt; 右鍵 Server -&gt; Properties -&gt; Security將 Authentication provider 和 Accounting provider 都設為 RADIUS Accounting -&gt; Configure…<img src=\"https://hackmd.io/_uploads/SkbAvQevC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">按 New…<img src=\"https://hackmd.io/_uploads/HkweuXeDA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Server name 輸入 Server 端的 IP Address，Shared secret 輸入在 Server 端設定好的密碼，Accounting provider 的 Configure 也照樣設定<img src=\"https://hackmd.io/_uploads/BJqCdXewR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">按 OK 後就設定完成<img src=\"https://hackmd.io/_uploads/S10qtQlwA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"讓外部電腦信任根憑證-root-ca\" data-svelte-h=\"svelte-mskw9o\"><a href=\"#讓外部電腦信任根憑證-root-ca\">讓外部電腦信任根憑證 (Root CA)</a></h2> <p>在 Windows Server 端的操作：打開 MMC -&gt; 導入 Certificates -&gt; Computer Account -&gt; Local Computer<img src=\"https://hackmd.io/_uploads/SyfBYQ8Rh.png\" alt=\"https://hackmd.io/_uploads/SyfBYQ8Rh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Trusted Root Certificates Authorities -&gt; Certificates -&gt; 選擇要讓外部電腦驗證的根憑證 -&gt; 右鍵 All Tasks -&gt; Export…<img src=\"https://hackmd.io/_uploads/rkuU5QUC2.png\" alt=\"https://hackmd.io/_uploads/rkuU5QUC2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">檔案格式選 DER 或 Base-64 則一即可<img src=\"https://hackmd.io/_uploads/H1wKc78R2.png\" alt=\"https://hackmd.io/_uploads/H1wKc78R2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">在外部電腦端的操作：打開 MMC -&gt; 導入 Ceritficates -&gt; Computer Account -&gt; Local Computer -&gt; Trusted Root Certificates Authorities -&gt; Ceritficates -&gt; 右鍵 All Tasks -&gt; Import…<img src=\"https://hackmd.io/_uploads/H1Ppi7LR2.png\" alt=\"https://hackmd.io/_uploads/H1Ppi7LR2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選取剛剛自己導出的根憑證<img src=\"https://hackmd.io/_uploads/SkJYhXIC3.png\" alt=\"https://hackmd.io/_uploads/SkJYhXIC3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 Place all ceritificates in the following store，並確認憑證倉庫為「Trusted Root Certificates Authorities」<img src=\"https://hackmd.io/_uploads/B1Bq2XLRh.png\" alt=\"https://hackmd.io/_uploads/B1Bq2XLRh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">最後按下 Finish，即安裝完成根憑證，瀏覽內部網站時不會再跳出憑證錯誤等訊息<img src=\"https://hackmd.io/_uploads/Skbb6Q8C2.png\" alt=\"https://hackmd.io/_uploads/Skbb6Q8C2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"windows-11\" data-svelte-h=\"svelte-hu0015\"><a href=\"#windows-11\">Windows 11</a></h2> <h3 id=\"安裝跳過-tpmcpu-和-secure-boot-檢查\" data-svelte-h=\"svelte-1elydqn\"><a href=\"#安裝跳過-tpmcpu-和-secure-boot-檢查\">安裝跳過 TPM、CPU 和 Secure Boot 檢查</a></h3> <p><img src=\"https://hackmd.io/_uploads/HkhM2Fdh3.png\" alt=\"https://hackmd.io/_uploads/HkhM2Fdh3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">進入安裝介面後，按「Shift + F10」叫出 cmd，並輸入 regedit<img src=\"https://hackmd.io/_uploads/HJmEkuJn3.png\" alt=\"https://hackmd.io/_uploads/HJmEkuJn3.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">找到「<strong data-svelte-h=\"svelte-yg8poe\">Computer\\HKEY_LOCAL_MACHINE\\SYSTEM\\Setup</strong>」<img src=\"https://hackmd.io/_uploads/H1pi0Dknh.png\" alt=\"https://hackmd.io/_uploads/H1pi0Dknh.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">新增一個「LabConfig」機碼<img src=\"https://hackmd.io/_uploads/S1pkxdknn.png\" alt=\"https://hackmd.io/_uploads/S1pkxdknn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">在機碼內部新增三個 DWORD (32-bit) 值，分別為「<strong data-svelte-h=\"svelte-rt1hp5\">BypassTPMCheck</strong>」、「<strong data-svelte-h=\"svelte-rxzhlz\">BypassSecureBootCheck</strong>」、「<strong data-svelte-h=\"svelte-7cunve\">BypassCPUCheck</strong>」及「<strong data-svelte-h=\"svelte-1k34trc\">BypassRAMCheck</strong>」，並將值全部設定為 1<img src=\"https://hackmd.io/_uploads/H1wN_tOhn.png\" alt=\"https://hackmd.io/_uploads/H1wN_tOhn.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/HkbSOFd32.png\" alt=\"https://hackmd.io/_uploads/HkbSOFd32.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SyLSOt_h2.png\" alt=\"https://hackmd.io/_uploads/SyLSOt_h2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rJgjotu2n.png\" alt=\"https://hackmd.io/_uploads/rJgjotu2n.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">最後回上一步再進入安裝介面，即成功進入安裝介面<img src=\"https://hackmd.io/_uploads/BJ813FOn2.png\" alt=\"https://hackmd.io/_uploads/BJ813FOn2.png\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"organizational-unit-ou\" data-svelte-h=\"svelte-q8cz0z\"><a href=\"#organizational-unit-ou\">Organizational Unit (OU)</a></h2> <h3 id=\"新增\" data-svelte-h=\"svelte-hyguy8\"><a href=\"#新增\">新增</a></h3> <p>到 Active Directory Users and Computers -&gt; New -&gt; Organizational Unit<img src=\"https://hackmd.io/_uploads/SkxfW-zTp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"刪除\" data-svelte-h=\"svelte-16gpp74\"><a href=\"#刪除\">刪除</a></h3> <p>直接將 OU 刪除的話，會遇到這個錯誤：<img src=\"https://hackmd.io/_uploads/ryr1XZf6p.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若要刪除 OU 需先設定：Step 1. 將目標網域右鍵 -&gt; View -&gt; 點選 Advanced Features<img src=\"https://hackmd.io/_uploads/BkzAzbM6a.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Step 2. 到想要刪除的 OU 右鍵 -&gt; Properties -&gt; Object -&gt; 將 Project object from accidental deletion 取消勾選 -&gt; OK<img src=\"https://hackmd.io/_uploads/r1IKmWzaT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/BkxgubGTp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">刪除時就不會出現錯誤了</p> <h2 id=\"當-iis-有使用到網路資源的設定\" data-svelte-h=\"svelte-1czxb0u\"><a href=\"#當-iis-有使用到網路資源的設定\">當 IIS 有使用到網路資源的設定</a></h2> <p>不要使用掛載後的硬碟路徑，直接使用其網路路徑<img src=\"https://hackmd.io/_uploads/B1Wh72pap.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/r1uPE2aTT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"edge-group-policy-templates-admx-54-分區可能出\" data-svelte-h=\"svelte-7oo0vn\"><a href=\"#edge-group-policy-templates-admx-54-分區可能出\">Edge Group Policy Templates ADMX (54 分區可能出)</a></h2> <h3 id=\"安裝\" data-svelte-h=\"svelte-1mwadu8\"><a href=\"#安裝\">安裝</a></h3> <p>打開 <code data-svelte-h=\"svelte-suufxd\">MicrosoftEdgePolicyTemplates\\windows\\admx</code>將這三個檔案複製到 <code data-svelte-h=\"svelte-tcc0k4\">C:\\Windows\\PolicyDefinitions</code> <img src=\"https://hackmd.io/_uploads/B1csbpDCp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/Skawzaw0p.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">再回到 admx 資料夾，選擇當下系統的語系(若英文就是 en-US，中文就是 zh-TW，這裡的系統是 en-US)複製裡面全部的檔案到 <code data-svelte-h=\"svelte-mtg0qu\">C:\\Windows\\PolicyDefinitions\\en-US</code> <img src=\"https://hackmd.io/_uploads/r1Jd7TPA6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"套用更新\" data-svelte-h=\"svelte-1kh5iod\"><a href=\"#套用更新\">套用更新</a></h3> <p>執行指令 <code data-svelte-h=\"svelte-1fy3f7c\">gpupdate /force</code>，再開啟 <code data-svelte-h=\"svelte-hhbks\">gpedit.msc</code> 或 Group Policy Management，在 Computer Configuration -&gt; Administrative Templates 下即可看到四個新的與 Edge 相關的 Policy 設定<img src=\"https://hackmd.io/_uploads/BkqvHaPCp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rkxxC0DAp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">註：若 Client 端未安裝 ADMX 也可以套用規則</p> <h3 id=\"封鎖衝浪遊戲-surf-game\" data-svelte-h=\"svelte-og2ker\"><a href=\"#封鎖衝浪遊戲-surf-game\">封鎖衝浪遊戲 (Surf Game)</a></h3> <ul><li>Setting<img src=\"https://hackmd.io/_uploads/B1V1cL_Ra.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></li> <li>Effect<img src=\"https://hackmd.io/_uploads/Hy1cq8_CT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></li></ul> <h3 id=\"啟動首頁和新索引標籤頁面-startup-home-page-and-new-tab-page\" data-svelte-h=\"svelte-g9wrhy\"><a href=\"#啟動首頁和新索引標籤頁面-startup-home-page-and-new-tab-page\">啟動、首頁和新索引標籤頁面 (Startup, home page and new tab page)</a></h3> <ul><li>EN<img src=\"https://hackmd.io/_uploads/Bk-TBU_AT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></li> <li>ZH_TW<img src=\"https://hackmd.io/_uploads/HkihDUOCa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></li></ul> <h3 id=\"允許或拒絕網頁截取螢幕畫面-allow-or-deny-screen-capture\" data-svelte-h=\"svelte-1qtyf9r\"><a href=\"#允許或拒絕網頁截取螢幕畫面-allow-or-deny-screen-capture\">允許或拒絕網頁截取螢幕畫面 (Allow or deny screen capture)</a></h3> <p><img src=\"https://hackmd.io/_uploads/HymET8dRa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"拒絕存取特定網站-block-access-to-a-list-of-urls\" data-svelte-h=\"svelte-tlhvv4\"><a href=\"#拒絕存取特定網站-block-access-to-a-list-of-urls\">拒絕存取特定網站 (Block access to a list of URLs)</a></h3> <ul><li>Setting<img src=\"https://hackmd.io/_uploads/BkfMyvuAa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SJ1VyPdAT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></li> <li>Effect<img src=\"https://hackmd.io/_uploads/rk8U1w_Ca.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></li></ul> <h2 id=\"對單個使用者或群組做密碼限制-ad-ac\" data-svelte-h=\"svelte-1s5aqjk\"><a href=\"#對單個使用者或群組做密碼限制-ad-ac\">對單個使用者或群組做密碼限制 (AD AC)</a></h2> <p>打開 AD AC，到 domain (local) -&gt; System -&gt; Password Settings Container -&gt; 右鍵 Password Settings<img src=\"https://hackmd.io/_uploads/BJLgKWKCp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>創立一個至少需要輸入 8 個字的密碼規則</div></code></div></pre><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/H1YC5bFCp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">回到 Users -&gt; 選擇自己要套用設定的使用者或群組 -&gt; 右鍵 Properties -&gt; Password Settings -&gt; Assign…<img src=\"https://hackmd.io/_uploads/Hy1D2-YAp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選 Advenced…<img src=\"https://hackmd.io/_uploads/BkfepWtAa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選 Find Now -&gt; 選擇自己建立的規則<img src=\"https://hackmd.io/_uploads/B1ZXTZKCp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若新輸入的密碼不到 8 個字：<img src=\"https://hackmd.io/_uploads/SJFSAZtC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/rkKDRWtAT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若有至少 8 個字：<img src=\"https://hackmd.io/_uploads/HkeiRbt0p.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/B1kp0-YRa.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"遠端桌面服務-remote-desktop-service\" data-svelte-h=\"svelte-1oy4yin\"><a href=\"#遠端桌面服務-remote-desktop-service\">遠端桌面服務 (Remote Desktop Service)</a></h2> <p>安裝服務：<img src=\"https://hackmd.io/_uploads/HJLDgliR6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/ry_igeiCT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/ryc6xgjC6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">使用 Internet Explorer 可瀏覽其 RDWeb (在沒有 SSL 簽證的狀況下)：<img src=\"https://hackmd.io/_uploads/SkJB4giRp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/HktnHxsCp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">也可透過網域使用者直接遠端 Server：<img src=\"https://hackmd.io/_uploads/BJqYNxo0T.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/SJah4gjRp.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">若簽證了可使用 Edge 正常預覽：<img src=\"https://hackmd.io/_uploads/HkzMwxsR6.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"啟用-ip-forwarding-regedit\" data-svelte-h=\"svelte-1y6z8ga\"><a href=\"#啟用-ip-forwarding-regedit\">啟用 IP Forwarding (Regedit)</a></h2> <p>按一下 Windows Key + R，輸入 regedit 後 Enter設定「<strong data-svelte-h=\"svelte-1y8ohbs\">Computer\\HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\IPEnableRouter</strong>」為 1<img src=\"https://hackmd.io/_uploads/SJNNwq0AT.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"啟用-ntp-server-windows-server\" data-svelte-h=\"svelte-1jha5cb\"><a href=\"#啟用-ntp-server-windows-server\">啟用 NTP Server (Windows Server)</a></h2> <p data-svelte-h=\"svelte-kr75hh\">修改登錄檔，以下設定都是在目錄：「<strong>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\W32Time</strong>」做設定，故只補充其後段的位置</p> <ul data-svelte-h=\"svelte-prcz8d\"><li>設定為 NTP Server：<strong>「\\Parameters\\Type」</strong> 更改為 “NTP”</li> <li>啟動 NTP Server：「<strong>\\TimeProviders\\NtpServer\\Enabled</strong>」 更改為 “1”</li> <li>設定時間修正：「<strong>\\Config\\MaxPosPhaseCorrection</strong> 和 <strong>\\Config\\MaxNegPhaseCorrection</strong>」更改數值為 “1800” (十進位)用 cmd 重啟 Windows Time Service</li></ul> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>開啟 cmd.exenet stop w32time (停止 Service)net start w32time (啟用 Service)</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"次級憑證的簽證及安裝-sub-ca\" data-svelte-h=\"svelte-wp48zq\"><a href=\"#次級憑證的簽證及安裝-sub-ca\">次級憑證的簽證及安裝 (Sub CA)</a></h2> <p>先到已安裝 Main CA 的 Server，打開 Certification Authority -&gt; 點選 Server 後右鍵 Properties<img src=\"https://hackmd.io/_uploads/Sk4pHiuX0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">點選 Extensions -&gt; Select extension 選擇 CDP -&gt; 點選 http 開頭的項目 -&gt; 勾選第三跟第四個選項<img src=\"https://hackmd.io/_uploads/SJFFvsdXR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Select extension 換選擇 AIA -&gt; 點選 http 開頭的項目 -&gt; 勾選第一個選項 -&gt; 點擊 Apply<img src=\"https://hackmd.io/_uploads/ByfCDiOQA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>接著轉到需要安裝 Sub CA 的 Server，打開 Certification Authority -&gt; 點選 Server 後右鍵 All Tasks -&gt; Renew CA Certificate…<img src=\"https://hackmd.io/_uploads/rJWrKiumR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">確認 Computer Name 跟 Parent CA 都正確後，點擊 OK<img src=\"https://hackmd.io/_uploads/rylCtidQR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>回到 Main CA Server -&gt; Pending Requests -&gt; Issue 從 Sub CA 發起的請求<img src=\"https://hackmd.io/_uploads/SyRN5i_mR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">Issued Certidicates -&gt; 選擇剛剛 Issue 的 CA -&gt; Details -&gt; Copy to File…<img src=\"https://hackmd.io/_uploads/Sydp9s_QR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 DER encoded 的 X.509 -&gt; Next -&gt; 儲存於自己指定的位置 -&gt; 複製到 Sub CA Server<img src=\"https://hackmd.io/_uploads/rJfVojOQC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p>再回到 Sub CA Server，點選 Server 後右鍵 All Tasks -&gt; Install CA Certificate…<img src=\"https://hackmd.io/_uploads/HyXAijdm0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">右下角選擇 X.509 類型的 CA -&gt; 選擇剛剛簽好的 CA<img src=\"https://hackmd.io/_uploads/ByrOnjOXR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">安裝好後，Sub CA Server 圖標會有綠色勾勾，代表正常運作</p> <h3 id=\"error-the-revocation-function-was-unable-to-check-revocation-because-the-revocation-server-was-offline\" data-svelte-h=\"svelte-1k9tv90\"><a href=\"#error-the-revocation-function-was-unable-to-check-revocation-because-the-revocation-server-was-offline\">error: The revocation function was unable to check revocation because the revocation server was offline</a></h3> <p><img src=\"https://learn-attachment.microsoft.com/api/attachments/7a610d77-a91c-4fdd-b852-8997ea966c54?platform=QnA\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">此錯誤為無法從 Root CA 的 CRL 發布點下載撤銷憑證名單，可先嘗試透過在 hosts 內增加對 Root CA Server 的記錄 (可能需要執行 <code data-svelte-h=\"svelte-14xu26v\">ipconfig /flushdns</code> 保證系統會透過 hosts 內的記錄找尋)<img src=\"https://hackmd.io/_uploads/By5GaH-rR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <p data-svelte-h=\"svelte-vx6mvu\">若錯誤還在，也可透過 PowerShell 指令直接停用 CRL 檢查及下載</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>certutil -setreg caCRLFlags +CRLF_REVCHECK_IGNORE_OFFLINE</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id=\"透過-powershell-建立-raid\" data-svelte-h=\"svelte-63oksh\"><a href=\"#透過-powershell-建立-raid\">透過 PowerShell 建立 RAID</a></h2> <h3 id=\"建立-storage-pool\" data-svelte-h=\"svelte-1440nko\"><a href=\"#建立-storage-pool\">建立 Storage Pool</a></h3> <p>打開 Server Manager -&gt; File and Storage Services -&gt; Storage Pools -&gt; 右鍵 -&gt; New Storage Pool…<img src=\"https://hackmd.io/_uploads/ryntCEjXC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"建立-raid-磁區\" data-svelte-h=\"svelte-1uwjf7o\"><a href=\"#建立-raid-磁區\">建立 RAID 磁區</a></h3> <p><img src=\"https://hackmd.io/_uploads/H14eRVjXA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>// 假設已建立好 Storage Pool \"SRVDisk\" (上圖)// 新增三個磁碟，將其設為其中一個磁碟損壞後仍可持續運作的模式，並以 40GB 左右的空間提供於 E:/PowerShell 指令：New-VirtualDisk -StoragePoolFriendlyName SRVDisk -FriendlyName SRVDisk -Size 40GB -ResiliencySettingName \"Parity\"</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <!-- HTML_TAG_START --><pre class=\"shiki material-default\"><div class='code-container'><code><div class='line'>ResiliencySettingName 參數解釋：</div><div class='line'>Simple：依建立的磁碟大小，就佔多大的空間，相當於RAID 0</div><div class='line'>Mirror：同時寫入多份，增加資料的可用性但減少空間，相當於RAID 1</div><div class='line'>Parity：利用位元檢查將資料儲存至各個磁碟上，至少需要三顆以上的磁碟，就算有其中一顆硬碟故障也可正常運作，相當於RAID 5</div></code></div></pre><!-- HTML_TAG_END --> <p>找到 Disk Management<img src=\"https://hackmd.io/_uploads/Bk_3kBjQ0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">對剛建立的虛擬硬碟右鍵選擇 Online -&gt; Initialize Disk<img src=\"https://hackmd.io/_uploads/HkjubHj70.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"><img src=\"https://hackmd.io/_uploads/S1vxMrsm0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 GPT 分區<img src=\"https://hackmd.io/_uploads/B1Wx7SjmR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇磁區右鍵選擇 New Simple Volume…<img src=\"https://hackmd.io/_uploads/rJe8QriQR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">建立完成<img src=\"https://hackmd.io/_uploads/r1H2mSi70.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"> <img src=\"https://hackmd.io/_uploads/B1lRQHiXC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h2 id=\"啟用重複資料刪除機制\" data-svelte-h=\"svelte-1pc4ego\"><a href=\"#啟用重複資料刪除機制\">啟用重複資料刪除機制</a></h2> <p>安裝 Data Deduplication<img src=\"https://hackmd.io/_uploads/By1ZBcbBR.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">File and Storage Services -&gt; Volumes -&gt; 選中要設定的磁區 -&gt; Configure Data Deduplication<img src=\"https://hackmd.io/_uploads/ry5xLqZr0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">選擇 General purpose file server<img src=\"https://hackmd.io/_uploads/Sy92U5-HA.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\">再按 OK 就完成了</p> <h2 id=\"ad-users-csv-import--export\" data-svelte-h=\"svelte-1qrgot5\"><a href=\"#ad-users-csv-import--export\">AD Users CSV Import / Export</a></h2> <h3 id=\"csvde-import-無法使用\" data-svelte-h=\"svelte-1lnex7b\"><a href=\"#csvde-import-無法使用\">csvde (Import 無法使用？)</a></h3> <p data-svelte-h=\"svelte-lnkgxb\">Import</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>csvde -i -k -f [csv_file_path]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h=\"svelte-ld6jlm\">Export</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>csvde -r \"(objectClass=user)\" -m -f [csv_file_path_for_export]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/HyItOk1dC.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p> <h3 id=\"powershell-import-users\" data-svelte-h=\"svelte-1bng4yu\"><a href=\"#powershell-import-users\">Powershell Import Users</a></h3> <p data-svelte-h=\"svelte-11yjwvz\">使用 <code>Import-CSV</code> 和 <code>ForEach-Object</code> 完成</p> <!-- HTML_TAG_START --><pre class=\"shiki material-default\" bash=\"=\"><div class='code-container'><code>Import-Csv -Path [csv_path] | ForEach-Object &#123; $user = $_net group $user.group /addnet user $user.name $user.pass /addnet group $user.group $user.name /add&#125;</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src=\"https://hackmd.io/_uploads/BJ2Tdz4_0.png\" alt=\"image\" class=\"rounded-lg my-2\" loading=\"lazy\" decoding=\"async\"></p>","image":"/winsrv.jpg","date_published":"2024-09-16T00:00:00.000Z","date_modified":"2024-09-16T00:00:00.000Z","tags":["Windows","OS"],"_indieweb":{"type":"article"}},{"id":"hello-world/about_me","url":"https://localhost:5173/hello-world/about_me","title":"About Me!","content_html":"<h2 id=\"關於我\" data-svelte-h=\"svelte-14p3kr3\"><a href=\"#關於我\">關於我</a></h2> <div class=\"relative w-auto min-h-48 rounded-box overflow-hidden bg-gradient-to-b from-primary to-secondary text-primary-content transition-shadow duration-200 shadow-xl hover:shadow-2xl p-4 md:p-8 my-4\"><div class=\"absolute -top-4 opacity-10 text-[12rem] text-neutral leading-tight rotate-[30deg]\">Shellkai Huang</div> <div class=\"avatar mb-4\"><div class=\"rounded-full border-2 border-white shadow-xl w-16 h-16\"><img class=\"hover:rotate-[360deg] transition-transform duration-1000 ease-in-out m-0\" src=\"/assets/profile.jpg\" alt=\"Shellkai Huang\" loading=\"lazy\" decoding=\"async\"></div></div> <div class=\"opacity-50\">ShellkaiTW</div> <div class=\"text-2xl mb-2\">Shellkai Huang</div> <div><!-- HTML_TAG_START -->「每一次的嘗試，皆是在未知中探索著，且學習著。」<!-- HTML_TAG_END --></div> <div class=\"flex flex-col md:flex-row gap-4 mt-4\" data-svelte-h=\"svelte-17hinao\"><a href=\"https://bit.ly/shellkai\" rel=\"noopener external\" target=\"_blank\" class=\"group flex-1 relative overflow-hidden btn btn-block normal-case border-none no-underline bg-[#5865f2] hover:bg-[#7983f5]\"><span class=\"i-simple-icons-discord absolute w-16 h-16 right-10 opacity-20 fill-white transform-gpu transition-transform ease-in-out duration-500 group-hover:scale-125\"></span> <span class=\"z-10 !text-white\">My own server: i realized here&#39;s mod is shellkai</span></a></div></div> <h2 id=\"contestant-memories\" data-svelte-h=\"svelte-1ld2932\"><a href=\"#contestant-memories\">Contestant memories</a></h2> <ul class=\"timeline svelte-3j1e6h\"><li class=\"timeline-item alternate svelte-1eitw8k\"><div class=\"timeline-opposite-content alternate svelte-1c9jp58\"><p>2023</p>  </div> <div class=\"timeline-separator svelte-1lqxdk9\"><span class=\"timeline-dot svelte-226qa6\"> </span> <span class=\"timeline-connector svelte-jbpjct\"></span>  </div> <div class=\"timeline-content alternate svelte-1mnas8e\"><h3>第 53 屆全國技能競賽分區北區賽 39 資訊與網路技術 佳作</h3>  </div>  </li><li class=\"timeline-item alternate svelte-1eitw8k\"><div class=\"timeline-opposite-content alternate svelte-1c9jp58\"><p>2023</p>  </div> <div class=\"timeline-separator svelte-1lqxdk9\"><span class=\"timeline-dot svelte-226qa6\"> </span> <span class=\"timeline-connector svelte-jbpjct\"></span>  </div> <div class=\"timeline-content alternate svelte-1mnas8e\"><h3>桃園國際新創機器人節 (TIRT) T1 智能賽車組 &amp; 機器人划龍舟組</h3>  </div>  </li><li class=\"timeline-item alternate svelte-1eitw8k\"><div class=\"timeline-opposite-content alternate svelte-1c9jp58\"><p>2024</p>  </div> <div class=\"timeline-separator svelte-1lqxdk9\"><span class=\"timeline-dot svelte-226qa6\"> </span> <span class=\"timeline-connector svelte-jbpjct\"></span>  </div> <div class=\"timeline-content alternate svelte-1mnas8e\"><h3>第 54 屆全國技能競賽分區北區賽 39 資訊與網路技術 金牌 (第一名)</h3>  </div>  </li><li class=\"timeline-item alternate svelte-1eitw8k\"><div class=\"timeline-opposite-content alternate svelte-1c9jp58\"><p>2024</p>  </div> <div class=\"timeline-separator svelte-1lqxdk9\"><span class=\"timeline-dot svelte-226qa6\"> </span> <span class=\"timeline-connector svelte-jbpjct\"></span>  </div> <div class=\"timeline-content alternate svelte-1mnas8e\"><h3>第 54 屆全國技能競賽全國賽 39 資訊與網路技術 銅牌 (第三名)</h3>  </div>  </li> </ul>","image":"/hello-world/kita-ikuyo.jpg","date_published":"2024-09-14T00:00:00.000Z","date_modified":"2024-09-14T00:00:00.000Z","tags":[],"_indieweb":{"type":"article"}},{"id":"hello-world/elements","url":"https://localhost:5173/hello-world/elements","title":"(Blog's Template Document) Elements","content_html":"<h2 id=\"headings\" data-svelte-h=\"svelte-17ezzq3\"><a href=\"#headings\">Headings</a></h2> <h3 id=\"heading\" data-svelte-h=\"svelte-1lz1oii\"><a href=\"#heading\">Heading</a></h3> <h4 id=\"heading-1\" data-svelte-h=\"svelte-18swq4u\"><a href=\"#heading-1\">Heading</a></h4> <h5 id=\"heading-2\" data-svelte-h=\"svelte-seo8oo\"><a href=\"#heading-2\">Heading</a></h5> <h6 id=\"heading-3\" data-svelte-h=\"svelte-11zzhhm\"><a href=\"#heading-3\">Heading</a></h6> <hr> <h2 id=\"paragraphs\" data-svelte-h=\"svelte-1jrm51r\"><a href=\"#paragraphs\">Paragraphs</a></h2> <p data-svelte-h=\"svelte-1cwujs\"><span class=\"spoiler\">spoiler</span></p> <p data-svelte-h=\"svelte-1smaymh\"><strong><em>The</em></strong> <em>quick</em> <u>brown</u> <a href=\"https://www.foxnews.com/\" rel=\"nofollow noopener noreferrer external\" target=\"_blank\">fox</a> <code>jumps</code> <del>over</del> the lazy <strong>dog</strong>.</p> <p data-svelte-h=\"svelte-rzm3sy\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p> <p data-svelte-h=\"svelte-1rcwbbl\">建格的何另始養離腳合兒現各談花車是都無處與費別、信善行修覺自！壓總談下市率應次司公母兒用什一線送用標地倒直作任老數年白安足個後引使名隊懷持日落異今特族？</p> <p data-svelte-h=\"svelte-19ezoke\">一士我像衣買了人義，計念？</p> <p data-svelte-h=\"svelte-k1vvek\">期老外並中般灣作各現初知強車我的品式企國立市它北待不型師文人注信方，各成能久，然的孩界，他事應在創灣字母寫麼，會不作散際，學節水……全當名己會天還著行多是生如內他道了家至種樣見景時一……區行水影。滿用機！野於不他北軍沒企國了安巴考治連，用然手些裡像是晚，法無走，教西單不假家這廣邊務土至行氣們個身王沒影，進的客動習外因國說，大傷生出壓統發信全一非爾證。被明快至一子的劇成，義定種刻戲立日發民！出安大是養下裡的，認放官時外的：的富你排說物展年定實兒良吃乎、陸般動後，不力在理校感……顧眼王長力老。</p> <p data-svelte-h=\"svelte-5q7uy2\">重多一？生光聯……動說麼了：起形市般我題臉事級。</p> <blockquote data-svelte-h=\"svelte-1t277r2\"><p>In solitude, where we are least alone.</p></blockquote> <p data-svelte-h=\"svelte-dbq3jo\">私は絶対いよいよ漠然たる相当心に対してはずの他にできるならな。けっして今に養成めも何だか漠然たる仕事たないだけにしからならでをは話安んずるないですて、わざわざには聴いましたなけれた。権力を気がつきなのはどうしても先刻が毫もらしくでう。</p> <p data-svelte-h=\"svelte-br4gki\">ようやく嘉納さんに供獄とても承諾をやるでしょ習慣その主義それか攻撃にに対してお関係でたあるですと、その今は俺か釣竿頭に喜ぶば、嘉納さんののより考のそれをよくごふりと云ってあなた一団がお融和へ見えようにまあご経験にしずませば、とうとうもっとも誤解になるたでいるないのを思っですた。しかもしかしながら大首へする気もずいぶん美味と移ろたて、この言葉にもいうですてってがたにしてしまえたない。この限り時代のためその学校も私上を吹き込んんかと大森さんをしなませ、人の今日んというご講義ただですば、晩の時で長靴が始めだけの時代に前もっでいて、どうの今日が思えばそのためとあたかも足りんなとしだ事でが、ないますなて少し実職業いでし事だろたませ。</p> <p data-svelte-h=\"svelte-63jeqz\">さて学校か不幸か話に教えですけれども、今中力が起るて得るですためがご講演の今に訊かたです。多年をはどうしても思うでいうんたずでと、まるで何とも繰り返しが周旋はさっそく悪いうので。</p> <p data-svelte-h=\"svelte-11pdwd8\"><a href=\"#headings\">scrollToTop</a></p> <hr> <h2 id=\"lists\" data-svelte-h=\"svelte-g7u641\"><a href=\"#lists\">Lists</a></h2> <h3 id=\"definition-list-dl\" data-svelte-h=\"svelte-1l26dxc\"><a href=\"#definition-list-dl\">Definition List (dl)</a></h3> <dl data-svelte-h=\"svelte-1593q4a\"><dt>Definition List Title</dt><dd>This is a definition list division.</dd></dl> <h3 id=\"ordered-list-ol\" data-svelte-h=\"svelte-1e2vcc5\"><a href=\"#ordered-list-ol\">Ordered List (ol)</a></h3> <ol data-svelte-h=\"svelte-1lrkorm\"><li>List Item 1</li> <li>List Item 2</li> <li>List Item 3</li></ol> <h3 id=\"unordered-list-ul\" data-svelte-h=\"svelte-1r3t7r6\"><a href=\"#unordered-list-ul\">Unordered List (ul)</a></h3> <ul data-svelte-h=\"svelte-1m0ot56\"><li>List Item 1</li> <li>List Item 2</li> <li>List Item 3</li></ul> <h3 id=\"checkbox-list-ul\" data-svelte-h=\"svelte-19gylr7\"><a href=\"#checkbox-list-ul\">Checkbox List (ul)</a></h3> <ul class=\"contains-task-list\" data-svelte-h=\"svelte-xge1gw\"><li class=\"task-list-item\"><input type=\"checkbox\" disabled> List Item 1 unchecked</li> <li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> List Item 2 checked</li> <li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> List Item 3 checked<ul class=\"contains-task-list\"><li class=\"task-list-item\"><input type=\"checkbox\" disabled> Sub List Item 1 unchecked</li> <li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Sub List Item 1 checked</li></ul></li></ul> <h2 id=\"table\" data-svelte-h=\"svelte-47p9vw\"><a href=\"#table\">Table</a></h2> <div class=\"overflow-x-auto mb-4\"><table class=\"table w-full\"><thead data-svelte-h=\"svelte-gczjan\"><tr><th>Table Header 1</th> <th>Table Header 2</th> <th>Table Header 3</th></tr></thead> <tbody data-svelte-h=\"svelte-idip7f\"><tr><td>Division 1</td> <td>Division 2</td> <td>Division 3</td></tr> <tr><td>Division 1</td> <td>Division 2</td> <td>Division 3</td></tr> <tr><td>Division 1</td> <td>Division 2</td> <td>Division 3</td></tr></tbody></table></div> <div class=\"overflow-x-auto mb-4\"><table class=\"table w-full\"><thead data-svelte-h=\"svelte-7vsuop\"><tr><th align=\"left\">Table Header 1</th> <th align=\"center\">Table Header 2</th> <th align=\"right\">Table Header 3</th></tr></thead> <tbody data-svelte-h=\"svelte-16i6pl9\"><tr><td align=\"left\">Division 1</td> <td align=\"center\">Division 2</td> <td align=\"right\">Division 3</td></tr> <tr><td align=\"left\">Division 1</td> <td align=\"center\">Division 2</td> <td align=\"right\">Division 3</td></tr> <tr><td align=\"left\">Division 1</td> <td align=\"center\">Division 2</td> <td align=\"right\">Division 3</td></tr></tbody></table></div> <p data-svelte-h=\"svelte-11pdwd8\"><a href=\"#headings\">scrollToTop</a></p> <h2 id=\"footnotes\" data-svelte-h=\"svelte-u5fi6x\"><a href=\"#footnotes\">Footnotes</a></h2> <p data-svelte-h=\"svelte-jidotm\">Here is a footnote reference. <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></p> <p data-svelte-h=\"svelte-fsvclw\">This is a long note. <sup id=\"fnref-longnote\"><a href=\"#fn-longnote\" class=\"footnote-ref\">longnote</a></sup></p> <p data-svelte-h=\"svelte-xyllmn\">This is an inline note. <sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup></p> <p data-svelte-h=\"svelte-11pdwd8\"><a href=\"#headings\">scrollToTop</a></p> <h2 id=\"code\" data-svelte-h=\"svelte-1gehoc9\"><a href=\"#code\">Code</a></h2> <!-- HTML_TAG_START --><pre class=\"shiki material-default with-title twoslash lsp\" ts=\"true\" title=\"examples/index.ts\"><div class='code-title'>examples/index.ts</div><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'>for (let <data-lsp lsp='let x: string' >x</data-lsp> in [0]) <data-lsp lsp='var console: Console' >console</data-lsp>.<data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp>(<data-lsp lsp='let x: string' >x</data-lsp>)</div></code></div></pre><!-- HTML_TAG_END --> <!-- HTML_TAG_START --><pre class=\"shiki material-default twoslash lsp\" ts=\"true\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line highlight'>interface IdLabel &#123;</div><div class='line highlight'>  id: number /* some fields */</div><div class='line highlight'>&#125;</div><div class='line highlight'>interface NameLabel &#123;</div><div class='line highlight'>  name<data-lsp lsp='let a: NameLabel' ></data-lsp>: string /* other fields */</div><div class='line highlight'>&#125;</div><div class='line dim'>type NameOrId&lt;T extends number | string&gt; = T extends number ? IdLabel : NameLabel</div><div class='line dim'>// This comment should not be included</div><div class='line dim'>&nbsp;</div><div class='line dim'>// ---cut---</div><div class='line dim'>function createLabel&lt;T extends number | string&gt;(idOrName: T): NameOrId&lt;T&gt; &#123;</div><div class='line dim'>  throw &apos;unimplemented&apos;</div><div class='line dim'>&#125;</div><div class='line dim'>&nbsp;</div><div class='line dim'>let a = createLabel(&apos;typescript&apos;)</div></code></div></pre><!-- HTML_TAG_END --> <h2 id=\"misc\" data-svelte-h=\"svelte-1n59eic\"><a href=\"#misc\">Misc</a></h2> <sup data-svelte-h=\"svelte-17o8npf\">Lorem</sup> <sub data-svelte-h=\"svelte-1h4d230\">ipsum</sub> <cite data-svelte-h=\"svelte-2sv5mx\">dolor sit amet</cite>, <acronym title=\"Consectetur Adipiscing Elit\" data-svelte-h=\"svelte-1bkbv8l\">consectetur adipiscing elit</acronym>, <abbr title=\"Aliqua\" data-svelte-h=\"svelte-1qfm1q8\">sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</abbr>. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<br><br> <p data-svelte-h=\"svelte-d56c1z\">リバースカードオープン、エネミーコントローラー！</p> <p data-svelte-h=\"svelte-i6obr\">ライフを 1000 払い、コマンド入力、<kbd>←</kbd> <kbd>→</kbd> <kbd>A</kbd> <kbd>B</kbd>！</p> <p data-svelte-h=\"svelte-a1w1jh\">このコマンドにより、全てのアニヲタを破壊する！</p> <p data-svelte-h=\"svelte-11pdwd8\"><a href=\"#headings\">scrollToTop</a></p> <h2 id=\"svelte-components\" data-svelte-h=\"svelte-mjglpj\"><a href=\"#svelte-components\">Svelte Components</a></h2>   <div data-testid=\"general-observer\"></div> <br>   <div data-testid=\"general-observer\"></div> <br>   <div data-testid=\"general-observer\"></div> <div class=\"footnotes\" data-svelte-h=\"svelte-11hrpf6\"><hr> <ol><li id=\"fn-1\">Here is the footnote.<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li> <li id=\"fn-longnote\">Here’s one footnote with longer identifier.<a href=\"#fnref-longnote\" class=\"footnote-backref\">↩</a></li> <li id=\"fn-2\">You can type footnotes inline, so you don’t have to pick an identifier manually.<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a></li></ol></div>","date_published":"2021-12-12T00:00:00.000Z","date_modified":"2024-09-20T10:23:01.969Z","tags":["Document","Elements"],"_indieweb":{"type":"article"}},{"id":"hello-world/toc-disabled","url":"https://localhost:5173/hello-world/toc-disabled","title":"ToC Disabled","content_html":"<p data-svelte-h=\"svelte-y4beyz\">This post has disabled table of contents.</p> <p data-svelte-h=\"svelte-1b99nud\">When the <code>toc: false</code> on Front-Matter, toc should not be displayed.</p> <h2 id=\"heading\" data-svelte-h=\"svelte-bvxltq\"><a href=\"#heading\">Heading</a></h2> <h3 id=\"heading-1\" data-svelte-h=\"svelte-1pcqacq\"><a href=\"#heading-1\">Heading</a></h3> <h4 id=\"heading-2\" data-svelte-h=\"svelte-akuw8s\"><a href=\"#heading-2\">Heading</a></h4>","summary":"This post has disabled table of contents.","date_published":"2021-12-12T00:00:00.000Z","date_modified":"2024-09-20T10:23:01.970Z","tags":["Front-Matter"],"_indieweb":{"type":"article"}},{"id":"hello-world","url":"https://localhost:5173/hello-world","title":"Hello World","content_html":"<p data-svelte-h=\"svelte-k5cwrs\">Here’s the website’s test page :)</p>   <div data-testid=\"general-observer\"></div> <br>   <div data-testid=\"general-observer\"></div>","image":"/hello-world/ciallo.jpg","date_published":"2021-11-01T00:00:00.000Z","date_modified":"2021-12-12T00:00:00.000Z","tags":["Hello World"],"_indieweb":{"type":"article"}}]}