<!doctype html>
<html lang="zh-TW">
  <head prefix="og: https://ogp.me/ns#">
    <meta charset="utf-8" />
    <meta name="generator" content="gh:importantimport/urara" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" crossorigin="use-credentials" href="/manifest.webmanifest" />
    <link rel="alternate" type="application/feed+json" href="/feed.json" />
    <link rel="alternate" type="application/atom+xml" href="/atom.xml" />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />
    <meta http-equiv="content-security-policy" content="style-src 'self' 'unsafe-inline' https://giscus.app">
		<link href="../_app/immutable/assets/0.Crk2ethr.css" rel="stylesheet">
		<link href="../_app/immutable/assets/posts.C6CGrAZI.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.TldekpM4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/entry.BeDR7bm5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.BWDpjmD3.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.DIUoT-SP.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.BJuOPXn7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.BQ24v_F8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.D6J2XlmR.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.147nD-Q8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/posts.CDWtigex.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/icon.C1b6mlfy.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/4.Cyltc6ZI.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/post_layout.DbraLVnE.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/footer.DMSQUgXx.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/table.YjfV7aGJ.js"><title>Debian | Shellkai's Blog</title><!-- HEAD_svelte-1592q3p_START --><!-- HEAD_svelte-1592q3p_END --><!-- HEAD_svelte-1kxdj3d_START --><link rel="shortcut icon" href="https://localhost:5173/kon-favicon.png" sizes="48x48" type="image/png"><link rel="apple-touch-icon" href="https://localhost:5173/assets/any@180.png" sizes="180x180" type="image/png"><link rel="icon" href="https://localhost:5173/assets/any@192.png" sizes="192x192" type="image/png"><!-- HEAD_svelte-1kxdj3d_END --><!-- HEAD_svelte-1g590ms_START --><meta name="theme-color"><!-- HEAD_svelte-1g590ms_END --><!-- HEAD_svelte-abrfj_START --><meta name="author" content="Shellkai Huang"><link rel="canonical" href="https://localhost:5173/debian">  <meta name="keywords" content="Linux, OS"> <!-- HEAD_svelte-abrfj_END --><!-- HEAD_svelte-4dky5b_START --><meta property="og:site_name" content="Shellkai's Blog"><meta property="og:locale" content="zh-TW"><meta property="og:type" content="article"> <meta property="og:title" content="Debian">  <meta property="og:image" content="https://localhost:5173/debian.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta property="article:tag" content="Linux"><meta property="article:tag" content="OS"> <meta property="og:url" content="https://localhost:5173/debian"> <meta property="article:author" content="Shellkai Huang"> <meta property="article:published_time" content="2024-09-16T00:00:00.000Z"> <meta property="article:modified_time" content="2024-09-16T00:00:00.000Z"><!-- HEAD_svelte-4dky5b_END -->
  </head>
  <body itemscope itemtype="https://schema.org/WebPage">
    <div style="display: contents">      <header id="header" class="fixed z-50 w-full transition-all duration-500 ease-in-out border-b-2 border-transparent max-h-[4.125rem] false"><div class="navbar"><div class="navbar-start">  <div class="dropdown lg:hidden"><label for="navbar-dropdown" tabindex="0" class="btn btn-square btn-ghost" data-svelte-h="svelte-rz1qrs"><span class="i-heroicons-outline-menu-alt-1"></span></label> <ul id="navbar-dropdown" tabindex="0" class="menu menu-compact dropdown-content bg-base-100 text-base-content shadow-lg rounded-box min-w-max max-w-52 p-2"><li><a href="/">Home</a> </li><li><a href="/hello-world/about_me">About</a> </li></ul></div> <div class="swap order-last hidden lg:inline-grid"><button class="swap-on btn btn-ghost text-base font-normal normal-case transition-all duration-200 hidden"></button> <ul class="swap-off menu menu-horizontal p-0"><li><a class="!rounded-btn" href="/">Home</a> </li><li><a class="!rounded-btn" href="/hello-world/about_me">About</a> </li></ul></div> <a href="/" class="btn btn-ghost normal-case text-lg">Shellkai's Blog</a></div> <div class="navbar-end"> <div id="change-theme" class="dropdown dropdown-end">  <div tabindex="0" class="btn btn-square btn-ghost" data-svelte-h="svelte-1qtp8cz"><span class="i-heroicons-outline-color-swatch"></span></div>   <ul tabindex="0" class="flex flex-nowrap shadow-2xl menu dropdown-content bg-base-100 text-base-content rounded-box w-52 p-2 gap-2 overflow-y-auto max-h-[21.5rem]"><button data-theme="cmyk" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🖨 Light</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="dracula" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🧛 Dark</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="valentine" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🌸 Valentine</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="aqua" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">💦 Aqua</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="synthwave" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🌃 Synthwave</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="night" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🌃 Night</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="lofi" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🎶 Lo-Fi</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="lemonade" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🍋 Lemonade</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="cupcake" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🧁 Cupcake</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="garden" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🏡 Garden</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="retro" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🌇 Retro</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="black" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🖤 Black</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button></ul></div></div></div></header> <button id="totop" aria-label="scroll to top" class="fixed grid group btn btn-circle btn-lg border-none backdrop-blur bottom-6 right-6 z-50 duration-500 ease-in-out btn-ghost bg-base-100/30 md:bg-base-200/30 translate-y-24"> <div class="radial-progress text-accent transition-all duration-500 ease-in-out group-hover:text-[color-mix(in_oklab,oklch(var(--a)),black_7%)] col-start-1 row-start-1" style="--size:4rem; --thickness: 0.25rem; --value:undefined;"></div> <div class="border-4 border-base-content/10 group-hover:border-transparent col-start-1 row-start-1 rounded-full w-full h-full p-4 grid duration-500 ease-in-out" data-svelte-h="svelte-hwvjh5"><span class="i-heroicons-solid-chevron-up !w-6 !h-6"></span></div></button> <div class="bg-base-100 md:bg-base-200 min-h-screen pt-16 md:pb-8 lg:pb-16">  <div class="flex flex-col flex-nowrap justify-center xl:flex-row xl:flex-wrap"><div class="flex-1 w-full order-first ease-out transform mx-auto xl:mr-0 xl:ml-0"></div> <div class="flex-1 w-full xl:order-last ease-out transform mx-auto xl:ml-0 xl:mr-0"></div> <div class="flex-none w-full max-w-screen-md mx-auto xl:mx-0"><article itemscope itemtype="https://schema.org/BlogPosting" itemprop="blogPost" class="h-entry card bg-base-100 rounded-none md:rounded-box md:shadow-xl overflow-hidden z-10 md:mb-8 lg:mb-16">   <div class="card-body gap-0 "><div class="flex flex-col gap-2"><figure class="md:order-last rounded-box shadow-xl mb-4 flex-col gap-2 -mx-4 -mt-8 md:mt-0"><picture><source srcset="/_app/immutable/assets/debian.DdCMEaTS.avif 736w" type="image/avif"> <img src="/debian.jpg" alt="/debian.jpg" class="u-featured" loading="lazy" decoding="async"></picture></figure> <div class="flex font-semibold gap-1.5"><a rel="author" class="opacity-75 hover:opacity-100 hover:text-primary duration-500 ease-in-out p-author h-card" href="https://localhost:5173">Shellkai Huang</a> <span class="opacity-50" data-svelte-h="svelte-1edzios">/</span> <a href="/debian" class="u-url u-uid swap group/time"><time class="group-hover/time:opacity-0 font-semibold opacity-75 duration-500 ease-in-out mr-auto dt-published" datetime="2024-09-16T00:00:00.000Z" itemprop="datePublished">24年9月16日 星期一</time> <time class="opacity-0 group-hover/time:opacity-100 font-semibold text-primary duration-500 ease-in-out mr-auto dt-updated" datetime="2024-09-16T00:00:00.000Z" itemprop="dateModified">24年9月16日 星期一</time></a></div> <h1 itemprop="name headline" class="card-title text-3xl mb-8 p-name">Debian</h1> </div> <main itemprop="articleBody" class="urara-prose prose e-content"><h2 id="安裝功能" data-svelte-h="svelte-1hzw6e2"><a href="#安裝功能">安裝功能</a></h2> <p data-svelte-h="svelte-3ux6py">安裝 package 指令：
<code>apt install [package-name]</code></p> <h2 id="vim" data-svelte-h="svelte-1s244mk"><a href="#vim">vim</a></h2> <p>vim 設定檔編輯：
<code data-svelte-h="svelte-1t38vfe">vim /etc/vim/vimrc</code>
設定行號指令：<code data-svelte-h="svelte-1w10d1x">set nu</code> <img src="https://hackmd.io/_uploads/rkgk7aTnc2.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p data-svelte-h="svelte-1c7c1u3">vim 一般模式指令：
Esc + :w       - 保存文件，不退出 vim
Esc + :w file  - 將修改另外保存到 file 中，不退出 vim
Esc + :w!      - 強制保存，不退出 vim
Esc + :wq      - 保存文件，退出 vim
Esc + :wq!     - 強制保存文件，退出 vim
Esc + :q       - 不保存文件，退出 vim
Esc + :q!      - 不保存文件，強制退出 vim
Esc + :e!      - 放棄所有修改，從上次保存文件開始再編輯</p> <p>vim 編輯模式指令：
插入字元：i
取代字元：r
可視模式：v
刪除內容：d
撤銷最近一次編輯：u
將誤刪的內容回復：p
多行選擇：Shift+V
預設編輯器設定：
<code data-svelte-h="svelte-31uww1">update-alternatives --config editor</code>
選擇 <code data-svelte-h="svelte-1s1ryvw">/usr/bin/vim.basic</code> <img src="https://hackmd.io/_uploads/Hy27pah5n.png" alt="https://hackmd.io/_uploads/Hy27pah5n.png" class="rounded-lg my-2" loading="lazy" decoding="async">
輸入 <code data-svelte-h="svelte-jgibi1">editor</code> 即可叫出 vim</p> <h3 id="在-putty-上直接對-vim-貼上資料" data-svelte-h="svelte-1xspbcs"><a href="#在-putty-上直接對-vim-貼上資料">在 putty 上直接對 vim 貼上資料</a></h3> <p>編輯 vim 設定檔： <code data-svelte-h="svelte-1t38vfe">vim /etc/vim/vimrc</code>
加入鼠標模式：<code data-svelte-h="svelte-10umn1a">:set mouse=</code>
儲存後在 putty 上按 <code data-svelte-h="svelte-zy6dbc">Shift+Insert</code> 即可在 vim 上貼上資料
<img src="https://hackmd.io/_uploads/ryi466hcn.png" alt="https://hackmd.io/_uploads/ryi466hcn.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="開啟新-console" data-svelte-h="svelte-158uymp"><a href="#開啟新-console">開啟新 Console</a></h2> <p data-svelte-h="svelte-b9wu7y">使用快捷鍵：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>Ctrl + Shift + F2 // 開啟第二個 Console</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1qeg44k">其中 F2 可以替換成要開的 Console 代號</p> <h2 id="刪除相關指令" data-svelte-h="svelte-p5rsrp"><a href="#刪除相關指令">刪除相關指令</a></h2> <h3 id="檔案相關" data-svelte-h="svelte-1m622ym"><a href="#檔案相關">檔案相關</a></h3> <p>刪除檔案：
<code data-svelte-h="svelte-luw82u">rm [filelocation]</code>
刪除目錄：
<code data-svelte-h="svelte-1heozli">rm -d [dirlocation]</code> <code data-svelte-h="svelte-u7xevg">rmdir [dirlocation]</code>
若目錄內有資料：
<code data-svelte-h="svelte-1yb5khg">rm -vrf [dirlocation]</code> <img src="https://hackmd.io/_uploads/B1QST6nq3.png" alt="https://hackmd.io/_uploads/B1QST6nq3.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="完整刪除套件-apt" data-svelte-h="svelte-157e7tf"><a href="#完整刪除套件-apt">完整刪除套件 (apt)</a></h3> <p data-svelte-h="svelte-4787ae">先將刪除目標的服務停止：<code>service [service] stop</code>
完整刪除：<code>apt-get purge [package1] [package2]...</code>
(註：若要將全部相關的套件都刪除，先輸入主要的套件名稱 (如：apache2)，再用 Tab 鍵去找尋相關的副套件)
接下來要找尋系統中已經用不到的套件，有些是與欲刪除的套件有相關的：<code>apt autoremove</code>
最後再找尋是否還有殘留未刪除的檔案：<code>whereis [service]</code></p> <h2 id="hostname-更改" data-svelte-h="svelte-14m2566"><a href="#hostname-更改">hostname 更改</a></h2> <p data-svelte-h="svelte-jxcdqq">查看目前 hostname：<code>hostname</code>
更改 hostname：<code>hostnamectl set-hostname [the-hostname-u-want-to-change]</code></p> <h2 id="samba-資料夾共享" data-svelte-h="svelte-1r5m7df"><a href="#samba-資料夾共享">Samba (資料夾共享)</a></h2> <p data-svelte-h="svelte-5xfstb">Samba 設定檔編輯：<code>vim /etc/samba/smb.conf</code>
建立資料夾：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">mkdir /public</span></div><div class='line'><span style="color: undefined">mkdir /private</span></div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1przzpo">path=/home/jackey：上述的jackey這個分享目錄，位在主機中實體的路徑為/home/jackey
writable = yes：可以讀寫，修改分享目錄中的檔案
public = yes：所有人都可以訪問此共享資料夾
read only = no：非唯讀模式，其他人可以寫入
更改完後執行<code>service smbd restart</code>來重置 Samba 服務，使設定值生效。</p> <h3 id="samba-存取驗證-smbpasswd" data-svelte-h="svelte-17va5j1"><a href="#samba-存取驗證-smbpasswd">Samba 存取驗證 (smbpasswd)</a></h3> <p>限制在 <code data-svelte-h="svelte-1redfxp">smbuser</code> 群組的使用者才可存取資料夾
設定方式：
<img src="https://hackmd.io/_uploads/B14jpF30a.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
設定後還要將使用者加入 <code data-svelte-h="svelte-1qcgx2a">smbpasswd</code> 內</p> <p data-svelte-h="svelte-1dp44ke">一次新增 9 個使用者 (user01~user09) 到 smbpasswd 且密碼為 Skills39：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>for ((i=1;i&lt;=9;i++))
&gt; do
&gt; (echo "Skills39"; echo "Skills39") | smbpasswd -s -a user0$i
&gt; done</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="chmod-權限修改" data-svelte-h="svelte-gmmpn1"><a href="#chmod-權限修改">chmod (權限修改)</a></h2> <h3 id="數字代表的權限" data-svelte-h="svelte-1x5l8mo"><a href="#數字代表的權限">數字代表的權限</a></h3> <p data-svelte-h="svelte-17cdq0n">7 = 讀、寫和執行權限
5 = 讀和執行權限
4 = 唯讀權限
第一位數字：文件所有者
第二位數字：群組使用者 (與文件所有者在同一使用者群組)
第三位數字：其他使用者</p> <h3 id="資料夾權限更改" data-svelte-h="svelte-g67lyv"><a href="#資料夾權限更改">資料夾權限更改</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>chmod 777 [dirlocation] //將資料夾權限設為所有人都可以修改</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="資料夾及內部檔案權限更改" data-svelte-h="svelte-1o1g43w"><a href="#資料夾及內部檔案權限更改">資料夾及內部檔案權限更改</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>chmod -R 777 [dirlocation] //將資料夾及內部檔案權限設為所有人都可以修改</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="修改-ip-位置" data-svelte-h="svelte-of4ge9"><a href="#修改-ip-位置">修改 IP 位置</a></h2> <p data-svelte-h="svelte-o42m6n">修改網卡設定檔：
<code>vim /etc/network/interfaces</code>
修改為下列資訊：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code>auto ens33
iface ens33 inet static
address [ur ip address] (or [ur ip address]/[ur subnet])
netmask [ur netmask]
gateway [ur gateway]
dns-nameservers [ur dns-server]</code></div></pre><!-- Note from shiki-twoslash: the language root= was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-jyd11n">DNS 設定：
修改/建立 DNS 設定檔：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">vim /etc/resolv.conf</span></div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-12eeknf">輸入：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">nameserver [ur dns-server]</span></div></code></div></pre><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/H1uEzKXy0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="error-rtnetlink-answers-file-exists" data-svelte-h="svelte-2vb28g"><a href="#error-rtnetlink-answers-file-exists">error: RTNETLINK answers: File exists</a></h3> <p><img src="https://hackmd.io/_uploads/BJzymBWBR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
可透過指令刪除現有配置來重置介面：<code data-svelte-h="svelte-6pt5fq">ip addr flush dev eth0</code>
再使用 <code data-svelte-h="svelte-14elun0">service networking restart</code> 來重新套用介面設定並啟用</p> <h2 id="自訂網卡名稱-attr" data-svelte-h="svelte-3a2k7r"><a href="#自訂網卡名稱-attr">自訂網卡名稱 (ATTR)</a></h2> <p data-svelte-h="svelte-1ngii5c">編輯及新增檔案：<code>vim /etc/udev/rules.d/net.rules</code>
輸入以下內容：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>ATTR&#123;address&#125;=="[網路介面MAC位置]",NAME="[想更改為什麼網卡名稱]"</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/S1fWYnuc6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
輸入後退出
再編輯網路介面設定：<code data-svelte-h="svelte-20hn60">vim /etc/network/interface</code> <img src="https://hackmd.io/_uploads/HyEdF2_c6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
最後將電腦重啟：<code data-svelte-h="svelte-2xt341">reboot</code></p> <h2 id="關閉最後登入訊息顯示" data-svelte-h="svelte-bx05hp"><a href="#關閉最後登入訊息顯示">關閉最後登入訊息顯示</a></h2> <p data-svelte-h="svelte-1rjf8os">輸入 <code>touch ~/.hushlogin</code>，登出後即生效</p> <h2 id="ufw-firewall-useless" data-svelte-h="svelte-14ph00u"><a href="#ufw-firewall-useless">ufw (Firewall) (useless)</a></h2> <p>輸入 <code data-svelte-h="svelte-1qfydfu">apt install ufw</code> 安裝 ufw
檢查 ufw 是否運作正常：
<code data-svelte-h="svelte-1trx1af">service ufw status</code>
ufw：
<img src="https://hackmd.io/_uploads/HkSYT6hc3.png" alt="https://hackmd.io/_uploads/HkSYT6hc3.png" class="rounded-lg my-2" loading="lazy" decoding="async">
可使用 <code data-svelte-h="svelte-1hrohei">ufw status</code> 查看目前允許或拒絕存取的 Port
<img src="https://hackmd.io/_uploads/By3Ypphqh.png" alt="https://hackmd.io/_uploads/By3Ypphqh.png" class="rounded-lg my-2" loading="lazy" decoding="async">
輸入 <code data-svelte-h="svelte-1k0chy3">ufw allow/deny [port] from/to [link]</code> 可增加要允許或拒絕規則</p> <h2 id="iptables" data-svelte-h="svelte-1b0gsvg"><a href="#iptables">iptables</a></h2> <p data-svelte-h="svelte-q3ktjn">查看目前規則：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>iptables -L
or
iptables -L --line-numbers (可查看帶有編號的規則，可用於刪除規則)</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/BkEq6p35h.png" alt="https://hackmd.io/_uploads/BkEq6p35h.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="基本設定" data-svelte-h="svelte-tyxhgj"><a href="#基本設定">基本設定</a></h3> <p data-svelte-h="svelte-1yqumv3">清除規則：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>iptables -F //清除所有的已訂定的規則
iptables -X //殺掉所有使用者建立的 tables
iptables -Z //將所有的 chain 的計數與流量統計都歸零</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/H1Acaah5n.png" alt="https://hackmd.io/_uploads/H1Acaah5n.png" class="rounded-lg my-2" loading="lazy" decoding="async">
設定預設 Chain Policy 為 DROP：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>iptables -P INPUT DROP
iptables -P OUTPUT DROP
iptables -P FORWARD DROP</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/HJlcEy9h6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="port-連線管理" data-svelte-h="svelte-5qmkr9"><a href="#port-連線管理">Port 連線管理</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>//允許 Port 80 連線
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
//拒絕 Port 30 連線
iptables -A INPUT -p tcp --dport 30 -j REJECT</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="nat-轉址服務" data-svelte-h="svelte-99c45w"><a href="#nat-轉址服務">NAT 轉址服務</a></h3> <h4 id="snat-原位址轉換-內傳外" data-svelte-h="svelte-12mi6dw"><a href="#snat-原位址轉換-內傳外">SNAT (原位址轉換) (內傳外)</a></h4> <p data-svelte-h="svelte-ficulg"><strong>若要做 NAT 設定，設定指令最前面要先打 iptables -t nat</strong>
使用 iptables 來完成此項目。</p> <p data-svelte-h="svelte-193e93w">NAT 設定：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>// 外網位置為 39.53.6.1/24，網卡為 eth1
iptables -t nat -A POSTROUTING -o eth1 -j SNAT --to 39.53.6.1</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1xt52ia">NAT 設定 (若外網 IP 非固定 IP)：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>// 外網網卡為 eth1
iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h4 id="dnat-目的位址轉換-外傳內" data-svelte-h="svelte-f3mbbg"><a href="#dnat-目的位址轉換-外傳內">DNAT (目的位址轉換) (外傳內)</a></h4> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>// 內網位置為 192.168.39.2/24，網卡為 eth0 (設定完後本機的位置都會一律被定向到內網的192.168.39.2，建議搭配 Port 使用)
iptables –t nat –A PREROUTING –i eth0 –j DNAT --to 192.168.39.2</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="port-forwarding" data-svelte-h="svelte-ssesp0"><a href="#port-forwarding">Port Forwarding</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>// 將 localhost 上的 Web Server 的 80 Port 做 Port Fowarding 至 8000 Port
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8000
iptables -t nat -A OUTPUT -p tcp -d localhost --dport 80 -j REDIRECT --to-ports 8000
// 將在 eth0 收到的 80 Port 封包全部做 Port Forwarding 至 8080 Port
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="啟用-ipv4-封包轉發" data-svelte-h="svelte-f9frhn"><a href="#啟用-ipv4-封包轉發">啟用 IPv4 封包轉發</a></h3> <p>若有做 NAT 或 Port Forwarding 都需要啟用封包轉發
輸入 <code data-svelte-h="svelte-1r22xip">sysctl -w net.ipv4.ip_forward=1</code> 來允許系統做 Port Forwarding (重啟後會消失)
若想永久保存可編輯 <code data-svelte-h="svelte-157ke2k">/etc/sysctl.conf</code>
將註解的 <code data-svelte-h="svelte-9mxdir">net.ipv4.ip_forward=1</code> 取消註解，重啟或輸入<code data-svelte-h="svelte-t9g8dz">sysctl -p</code>來生效
<img src="https://hackmd.io/_uploads/ByoUA-P6a.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
現在既可以直接使用 8000 Port 訪問，也可以使用 80 Port 自動轉至 8000 Port 來訪問
<img src="https://hackmd.io/_uploads/H1ubS3Iea.png" alt="https://hackmd.io/_uploads/H1ubS3Iea.png" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/BkFT43Lga.png" alt="https://hackmd.io/_uploads/BkFT43Lga.png" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/B1zsE38e6.png" alt="https://hackmd.io/_uploads/B1zsE38e6.png" class="rounded-lg my-2" loading="lazy" decoding="async"> <strong data-svelte-h="svelte-oidmfn"># 此方式較麻煩故淘汰，可見下面方法保存</strong> <del data-svelte-h="svelte-1rnr5ft">若想在重啟後一樣保留 Port Forwarding 的設定，可以至 <code>/etc/network/interface</code> 的網卡設定檔，在最下方加入
post-up [iptables command]
在網卡啟動後就會自動執行</del></p> <h3 id="icmp-封包管理-ip-a-連線到-ip-b-限制" data-svelte-h="svelte-4mcb3l"><a href="#icmp-封包管理-ip-a-連線到-ip-b-限制">ICMP 封包管理 (IP A 連線到 IP B 限制)</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>// 規定 192.168.10.58 不能傳送 ICMP 封包到 192.168.10.56
iptables -A INPUT -s 192.168.10.58 -d 192.168.10.56 -p icmp -j DROP/REJECT
// 取消規則
iptables -D INPUT (規則編號)</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>可以使用 Ping 指令來測試規則是否正常運行：
規則未啟用：(可正常 Ping 通)
<img src="https://hackmd.io/_uploads/H1L6XjMz6.png" alt="https://hackmd.io/_uploads/H1L6XjMz6.png" class="rounded-lg my-2" loading="lazy" decoding="async">
規則已啟用：(使用 DROP：顯示逾時)
<img src="https://hackmd.io/_uploads/SkSlNozMT.png" alt="https://hackmd.io/_uploads/SkSlNozMT.png" class="rounded-lg my-2" loading="lazy" decoding="async">
(使用 REJECT：顯示封包無法抵達目標主機)
<img src="https://hackmd.io/_uploads/rybisP8Ga.png" alt="https://hackmd.io/_uploads/rybisP8Ga.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="保存當前設定-全部規則皆適用" data-svelte-h="svelte-15lpa99"><a href="#保存當前設定-全部規則皆適用">保存當前設定 (全部規則皆適用)</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>apt install iptables-persistent</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-sh7lhf">都點選 OK 後，重開機規則不會消失
如果有做變更則重新安裝套件即可：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>apt reinstall iptables-persistent</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="刪除某一行規則" data-svelte-h="svelte-9vle50"><a href="#刪除某一行規則">刪除某一行規則</a></h3> <p data-svelte-h="svelte-1il1msn">先查看規則號碼：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>iptables -L --line-numbers</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1h57vd1">依照編號選擇要刪除的規則：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>iptables -D INPUT 1 # 若只有上述那行，那就是 1</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="dns-server-bind9" data-svelte-h="svelte-oyqkff"><a href="#dns-server-bind9">DNS Server (Bind9)</a></h2> <p data-svelte-h="svelte-mjh2zy">設定完記得使用 <code>service named restart</code> 重啟 DNS 服務</p> <h3 id="正解建立" data-svelte-h="svelte-14ke0rf"><a href="#正解建立">正解建立</a></h3> <p><code data-svelte-h="svelte-ubmcvq">named.conf.local</code> 設定檔內容
<img src="https://hackmd.io/_uploads/SytsT6h5h.png" alt="https://hackmd.io/_uploads/SytsT6h5h.png" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-1o9fgwo">db.wsdomain.com.tw</code> 設定檔內容
<img src="https://hackmd.io/_uploads/rkE2aahc3.png" alt="https://hackmd.io/_uploads/rkE2aahc3.png" class="rounded-lg my-2" loading="lazy" decoding="async">
使用瀏覽器
輸入 <code data-svelte-h="svelte-1sw59ua">wsdomain.com.tw</code> 可導向至 <code data-svelte-h="svelte-rsrqol">192.168.100.201</code> 的主機
輸入 <code data-svelte-h="svelte-kcn8rd">www.wsdomain.com.tw</code> 也可導向至 <code data-svelte-h="svelte-rsrqol">192.168.100.201</code> 的主機
輸入 <code data-svelte-h="svelte-1sgbnj6">amogus.wsdomain.com.tw</code> 可導向至 <code data-svelte-h="svelte-yve35c">192.168.100.204</code> 的主機</p> <h3 id="反解建立" data-svelte-h="svelte-1elbq8t"><a href="#反解建立">反解建立</a></h3> <p>假設要在 <code data-svelte-h="svelte-1a75nlu">192.168.39.0/24</code> 的網段上建立 <code data-svelte-h="svelte-103gjeb">wsc2024.fr</code> 的反解
<code data-svelte-h="svelte-vock1u">named.conf.default-zones</code> 設定檔內容 (第一個區域是正解使用)
<img src="https://hackmd.io/_uploads/rylStq5t3.png" alt="https://hackmd.io/_uploads/rylStq5t3.png" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-16pltl1">db.39.168.192</code> 設定檔內容
<img src="https://hackmd.io/_uploads/HySH95cYn.png" alt="https://hackmd.io/_uploads/HySH95cYn.png" class="rounded-lg my-2" loading="lazy" decoding="async">
nslookup 伺服器位置後會出現其對應的網域
<img src="https://hackmd.io/_uploads/ryER5c5Y2.png" alt="https://hackmd.io/_uploads/ryER5c5Y2.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="dns-授權" data-svelte-h="svelte-i6kdwx"><a href="#dns-授權">DNS 授權</a></h3> <p>設定主網域 <code data-svelte-h="svelte-1vj7x7r">diego.com</code> 將子網域 <code data-svelte-h="svelte-hxsmpd">branch.diego.com</code> 授權
上層伺服器設定：
<img src="https://hackmd.io/_uploads/ByAfijtC6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/HkgCuoFRT.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
下層伺服器設定：
<img src="https://hackmd.io/_uploads/H1wTDiYC6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
註 1：第一個的 NS 規則不能隨便設定，盡量是域名，確保全部記錄都能被解析
註 2：在指定 NS 紀錄時，若沒有自行輸入句點 (<code data-svelte-h="svelte-1p1ls1w">.</code>)，就會自動補齊名稱
例：<code data-svelte-h="svelte-10k33cn">dns.branch</code> 在 <code data-svelte-h="svelte-1vj7x7r">diego.com</code> 的 DNS 檔案就會變成 <code data-svelte-h="svelte-tkmcc2">dns.branch.diego.com.</code></p> <h3 id="請求轉送" data-svelte-h="svelte-ts4n7h"><a href="#請求轉送">請求轉送</a></h3> <p>編輯檔案：<code data-svelte-h="svelte-1ym7hrd">vim /etc/bind/named.conf.options</code> <img src="https://hackmd.io/_uploads/HkcLPiJZC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="建立大量有順序紀錄" data-svelte-h="svelte-f0xpof"><a href="#建立大量有順序紀錄">建立大量有順序紀錄</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>// 建立 test1.domain.com ~ test100.domain.com 的 A 紀錄，並指向 192.168.1.1
$GENERATE    1-100    test$.domain.com    IN    A    192.168.1.1</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/S1BI4LRAT.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="編輯版本號碼-有版本詢問時回傳特定文字" data-svelte-h="svelte-1svlfih"><a href="#編輯版本號碼-有版本詢問時回傳特定文字">編輯版本號碼 (有版本詢問時，回傳特定文字)</a></h3> <p>編輯檔案：<code data-svelte-h="svelte-1ym7hrd">vim /etc/bind/named.conf.options</code>
更改 version 下的內容為回傳的內容
<img src="https://hackmd.io/_uploads/SkogZzAca.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
查詢版本指令：<code data-svelte-h="svelte-196mv23">nslookup -debug -class=chaos -query=txt version.bind [DNS-IP]</code> <img src="https://hackmd.io/_uploads/r1V_GzA5a.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="mx-紀錄建立" data-svelte-h="svelte-168r1du"><a href="#mx-紀錄建立">MX 紀錄建立</a></h3> <p><img src="https://hackmd.io/_uploads/S1aoQbyd0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
需要 Mail Server 的 FQDN 的 A Record 來當作 MX Record 的參考
<img src="https://hackmd.io/_uploads/Byt8VbJdR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/H1V5BZJ_A.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="web-file-server" data-svelte-h="svelte-11lxpbj"><a href="#web-file-server">Web File Server</a></h2> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>// SRV1：192.168.100.201 (www.wsdomain.com.tw) SRV2：192.168.100.202
// 在 SRV1 的 /var/www/wsdomain 之下建立 /file 資料夾，提供 File Server 服務，且此服務的資料夾路徑為 SRV2 的共享資料夾 (/share/file)
mkdir /var/www/wsdomain/file
mount -t cifs -o username=root,password=Skills39,domain=wsdomain.com //192.168.100.202/file/ /var/www/wsdomain/file
// domain 參數不一定需要保留，但如果 Server 是在有建立 AD 的環境下需要保留</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>用瀏覽器輸入<code data-svelte-h="svelte-nhp48t">www.wsdomain.com.tw/file/</code>即可訪問目前目錄下的文件
<img src="https://hackmd.io/_uploads/BygaTTh93.png" alt="https://hackmd.io/_uploads/BygaTTh93.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="return-code-13-read-only" data-svelte-h="svelte-1jdfuh7"><a href="#return-code-13-read-only">Return Code 13 (Read-Only)</a></h3> <p data-svelte-h="svelte-1d8twq">若遇到錯誤並且返回代碼 13 的錯誤時可以參考以下步驟
安裝套件：<code>apt install cifs-utils</code>
建立並編輯一個檔案 (此處路徑用<code>cifs.auth</code>)：<code>vim cifs.auth</code>
檔案格式：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>user=[username]
password=[password]
domain=[domain]
// domain 參數不一定需要保留，但如果 Server 是在有建立 AD 的環境下需要保留</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-18hfx94">存檔後，即可掛載：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>mount -t cifs -o credentials=cifs.auth //192.168.100.202/file /var/www/wsdomain/file</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="查看目前目錄下檔案及目錄之權限" data-svelte-h="svelte-n9xv4n"><a href="#查看目前目錄下檔案及目錄之權限">查看目前目錄下檔案及目錄之權限</a></h2> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>ls -al</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/H1q66phq2.png" alt="https://hackmd.io/_uploads/H1q66phq2.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="批量加入使用者-for-loop" data-svelte-h="svelte-1jrn5fz"><a href="#批量加入使用者-for-loop">批量加入使用者 (for loop)</a></h2> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>//加入九個使用者，名稱為 user001~user009
for ((i=1;i&lt;=9;i++))
&gt; do
&gt; useradd user00$i
&gt; done</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="使用者和群組常用設定指令" data-svelte-h="svelte-hok9yu"><a href="#使用者和群組常用設定指令">使用者和群組常用設定指令</a></h2> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>useradd [username] //建立使用者
useradd -g [groupname] [username] //建立有初始群組的使用者
useradd -G [groupname] [username] //建立一般群組的使用者
useradd -m [username] //建立有家目錄的使用者 (/home)
useradd -p &#96;openssl passwd -1 [password]&#96; -s /bin/bash [username] //建立帶密碼且路徑為/bin/bash的使用者
userdel [username] //刪除使用者
groupadd [groupname] //創立使用者群組
usermod -a -G [groupname] [username] or gpasswd -a [username] [groupname] //將使用者加入群組
usermod -g [groupname] [username] //更改使用者的主要用戶組
usermod -s /bin/bash [username] //更改使用者預設路徑為/bin/bash
gpasswd -d [username] [groupname] //將使用者移出群組
mkhomedir_helper [username] //幫已存在的使用者創立家目錄 (/home)
rm -r /home/[username] //刪除使用者的家目錄 (/home)</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <ul data-svelte-h="svelte-a5zyjt"><li>其實在預設狀態下不論使用 useradd 或 adduser 建立的使用者根目錄都會是家目錄，以上關於家目錄的設定指令是以防萬一使用</li></ul> <h2 id="密碼常用指令" data-svelte-h="svelte-1k7cbc5"><a href="#密碼常用指令">密碼常用指令</a></h2> <p>強制使用者首次登入時更改密碼：<code data-svelte-h="svelte-19jdch5">chage -d 0 [username]</code>
限制更改密碼的最短/最大長度：
(1) 編輯密碼驗證策略：<code data-svelte-h="svelte-1jt219o">vim /etc/pam.d/common-password</code>
(2-1) 設定密碼最短長度為 8 個字元：在
<code data-svelte-h="svelte-1phnlau">password [success=1 default=ignore] pam.unix.so obscure yescrypt</code> 後面加入 <code data-svelte-h="svelte-19ylbwm">minlen=8</code> <img src="https://hackmd.io/_uploads/Hk4Cpph5h.png" alt="https://hackmd.io/_uploads/Hk4Cpph5h.png" class="rounded-lg my-2" loading="lazy" decoding="async">
(註：minlen=最短長度 maxlen=最大長度)
(2-3) 取消密碼複雜性限制：在 <code data-svelte-h="svelte-1fntbme">password requsite pam_deny.so</code> 中間加入 <code data-svelte-h="svelte-gempn1">dictcheck=0</code> <img src="https://hackmd.io/_uploads/HycQD2pp6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="dhcp-server" data-svelte-h="svelte-1ab70iw"><a href="#dhcp-server">DHCP Server</a></h2> <p data-svelte-h="svelte-2wcoxr">安裝套件：<code>apt install isc-dhcp-server</code>
編輯設定檔：<code>vim /etc/dhcp/dhcpd.conf</code></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>option domain-name "thedomain.com"; // 網域名稱

default-lease-time 600; // 預設租賃時間
max-lease-time 3600; // 最大租賃時間
authoritative;

// 網段設定 (可以只輸入這段)
subnet 10.121.210.0 netmask 255.255.255.0 &#123;
    range 10.121.210.1 10.121.210.253; // 分配IP範圍
    option domain-name-servers 8.8.8.8; // DNS 設定
    option routers 10.121.210.254; // 目標路由器IP
&#125;</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-l7hxzj">如果需要為特定電腦保留 IP 位置：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>host [主機名稱] &#123;
    hardware ethernet [MAC 位置];
    fixed-address [保留的IP位置];
&#125;</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1iclkal">編輯發位址的網卡：<code>vim /etc/default/isc-dhcp-server</code></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>INTERFACEv4="eth0" //欲發位址的網卡名稱，若有多張網卡則以空格分隔</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-kgilzd">設定完重啟服務：<code>service isc-dhcp-server restart</code></p> <h3 id="檢查-dhcp-server-已發出去的-ip-位址" data-svelte-h="svelte-h8tvec"><a href="#檢查-dhcp-server-已發出去的-ip-位址">檢查 DHCP Server 已發出去的 IP 位址</a></h3> <p data-svelte-h="svelte-1qn092x">用 tail 指令實時檢查 log ，並且濾出關於 DHCP 的紀錄</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>tail -f /var/log/syslog | grep dhcpd //僅可用於 Debian 11
tail -f journalctl | grep dhcpd | vim - //可用於 Debian 12</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="設定跨網段-dhcp-server" data-svelte-h="svelte-p74h1u"><a href="#設定跨網段-dhcp-server">設定跨網段 DHCP Server</a></h3> <p>可對現有網路介面設定子介面達成跨網段 DHCP Server
編輯網路介面設定檔：<code data-svelte-h="svelte-1tvkct9">vim /etc/network/interfaces</code>
設定網路子介面：
<img src="https://hackmd.io/_uploads/rJh1HC_qa.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>auto [主介面]:0
iface [主介面]:0 inet static
address [子介面IP位置，依照 DHCP 網段設定]
// 子介面不可設定 Gateway，會無法啟動介面
// 在編輯 DHCP 發位址的網卡時，一定要設定子介面</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/r1riL0Oqa.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="dhcp-relay" data-svelte-h="svelte-1v4vhno"><a href="#dhcp-relay">DHCP Relay</a></h3> <p>DHCP Relay Agent 可接收 Client 端所發出的 DHCP Request/Discover 封包，並轉發至指定的 DHCP Server
安裝套件：<code data-svelte-h="svelte-1t7osv3">apt install isc-dhcp-relay</code>
編輯檔案：<code data-svelte-h="svelte-47vs4a">vim /etc/etc/default/isc-dhcp-relay</code> <img src="https://hackmd.io/_uploads/Sy6hMA_qa.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>SERVERS="[你的 DHCP Server IP]"
INTERFACES="[接收 Client 請求及能與 DHCP Server 連線的網路介面]"</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="在-root-使用-rmcp-及-mv-指令前先確認是否要執行" data-svelte-h="svelte-1hcxnci"><a href="#在-root-使用-rmcp-及-mv-指令前先確認是否要執行">在 root 使用 rm，cp 及 mv 指令前先確認是否要執行</a></h2> <p>編輯 root 的 bashrc 檔案：<code data-svelte-h="svelte-1ep630o">vim ~/.bashrc</code> <img src="https://hackmd.io/_uploads/S1Lu7OZt2.png" alt="https://hackmd.io/_uploads/S1Lu7OZt2.png" class="rounded-lg my-2" loading="lazy" decoding="async">
將下面三行註解解除掉後存檔：
<img src="https://hackmd.io/_uploads/SJnFXOWKn.png" alt="https://hackmd.io/_uploads/SJnFXOWKn.png" class="rounded-lg my-2" loading="lazy" decoding="async">
最後重新載入 bashrc：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>. ~/.bashrc</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/ByRsejrka.png" alt="https://hackmd.io/_uploads/ByRsejrka.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="sudo-設定" data-svelte-h="svelte-1tbw5dq"><a href="#sudo-設定">sudo 設定</a></h2> <p data-svelte-h="svelte-upo26v">安裝設定 sudo 的套件：<code>apt install sudo</code>
修改設定檔預設編輯器從 nano 到 vim：<code>EDITOR=vim visudo</code>
編輯設定檔：<code>visudo</code></p> <h3 id="設定某些使用者或群組不需密碼即可使用-sudo" data-svelte-h="svelte-11sly8v"><a href="#設定某些使用者或群組不需密碼即可使用-sudo">設定某些使用者或群組不需密碼即可使用 sudo</a></h3> <p data-svelte-h="svelte-t73ym7">若是使用者，在使用者區域增加：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>[username]    ALL=(ALL) NOPASSWD:ALL</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1fgub3z">若是群組，在群組區域增加：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>%[groupname]    ALL=(ALL) NOPASSWD:ALL</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/r1dBMh5Yn.png" alt="https://hackmd.io/_uploads/r1dBMh5Yn.png" class="rounded-lg my-2" loading="lazy" decoding="async">
指令說明：
<img src="https://hackmd.io/_uploads/S1UXdwi03.png" alt="https://hackmd.io/_uploads/S1UXdwi03.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="限制-sudo-使用者可使用的指令" data-svelte-h="svelte-wuu0uw"><a href="#限制-sudo-使用者可使用的指令">限制 sudo 使用者可使用的指令</a></h3> <p data-svelte-h="svelte-1w639ct">先將欲設定的使用者加入 sudo 群組：<code>usermod -aG sudo [username]</code>
假設要限制 sudo 群組僅可使用 cat, mv 及 ls 三個指令，在文件的群組區域內增加：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>%sudo   ALL=(ALL:ALL) /bin/cat, /bin/mv, /bin/ls</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/ByMR2PoR3.png" alt="https://hackmd.io/_uploads/ByMR2PoR3.png" class="rounded-lg my-2" loading="lazy" decoding="async">
(註：大多的指令路徑都是在 /bin (/usr/bin) 或 /sbin 資料夾內)
最終結果：
當在 sudo 群組內的使用者使用 sudo 執行其他指令會顯示不允許執行
<img src="https://hackmd.io/_uploads/HygOaAwsC2.png" alt="https://hackmd.io/_uploads/HygOaAwsC2.png" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="log-查看-以-vim-開啟" data-svelte-h="svelte-o9kz1e"><a href="#log-查看-以-vim-開啟">log 查看 (以 vim 開啟)</a></h2> <p data-svelte-h="svelte-bjnkhy">Debian 12：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>journalctl | vim -</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="ifconfig" data-svelte-h="svelte-7xeag9"><a href="#ifconfig">ifconfig</a></h2> <p data-svelte-h="svelte-1dy7bj5">ifconfig 指令已於 Debian 12 上移除，不過安裝 net-tools 套件後即可使用</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>apt install net-tools</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="硬碟設定" data-svelte-h="svelte-1f80tvu"><a href="#硬碟設定">硬碟設定</a></h2> <p>在 VMware 掛載了多顆 SCSI 硬碟到 Debian 會在目錄 <code data-svelte-h="svelte-1fxnrw">/dev</code> 下顯示，編號從 <code data-svelte-h="svelte-t73ocs">sda</code> 開始排序，若尾碼帶有數字代表此硬碟的分區代號，像是 <code data-svelte-h="svelte-1tm02pa">sda1、sda2、sda5</code> 等分區都是從 <code data-svelte-h="svelte-t73ocs">sda</code> 硬碟分割出來的
<img src="https://hackmd.io/_uploads/rkrSr_nCa.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/rk9mHd2C6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
也可以使用指令 <code data-svelte-h="svelte-1h6t8k">fdisk -l</code> 查看硬碟資訊
<img src="https://hackmd.io/_uploads/ry6fu_2A6.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="掛載" data-svelte-h="svelte-1r0i2xe"><a href="#掛載">掛載</a></h3> <p data-svelte-h="svelte-lsnq8x">使用指令掛載硬碟：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>mkdir /data1 // 先建立一個資料夾，為掛載的目標資料夾
mount /dev/[disk_code] /data1</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/H1SAdu3Ap.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
若遇到 wrong fs type 問題可能是硬碟還未初始化，可透過指令格式化硬碟：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>mkfs -t ext4 /dev/[disk_code]
// 在使用 mkfs 指令時需要指定硬碟格式，通常為 ext4
// 而使用 mount 時若硬碟格式是 ext4 則無需特別指定</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/SJoFYOh06.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="sed-stream-editor" data-svelte-h="svelte-1jpgfoy"><a href="#sed-stream-editor">sed (Stream Editor)</a></h2> <p data-svelte-h="svelte-mhr5zx">sed 適合用於更改大量檔案且要修改的資料皆相同的時候</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>// 將檔案的第 12 行的 /var/www/html 更改為 /home/user
sed -i '12s#/var/www/html#/home/user#' [file_name]</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">-i：於文件中執行操作</span></div><div class='line'><span style="color: undefined">12：更改文件的第 12 行</span></div><div class='line'><span style="color: undefined">s：進行替換操作</span></div><div class='line'><span style="color: undefined">#：分隔符號</span></div><div class='line'><span style="color: undefined">a：加入文字操作</span></div></code></div></pre><!-- HTML_TAG_END --> <p>可以寫成一個 for loop script：
<img src="https://hackmd.io/_uploads/BJS-zUCCa.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
根據語法變化，如果要放 Tab 在 Debian 視情況使用 <code data-svelte-h="svelte-k4570">\t</code> 或 <code data-svelte-h="svelte-1edbfnw">\\\t</code></p> <h2 id="echo-html" data-svelte-h="svelte-natx0g"><a href="#echo-html">echo html</a></h2> <p data-svelte-h="svelte-1195szi">適合用於 for 迴圈製造網頁</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>echo "&lt;h1&gt;HTML Content&lt;/h1&gt;" &gt; [file].html</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p><img src="https://hackmd.io/_uploads/ryI2vU0Ra.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/H1savIC06.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="chrony-ntp-client" data-svelte-h="svelte-12wuvrt"><a href="#chrony-ntp-client">chrony (NTP Client)</a></h2> <p data-svelte-h="svelte-ochhgj">安裝套件：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>apt install chrony</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-rai2wg">編輯設定檔：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>vim /etc/chrony/chrony.conf</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>將預設的 pool 註解，新增一行 pool 加入自己的 NTP Server
<img src="https://hackmd.io/_uploads/rJs8Lelk0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p data-svelte-h="svelte-mfh653">重新啟動服務：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>service chrony restart</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p>使用指令 <code data-svelte-h="svelte-zzgs5e">chronyc sources</code> 可查看當前 NTP 狀態：
<img src="https://hackmd.io/_uploads/r1c0IggkC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="ftp-server-vsftpd" data-svelte-h="svelte-1l6g50h"><a href="#ftp-server-vsftpd">FTP Server (vsftpd)</a></h2> <p data-svelte-h="svelte-ochhgj">安裝套件：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" sudo="="><div class='code-container'><code>apt install vsftpd</code></div></pre><!-- Note from shiki-twoslash: the language sudo== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="使用-ipv4" data-svelte-h="svelte-1vtfbj8"><a href="#使用-ipv4">使用 IPv4</a></h3> <p>如果要允許 IPv4，必須先將 IPv6 停用，只能<strong data-svelte-h="svelte-1k0tgnv">二擇一</strong> <img src="https://hackmd.io/_uploads/SJD1qlXyR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="允許-root-登入" data-svelte-h="svelte-1vrg7pg"><a href="#允許-root-登入">允許 Root 登入</a></h3> <p>將 <code data-svelte-h="svelte-4h59b4">pam_service_name</code> 從 <code data-svelte-h="svelte-ztxiqp">vsftpd</code> 改成 <code data-svelte-h="svelte-c71s74">ftp</code> <img src="https://hackmd.io/_uploads/rkAyUgmyR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
這樣 vsftpd 就會到檔案 <code data-svelte-h="svelte-fwj8za">/etc/ftpusers</code> 去找允許登入的使用者
<img src="https://hackmd.io/_uploads/BJ5I8emyA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
預設的 <code data-svelte-h="svelte-ztxiqp">vsftpd</code> 是到 <code data-svelte-h="svelte-1r8ahx9">/etc/shells</code> 去找與以下 shell 相符的使用者
<img src="https://hackmd.io/_uploads/ByrZwgmkA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="參數解釋" data-svelte-h="svelte-16imikv"><a href="#參數解釋">參數解釋</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined"># 允許匿名使用者登入</span></div><div class='line'><span style="color: undefined">anonymous_enable=YES</span></div><div class='line'><span style="color: undefined"># 匿名使用者目錄</span></div><div class='line'><span style="color: undefined">anon_root=(none)</span></div><div class='line'><span style="color: undefined"># 允許本機使用者登入</span></div><div class='line'><span style="color: undefined">local_enable=YES</span></div><div class='line'><span style="color: undefined"># 允許上傳檔案 (全局設定)</span></div><div class='line'><span style="color: undefined">write_enable=YES</span></div></code></div></pre><!-- HTML_TAG_END --> <h3 id="ssl" data-svelte-h="svelte-19qfsya"><a href="#ssl">SSL</a></h3> <p><img src="https://hackmd.io/_uploads/BkdnLMQ10.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined"># 導入憑證檔案</span></div><div class='line'><span style="color: undefined">rsa_cert_file=/etc/ca/ooo.crt</span></div><div class='line'><span style="color: undefined"># 導入憑證鑰匙</span></div><div class='line'><span style="color: undefined">rsa_private_key_file=/etc/ca/ooo.key</span></div><div class='line'><span style="color: undefined"># 啟用 SSL 功能</span></div><div class='line'><span style="color: undefined">ssl_enable=YES</span></div></code></div></pre><!-- HTML_TAG_END --> <h2 id="靜態路由-ip-route" data-svelte-h="svelte-fmbz4u"><a href="#靜態路由-ip-route">靜態路由 (ip route)</a></h2> <p data-svelte-h="svelte-2uv36a">注意：<strong>用直接輸入指令的方式無法在重開機或重啟服務後保留</strong></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>ip route add [destination-network_segment] dev [network-interface]
ip route add [destination-network_segment] via [nexthop-router-ip]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1vqvj5o">dev：設定這網段的要走哪個介面卡為路由
via：設定這網段的下一跳躍路徑為哪台路由器</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>// 設靜態路由，讓 192.168.10.0/24 和 10.0.0.0/28 的網段可以互通
// SRV1：192.168.10.1 (eth0)、10.0.0.2 (eth1)
// SRV2：10.0.0.1 (eth0)
SRV1 上的設定：
ip route 10.0.0.0/28 dev eth1 (若 default 路由就是 eth1 也可以略過不設定)
SRV2 上的設定：
ip route 192.168.10.0/24 via 10.0.0.2</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h3 id="重啟後保留靜態路由設定" data-svelte-h="svelte-ijgpmw"><a href="#重啟後保留靜態路由設定">重啟後保留靜態路由設定</a></h3> <p>將 ip route 寫到網路介面的設定檔：<code data-svelte-h="svelte-1vdws8d">/etc/network/interfaces</code> <img src="https://hackmd.io/_uploads/BJ6tCNTw0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
並將寫法改成</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>pre-up ip addr flush eth0
// 在介面啟動之前先清除介面資料
up ip route replace [destination-network_segment] via [nexthop-router-ip] dev [network-interface]
// replace 為避免二次新增路由導致錯誤</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <p data-svelte-h="svelte-5ob2m5">重啟電腦或 <code>service networking restart</code> 的時候就會自動加到路由表內</p> <h2 id="playbook-ansible" data-svelte-h="svelte-1v5i5vo"><a href="#playbook-ansible">PlayBook (Ansible)</a></h2> <p data-svelte-h="svelte-1wn0q3d">執行指令：<code>ansible-playbook -v [your_yaml]</code> <code>-v</code>：表示列出執行詳細資訊
可用 <code>ansible-doc [function]</code> 官方內建 Document 查看功能的變數用途</p> <h3 id="bash-commends-on-playbook" data-svelte-h="svelte-19a1uhy"><a href="#bash-commends-on-playbook">Bash commends on PlayBook</a></h3> <h4 id="method-1-command" data-svelte-h="svelte-1h4q5u6"><a href="#method-1-command">Method 1 (command)</a></h4> <p><img src="https://hackmd.io/_uploads/SJbfn1ZDR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
可直接用 command 鍵值輸入 bash 指令</p> <h4 id="method-2" data-svelte-h="svelte-1cfi42n"><a href="#method-2">Method 2</a></h4> <p><img src="https://hackmd.io/_uploads/BJKRpDDQC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-13x8bpv">gather_facts</code>：蒐集主機相關資料，並存入資料庫中，若日後有需要可使用，簡單的腳本可關閉此功能
<code data-svelte-h="svelte-1wlaodd">become</code>：提升執行權限，若啟用則會以 sudo 權限執行指令，若以 root 使用者執行則可以無需此指令</p> <p>簡單的複製檔案腳本，若有需要以 Echo 顯示訊息，則需要搭配 register 跟 debug 來使用
有 Echo：
<img src="https://hackmd.io/_uploads/rykqAvvQ0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
無 Echo：
<img src="https://hackmd.io/_uploads/ryJ4yOvm0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="file-檔案資料夾處理" data-svelte-h="svelte-1el3sev"><a href="#file-檔案資料夾處理">file (檔案、資料夾處理)</a></h3> <p><img src="https://hackmd.io/_uploads/SJc6hzaD0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-13wngm1">state</code> 可選變數說明：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">absent = 刪除檔案或資料夾</span></div><div class='line'><span style="color: undefined">directory = 建立資料夾</span></div><div class='line'><span style="color: undefined">touch = 建立檔案</span></div><div class='line'><span style="color: undefined">hard = 建立檔案硬連結 (需有 src、dest)</span></div><div class='line'><span style="color: undefined">link = 建立檔案軟連結 (需有 src、dest)</span></div></code></div></pre><!-- HTML_TAG_END --> <h3 id="lineinfile-編輯檔案內文字" data-svelte-h="svelte-ao4d8m"><a href="#lineinfile-編輯檔案內文字">lineinfile (編輯檔案內文字)</a></h3> <p>新增內容：
<img src="https://hackmd.io/_uploads/rkeXPWpP0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/r1NIw-awR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-5222v6">|</code>：當有多行文字需要輸入到文件時可以使用
刪除內容：
<img src="https://hackmd.io/_uploads/BJWZakTDC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
匹配 /etc/bind/db.wsc2024 的內容，內容為 “IN  A 192.168.1.1”，若偵測到就會將該行刪除
刪除文件需要將 <code data-svelte-h="svelte-13wngm1">state</code> 設為 <code data-svelte-h="svelte-11q1p09">absent</code> (預設為 <code data-svelte-h="svelte-zwm5ar">present</code>) 並搭配 <code data-svelte-h="svelte-93ob71">regexp</code> (正規表示匹配) (或 <code data-svelte-h="svelte-1netlkt">regex </code>) 使用，<code data-svelte-h="svelte-ukk4fo">^</code> 表示行的開頭，<code data-svelte-h="svelte-44q85m">$</code> 表示行的結尾
若只用 <code data-svelte-h="svelte-ukk4fo">^</code> 代表只取開頭，只用 <code data-svelte-h="svelte-44q85m">$</code> 代表只取結尾
<strong data-svelte-h="svelte-yql6m3">注意：只要匹配到就會整行刪除！</strong></p> <p>示例：
<img src="https://hackmd.io/_uploads/ryWRvG6vA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
原檔案：
<img src="https://hackmd.io/_uploads/Hk-NR-awR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
執行後：
<img src="https://hackmd.io/_uploads/SyXbdMpvR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p>換個匹配對象：
<img src="https://hackmd.io/_uploads/rkN_OzawC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
執行後
<img src="https://hackmd.io/_uploads/S1v8_Mpv0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p>只用 <code data-svelte-h="svelte-44q85m">$</code> 取結尾：
<img src="https://hackmd.io/_uploads/ryPfYfpPR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/rkQWKfpDR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="blockinfile" data-svelte-h="svelte-qoypto"><a href="#blockinfile">blockinfile</a></h3> <p>與 lineinfile 相似
<img src="https://hackmd.io/_uploads/HydBKC3vA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-4i67c2">marker</code>：會在更動行數的頭尾各新增一行作為標示，預設內容為 <code data-svelte-h="svelte-z7zv9i"># BEGIN ANSIBLE MANAGED BLOCK</code> 跟 <code data-svelte-h="svelte-3h2lr2"># END ANSIBLE MANAGED BLOCK</code> <code data-svelte-h="svelte-1y1ums9">block</code>：表示要在檔案內新增甚麼內容
<img src="https://hackmd.io/_uploads/HJpIC0nv0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
預設的 <code data-svelte-h="svelte-4i67c2">marker</code> 就算為空還是會有預設的空格，可以透過 lineinfile 匹配刪除空格</p> <h3 id="replace-全局替換" data-svelte-h="svelte-1yh1wo7"><a href="#replace-全局替換">replace (全局替換)</a></h3> <p><img src="https://hackmd.io/_uploads/BkdFrzpwR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
將全部匹配到 Listen 的內容全部替換為 I dont want to listen
<code data-svelte-h="svelte-lswoi">replace</code>：後面接要替換上去的內容
原檔案：
<img src="https://hackmd.io/_uploads/Hk-NR-awR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
執行後：
<img src="https://hackmd.io/_uploads/BkwKIGawR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p>換個寫法：
<img src="https://hackmd.io/_uploads/rJ-fvf6vC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
執行後：
<img src="https://hackmd.io/_uploads/HkBPPf6vC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="copy-複製檔案" data-svelte-h="svelte-dk79tg"><a href="#copy-複製檔案">copy (複製檔案)</a></h3> <p><img src="https://hackmd.io/_uploads/Bk5HifpvC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-1fkgjes">src</code>：檔案的來源
<code data-svelte-h="svelte-1bztso">dest</code>：複製後的檔案的目的地</p> <h3 id="apt-安裝-apt-套件" data-svelte-h="svelte-elcpcy"><a href="#apt-安裝-apt-套件">apt (安裝 apt 套件)</a></h3> <h4 id="單套件" data-svelte-h="svelte-1vngudr"><a href="#單套件">單套件</a></h4> <p><img src="https://hackmd.io/_uploads/B1enwqfv0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-1x67wg7">name</code>：愈安裝的套件名稱</p> <h4 id="多套件" data-svelte-h="svelte-z0r5ob"><a href="#多套件">多套件</a></h4> <p><img src="https://hackmd.io/_uploads/HyPca9MDC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-p01k54">pkg</code>：選擇套件</p> <h3 id="stat-檢查檔案或路徑是否存在" data-svelte-h="svelte-199gvjj"><a href="#stat-檢查檔案或路徑是否存在">stat (檢查檔案或路徑是否存在)</a></h3> <p><img src="https://hackmd.io/_uploads/rkGM0NhvC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-1nur1y3">path</code>：要檢查的檔案或路徑
<code data-svelte-h="svelte-h9awu3">exist</code>：用來存放結果的暫存器</p> <p>判斷結果是否執行動作：
<img src="https://hackmd.io/_uploads/BJJiJH2DC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
若 /etc/bind/db.wsc2024 的檔案不存在，則執行上面的動作
<code data-svelte-h="svelte-fjmxyg">when</code>：根據暫存器回傳結果決定是否要執行</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">stat 變數：</span></div><div class='line'><span style="color: undefined">exist.stat.exists = 當 exist 暫存器內路徑的檔案存在時執行</span></div><div class='line'><span style="color: undefined">not exist.stat.exists = 當 exist 暫存器內路徑的檔案不存在時執行</span></div><div class='line'><span style="color: undefined"></span></div><div class='line'><span style="color: undefined">exist.stat.isdir = 當 exist 暫存器內路徑為資料夾時執行</span></div><div class='line'><span style="color: undefined">not exist.stat.isdir = 當 exist 暫存器內路徑為檔案或不存在時執行</span></div></code></div></pre><!-- HTML_TAG_END --> <h3 id="read_csv-讀取-csv-檔案" data-svelte-h="svelte-137f1nc"><a href="#read_csv-讀取-csv-檔案">read_csv (讀取 CSV 檔案)</a></h3> <p><img src="https://hackmd.io/_uploads/SyyYoTmuC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-o4kdo8">fieldnames</code>：設定 CSV 的 column (列名稱)</p> <h3 id="user-使用者建立及管理" data-svelte-h="svelte-6fygyw"><a href="#user-使用者建立及管理">user (使用者建立及管理)</a></h3> <p><img src="https://hackmd.io/_uploads/HkNA6pmOA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-1x67wg7">name</code>：使用者名稱
<code data-svelte-h="svelte-mu0rz9">password</code>：使用者密碼，需透過雜湊函數加密
<code data-svelte-h="svelte-78vwa3">group</code>：使用者群組，<strong data-svelte-h="svelte-j63yxz">若本機沒有則需要事先建立</strong> <code data-svelte-h="svelte-1hdzauk">uid</code>：使用者 UID，需確保變數型態為整數
<code data-svelte-h="svelte-x4ikgk">shell</code>：使用者 Shell 路徑，通常為 <code data-svelte-h="svelte-107dxid">/bin/bash</code> <code data-svelte-h="svelte-12cat00">create_home</code>：是否建立使用者家目錄 (home)</p> <h4 id="loop" data-svelte-h="svelte-1cmyjoy"><a href="#loop">loop</a></h4> <p data-svelte-h="svelte-y3i6rt"><code>loop</code>：以物件或變數或字串做迴圈，以變數 <code>item</code> 作為 loop 當前所跑到的值</p> <h3 id="read_csv--user-以-csv-檔案匯入-users" data-svelte-h="svelte-12luuvr"><a href="#read_csv--user-以-csv-檔案匯入-users">read_csv + user (以 CSV 檔案匯入 Users)</a></h3> <p><img src="https://hackmd.io/_uploads/BkP1mCQ_R.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="debug--msg-print-out-輸出文字" data-svelte-h="svelte-1etic72"><a href="#debug--msg-print-out-輸出文字">debug + msg (print out) (輸出文字)</a></h3> <p><img src="https://hackmd.io/_uploads/SkEpPH2vC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
用 shell 指令 echo hostname 並輸出
<code data-svelte-h="svelte-1xsfixj">stdout</code>：標準輸出，一般暫存器無特殊後綴都會需要
<img src="https://hackmd.io/_uploads/ByqmkU2PA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
若無加 <code data-svelte-h="svelte-1xsfixj">stdout</code>：
<img src="https://hackmd.io/_uploads/SJnskI3vC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p>特殊：<code data-svelte-h="svelte-1nk32my">stat</code> 的暫存器可依據需要做判斷的資料型態調整後綴
<img src="https://hackmd.io/_uploads/rkuq6r3DR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/S16YArnw0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="vars_prompt-輸入值" data-svelte-h="svelte-srsx2d"><a href="#vars_prompt-輸入值">vars_prompt (輸入值)</a></h3> <p>Official Document Example:
<img src="https://hackmd.io/_uploads/SyEaA7NOR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="easy-rsa-ca-tool" data-svelte-h="svelte-l1mkp0"><a href="#easy-rsa-ca-tool">Easy-RSA (CA Tool)</a></h2> <p data-svelte-h="svelte-94c93z">Easy-RSA 是 OpenVPN 的自簽根憑證及簽證工具
安裝指令：<code>apt install openvpn easy-rsa</code>
Easy-RSA 的預設路徑在<code>/usr/share/easy-rsa</code>，可移動到 <code>/etc/openvpn/easy-rsa</code></p> <h3 id="自簽-root-ca" data-svelte-h="svelte-1j07von"><a href="#自簽-root-ca">自簽 Root CA</a></h3> <p data-svelte-h="svelte-195swsl">將當前工作路徑切換到 Easy-RSA 的路徑，便於作業
<code>cd /etc/openvpn/easy-rsa</code>
先初始化 Easy-RSA 給 Root CA 使用的 PKI
<code>./easyrsa init-pki</code>
編輯 Root CA 的 Profile，屆時會套用到生成的 Root CA 上
<code>vim pki/vars</code>
參數說明：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">set_var EASYRSA_DN：可選 org 或 cn_only，若選 cn_only 只會有 Common Name 的資料</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_COUNTRY：Country Name (國家)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_PROVINCE：Province Name(省/州)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_CITY：City (城市)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_ORG：Organization (公司/組織)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_EMAIL：Email (電子郵件)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_OU：Organization Unit (組織單位/部門)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_KEY_SIZE：金鑰位元數</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_REQ_DN：Common Name (一般 CA 為你要保護的網域名稱，Root CA 就當作為此憑證的名字)</span></div><div class='line'><span style="color: undefined">set_var EASYRSA_DIGEST：使用的加密模型</span></div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-19gq906">建立 Root CA ：
<code>./easyrsa build-ca nopass</code> (<code>nopass</code>：不設定密碼)</p> <h3 id="簽署旗下的-request" data-svelte-h="svelte-189xhpw"><a href="#簽署旗下的-request">簽署旗下的 Request</a></h3> <p data-svelte-h="svelte-1llqedg">先導入請求到 Easy-RSA 內暫存：<code>./easyrsa import-req [request-file-path] [register-name]</code>
簽證暫存的檔案：<code>./easyrsa sign_req [ca-type] [register-name]</code> <code>ca-type</code>：若作為服務或伺服器使用，值通常為 <code>server</code> 或 <code>ca</code> <strong>若使用 ca 模式就不會將 SAN 值寫入憑證</strong></p> <h2 id="openconnect-ssl-vpn-server-ocserv" data-svelte-h="svelte-lysikq"><a href="#openconnect-ssl-vpn-server-ocserv">OpenConnect SSL VPN Server (ocserv)</a></h2> <p data-svelte-h="svelte-ohazwf">反正就是比 OpenVPN 好用的 VPN Server (吧)，Client 通常會使用 AnyConnect 連結
安裝指令：<code>apt install ocserv</code>
編輯設定檔：<code>vim /etc/ocserv/ocserv.conf</code>
參數說明：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">listen-port：TCP 監聽的介面的 IP 位址 (預設為全介面都監聽)</span></div><div class='line'><span style="color: undefined">udp-listen-host：UDP 監聽的介面的 IP 位址 (預設為全介面都監聽)</span></div><div class='line'><span style="color: undefined">tcp-port：TCP 接入 VPN 的監聽 Port</span></div><div class='line'><span style="color: undefined">udp-port：UDP 接入 VPN 的監聽 Port</span></div><div class='line'><span style="color: undefined">socket-file：用於進程的作業檔案的路徑 (若 VPN 出問題可將值換為 /run/ocserv.socket)</span></div><div class='line'><span style="color: undefined">run-as-user：執行 ocserv 進程的使用者 (無須更改)</span></div><div class='line'><span style="color: undefined">run-as-group：執行 ocserv 進程的群組 (無須更改)</span></div><div class='line'><span style="color: undefined">server-cert：用於 VPN 憑證的路徑 (用與 Web Server 一樣的請求產生方式)</span></div><div class='line'><span style="color: undefined">server-key：用於 VPN 憑證的私鑰的路徑</span></div><div class='line'><span style="color: undefined">dh-params：密鑰交換協議檔案路徑 (需透過指令生成)</span></div><div class='line'><span style="color: undefined">ca-cert：簽署 VPN 憑證的 CA 根憑證</span></div></code></div></pre><!-- HTML_TAG_END --> <h2 id="debian-加入-windows-server-ad-網域" data-svelte-h="svelte-yn2q1o"><a href="#debian-加入-windows-server-ad-網域">Debian 加入 Windows Server AD 網域</a></h2> <p>安裝 realm 及加入網域的必要套件：<code data-svelte-h="svelte-btno2d">apt install realmd ascli sssd sssd-tools samba-common-bin</code>
可先搜尋網域是否有被偵測到：<code data-svelte-h="svelte-9oyzms">realm discover [domain-name]</code> <img src="https://hackmd.io/_uploads/H1kCKFtwC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
加入網域：<code data-svelte-h="svelte-6adyt8">realm join -v [domain-name]</code> <img src="https://hackmd.io/_uploads/rkJMqYFPR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-u383ll">-v, --verbose</code> 表示會將指令的進度跟詳細作業列印出來</p> <h3 id="不使用完整網域使用者名稱並允許使用者登入" data-svelte-h="svelte-1hyo51p"><a href="#不使用完整網域使用者名稱並允許使用者登入">不使用完整網域使用者名稱並允許使用者登入</a></h3> <p>編輯 <code data-svelte-h="svelte-4ftg8b">/etc/sssd/sssd.conf</code>，將 <code data-svelte-h="svelte-11x877">fallback_homedir</code> 值設為 <code data-svelte-h="svelte-ff00uh">/home/%u</code>、<code data-svelte-h="svelte-wm929w">use_fully_qualified_names</code> 值設為 <code data-svelte-h="svelte-1yqjz6r">False</code>、<code data-svelte-h="svelte-f1jyb8">access_provider</code> 值設為 <code data-svelte-h="svelte-1gk0qnu">simple</code> <img src="https://hackmd.io/_uploads/B1N_E1X_C.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
存檔退出後，重啟服務：<code data-svelte-h="svelte-v8ubtb">service sssd restart</code>
若需要幫使用者建立家目錄 (home) 可輸入指令，將會在使用者登入後建立：<code data-svelte-h="svelte-1apsclq">pam-auth-update --enable mkhomedir</code> <img src="https://hackmd.io/_uploads/ByXlvJ7uC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/BJmHvkQdA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
如果沒有建立家目錄會顯示：
<img src="https://hackmd.io/_uploads/ByC1_y7dR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="解壓縮-targz" data-svelte-h="svelte-hler9o"><a href="#解壓縮-targz">解壓縮 tar.gz</a></h2> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="="><div class='code-container'><code>tar zxf [path_of_source.tar.gz] [export_destination_folder_path]</code></div></pre><!-- Note from shiki-twoslash: the language bash== was not set up for Shiki to use, and so there is no code highlighting --><!-- HTML_TAG_END --> <h2 id="vlan-子介面" data-svelte-h="svelte-g2g1wk"><a href="#vlan-子介面">VLAN 子介面</a></h2> <p>安裝 VLAN 套件：<code data-svelte-h="svelte-7ur38t">apt install vlan</code>
啟用 VLAN 功能：<code data-svelte-h="svelte-19b7nu2">modprobe 8021q</code>
編輯網卡介面設定檔：<code data-svelte-h="svelte-1tvkct9">vim /etc/network/interfaces</code> <img src="https://hackmd.io/_uploads/B1QgxDfd0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <strong data-svelte-h="svelte-1s0unfe">VLAN 介面名稱可以直接在設定檔編輯，無需在 rule 裡設定</strong> <code data-svelte-h="svelte-1rm6xbr">vlan-raw-device</code>：表示這個 VLAN Interface 是從哪張網卡分出來的
存檔後退出執行：<code data-svelte-h="svelte-14elun0">service networking restart</code> <img src="https://hackmd.io/_uploads/SykueDMd0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h3 id="跨-vlan-使用-dhcp-server--dhcp-relay" data-svelte-h="svelte-yvq2tv"><a href="#跨-vlan-使用-dhcp-server--dhcp-relay">跨 VLAN 使用 DHCP Server + DHCP Relay</a></h3> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">VLAN 10：172.16.10.0/24</span></div><div class='line'><span style="color: undefined">VLAN 20：172.16.20.0/24</span></div><div class='line'><span style="color: undefined">設定 VLAN 20 的 DHCP Server (172.16.20.20) 要能提供 Dynamic IP 給 VLAN 10 的 Client</span></div><div class='line'><span style="color: undefined">中間有台 Gateway 為 Trunk 介面，同時也是 DHCP Relay Agent</span></div></code></div></pre><!-- HTML_TAG_END --> <p>DHCP Server 端設定：
<img src="https://hackmd.io/_uploads/rJg0lOfOR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
給兩個網段的 DHCP，一個自己 VLAN 網段，一個要發 IP 的其他 VLAN 網段，<strong data-svelte-h="svelte-9m9bf5">但自己 VLAN 網段的部分不做任何設定</strong></p> <p>Gateway 對 DHCP Relay Agent 的設定
<img src="https://hackmd.io/_uploads/H16pEOM_A.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p>Client 動態取得 IP Address 後：
<img src="https://hackmd.io/_uploads/SJzHSuMdA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="設定介面啟用或關閉時的行為" data-svelte-h="svelte-2vypr6"><a href="#設定介面啟用或關閉時的行為">設定介面啟用或關閉時的行為</a></h2> <div class="overflow-x-auto mb-4"><table class="table w-full"><thead data-svelte-h="svelte-zjcp9j"><tr><th>指令</th> <th>時機表示</th></tr></thead> <tbody data-svelte-h="svelte-mmc2h5"><tr><td>pre-up</td> <td>介面啟用前</td></tr> <tr><td>up</td> <td>介面啟用時</td></tr> <tr><td>post-up</td> <td>介面啟用後</td></tr> <tr><td>pre-down</td> <td>介面關閉前</td></tr> <tr><td>down</td> <td>介面關閉時</td></tr> <tr><td>post-down</td> <td>介面關閉後</td></tr></tbody></table></div> <p data-svelte-h="svelte-19npn7w">後面可以接要同時執行的指令</p> <p><img src="https://hackmd.io/_uploads/S10awuGuR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="strongswan-ipsec--ikev1v2" data-svelte-h="svelte-17t48sg"><a href="#strongswan-ipsec--ikev1v2">StrongSwan (IPSec &amp; IKEv1、v2)</a></h2> <p>安裝套件：<code data-svelte-h="svelte-1bc6d5u">apt install strongswan</code>
編輯設定檔：<code data-svelte-h="svelte-es5g5u">vim /etc/ipsec.conf</code> <img src="https://hackmd.io/_uploads/B11oChMuA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <code data-svelte-h="svelte-ubkgpk">strictcrlpolicy</code>：驗證時是否對遠端的 SSL 憑證嚴格地檢查是否包含 CRL (通常為 <code data-svelte-h="svelte-13hb7sz">no</code>)
<code data-svelte-h="svelte-18vr0kj">uniqueids</code>：用於控制多次連線 (通常為 <code data-svelte-h="svelte-13hb7sz">no</code>)</p> <p data-svelte-h="svelte-xl5s3b"><code>keyexchange</code>：要採用的 IKE 版本，依據你在 Cisco Router 端的設定或另一端 Linux 設定
<code>left</code>：遠端裝置
<code>right</code>：本地裝置
<code>ike</code>：選擇的 IKE 加密演算法套件，分 3 個部分組成，用<code>-</code>連接，第一部分加密算法：3des，aes[encryption_bit] 等，第二部分認證算法：md5，sha1，sha256 等，第三部分 DH 算法：modp[hash_bits] 等
<code>esp</code>：選擇的 ESP 加密演算法套件，分 3 個部分組成，用<code>-</code>連接，第一部分加密算法：3des，aes[encryption_bit] 等，第二部分認證算法：md5，sha1，sha256 等，第三部分 DH 算法：modp[hash_bits] 等
<a href="https://docs.strongswan.org/docs/5.9/config/IKEv2CipherSuites.html" rel="nofollow noopener noreferrer external" target="_blank">其他加密套件可參考官方 Document (IKEv2)</a></p> <h3 id="建立用於-ipsec-的-tunnel" data-svelte-h="svelte-1okz82n"><a href="#建立用於-ipsec-的-tunnel">建立用於 IPSec 的 Tunnel</a></h3> <p>編輯網卡介面設定檔：<code data-svelte-h="svelte-1tvkct9">vim /etc/network/interfaces</code> <img src="https://hackmd.io/_uploads/rkrrYlXuR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <p data-svelte-h="svelte-13dgjvv">新增 Tunnel 指令，需在介面啟用前添加，所以使用 <code>pre-up</code>：</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF"><div class='code-container'><code><div class='line'><span style="color: undefined">pre-up ip tunnel add [tunnel_name] mode gre remote [remote_ip] local [local_ip] ttl 255</span></div></code></div></pre><!-- HTML_TAG_END --> <p>其他兩則刪除指令可自行評估是否需要，可能會出現錯誤
<img src="https://hackmd.io/_uploads/r1aN5eQOC.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
Cisco Router 端：
<img src="https://hackmd.io/_uploads/HkePilXdR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"> <img src="https://hackmd.io/_uploads/BJwc9eQd0.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
從中間 Router (ISP) 抓包，封包類型從 ICMP 變為 ESP，表示已經過加密：
<img src="https://hackmd.io/_uploads/HyOboeXuA.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p> <h2 id="frrouting-frr" data-svelte-h="svelte-1sehmt7"><a href="#frrouting-frr">FRRouting (FRR)</a></h2> <p>FRR 是一款路由工具，支援 BGP / OSPF / EIGRP / RIP 等常見協定
安裝套件：<code data-svelte-h="svelte-j1ljko">apt install frr</code>
編輯：<code data-svelte-h="svelte-1s2tdw6">vim /etc/frr/daemons</code>
將需要的服務的值改為 <code data-svelte-h="svelte-19ypsff">yes</code>，若有 Process Code 的需求，可使用 instances
假設開啟 OSPF 的 Process Code 1，就是 <code data-svelte-h="svelte-13i6dcp">ospfd_instances=1</code>
註：若 OSPF 使用 Process Code 則無法宣告網段，僅可在介面裡宣告
<img src="https://hackmd.io/_uploads/HJubEdmOR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async">
存檔退出後重啟服務：<code data-svelte-h="svelte-1gn7jbs">service frr restart</code>
使用指令進入 FRR：<code data-svelte-h="svelte-1grhrkw">vtysh</code>，操作指令與 Cisco IOS 相似
<img src="https://hackmd.io/_uploads/HJuMYqmdR.png" alt="image" class="rounded-lg my-2" loading="lazy" decoding="async"></p></main> <div class="divider mt-4 mb-0"></div> <div><a href="/?tags=Linux" class="btn btn-sm btn-ghost normal-case mt-2 mr-2 p-category">#Linux </a><a href="/?tags=OS" class="btn btn-sm btn-ghost normal-case mt-2 mr-2 p-category">#OS </a></div></div>  </article> <footer id="footer" class="footer footer-center bg-base-300 text-base-content shadow-inner p-8 md:rounded-box sticky bottom-0 z-0 md:static "><div class="prose"><p><a href="/atom.xml" rel="noopener noreferrer external" target="_blank">Feed</a> <span class="mr-1" data-svelte-h="svelte-1qx196n">·</span><a href="/sitemap.xml" rel="noopener noreferrer external" target="_blank">Sitemap</a> <span class="mr-1" data-svelte-h="svelte-1qx196n">·</span><a href="mailto:kkai1009@gmail.com" rel="noopener noreferrer external" target="_blank">kkai1009@gmail.com</a>  <br>
      Copyright © 2024 Shellkai Huang <br>
      Powered by
      <a rel="noopener noreferrer external" target="_blank" class="tooltip tooltip-secondary hover:text-secondary" data-tip="🌸 [δ] - Based on MDsveX & SvelteKit 🌸" href="https://github.com/importantimport/urara" data-svelte-h="svelte-urea7w">Urara</a> </p></div></footer></div></div></div> 
			<script type="application/json" data-sveltekit-fetched data-url="/posts.json">{"status":200,"statusText":"","headers":{},"body":"[{\"title\":\"Web\",\"summary\":\"Self-Signed Certificate + OpenSSL + ADCS + Nginx & Apache2\",\"image\":\"/badssl.png\",\"alt\":\"Shellkai Huang\",\"created\":\"2024-09-16T00:00:00.000Z\",\"updated\":\"2024-09-16T00:00:00.000Z\",\"tags\":[\"Web\",\"SSL\",\"OS\",\"Nginx\",\"Apache2\"],\"images\":[],\"slug\":\"/certificate-ca-server/+page.svelte.md\",\"path\":\"/certificate-ca-server\",\"toc\":[{\"depth\":2,\"slug\":\"windows-server-簽署-enterprise-ca\",\"title\":\"Windows Server 簽署 (Enterprise CA)\"},{\"depth\":2,\"slug\":\"debian-簽證使用-windows-server\",\"title\":\"Debian (簽證使用 Windows Server)\"},{\"depth\":2,\"slug\":\"預設-html-網頁設定\",\"title\":\"預設 html 網頁設定\"},{\"depth\":2,\"slug\":\"web-server-apache2\",\"title\":\"Web Server (apache2)\"},{\"depth\":3,\"slug\":\"啟用-https-ssl\",\"title\":\"啟用 https (SSL)\"},{\"depth\":3,\"slug\":\"網址重新導向\",\"title\":\"網址重新導向\"},{\"depth\":3,\"slug\":\"站台登入驗證\",\"title\":\"站台登入驗證\"},{\"depth\":3,\"slug\":\"使用者個人網頁模組-userdir\",\"title\":\"使用者個人網頁模組 (userdir)\"},{\"depth\":3,\"slug\":\"更換-port\",\"title\":\"更換 Port\"},{\"depth\":3,\"slug\":\"更換站台\",\"title\":\"更換站台\"},{\"depth\":3,\"slug\":\"預設檔案\",\"title\":\"預設檔案\"},{\"depth\":3,\"slug\":\"403-forbidden-解決\",\"title\":\"403 Forbidden 解決\"},{\"depth\":2,\"slug\":\"web-server-nginx\",\"title\":\"Web Server (Nginx)\"},{\"depth\":3,\"slug\":\"nginxconf-檢查\",\"title\":\"nginx.conf 檢查\"},{\"depth\":3,\"slug\":\"限制-ip-存取站台\",\"title\":\"限制 IP 存取站台\"},{\"depth\":3,\"slug\":\"站台登入驗證-1\",\"title\":\"站台登入驗證\"},{\"depth\":3,\"slug\":\"啟用-https-ssl-1\",\"title\":\"啟用 https (SSL)\"},{\"depth\":3,\"slug\":\"網址重新導向-1\",\"title\":\"網址重新導向\"},{\"depth\":3,\"slug\":\"http-to-https-重新導向\",\"title\":\"http to https 重新導向\"},{\"depth\":3,\"slug\":\"負載平衡分流-load-balance\",\"title\":\"負載平衡/分流 (Load Balance)\"},{\"depth\":3,\"slug\":\"更換站台-1\",\"title\":\"更換站台\"},{\"depth\":3,\"slug\":\"location-匹配選擇機制\",\"title\":\"location (匹配選擇機制)\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"Debian\",\"image\":\"/debian.jpg\",\"alt\":\"Shellkai Huang\",\"created\":\"2024-09-16T00:00:00.000Z\",\"updated\":\"2024-09-16T00:00:00.000Z\",\"tags\":[\"Linux\",\"OS\"],\"images\":[],\"slug\":\"/debian/+page.svelte.md\",\"path\":\"/debian\",\"toc\":[{\"depth\":2,\"slug\":\"安裝功能\",\"title\":\"安裝功能\"},{\"depth\":2,\"slug\":\"vim\",\"title\":\"vim\"},{\"depth\":3,\"slug\":\"在-putty-上直接對-vim-貼上資料\",\"title\":\"在 putty 上直接對 vim 貼上資料\"},{\"depth\":2,\"slug\":\"開啟新-console\",\"title\":\"開啟新 Console\"},{\"depth\":2,\"slug\":\"刪除相關指令\",\"title\":\"刪除相關指令\"},{\"depth\":3,\"slug\":\"檔案相關\",\"title\":\"檔案相關\"},{\"depth\":3,\"slug\":\"完整刪除套件-apt\",\"title\":\"完整刪除套件 (apt)\"},{\"depth\":2,\"slug\":\"hostname-更改\",\"title\":\"hostname 更改\"},{\"depth\":2,\"slug\":\"samba-資料夾共享\",\"title\":\"Samba (資料夾共享)\"},{\"depth\":3,\"slug\":\"samba-存取驗證-smbpasswd\",\"title\":\"Samba 存取驗證 (smbpasswd)\"},{\"depth\":2,\"slug\":\"chmod-權限修改\",\"title\":\"chmod (權限修改)\"},{\"depth\":3,\"slug\":\"數字代表的權限\",\"title\":\"數字代表的權限\"},{\"depth\":3,\"slug\":\"資料夾權限更改\",\"title\":\"資料夾權限更改\"},{\"depth\":3,\"slug\":\"資料夾及內部檔案權限更改\",\"title\":\"資料夾及內部檔案權限更改\"},{\"depth\":2,\"slug\":\"修改-ip-位置\",\"title\":\"修改 IP 位置\"},{\"depth\":3,\"slug\":\"error-rtnetlink-answers-file-exists\",\"title\":\"error: RTNETLINK answers: File exists\"},{\"depth\":2,\"slug\":\"自訂網卡名稱-attr\",\"title\":\"自訂網卡名稱 (ATTR)\"},{\"depth\":2,\"slug\":\"關閉最後登入訊息顯示\",\"title\":\"關閉最後登入訊息顯示\"},{\"depth\":2,\"slug\":\"ufw-firewall-useless\",\"title\":\"ufw (Firewall) (useless)\"},{\"depth\":2,\"slug\":\"iptables\",\"title\":\"iptables\"},{\"depth\":3,\"slug\":\"基本設定\",\"title\":\"基本設定\"},{\"depth\":3,\"slug\":\"port-連線管理\",\"title\":\"Port 連線管理\"},{\"depth\":3,\"slug\":\"nat-轉址服務\",\"title\":\"NAT 轉址服務\"},{\"depth\":4,\"slug\":\"snat-原位址轉換-內傳外\",\"title\":\"SNAT (原位址轉換) (內傳外)\"},{\"depth\":4,\"slug\":\"dnat-目的位址轉換-外傳內\",\"title\":\"DNAT (目的位址轉換) (外傳內)\"},{\"depth\":3,\"slug\":\"port-forwarding\",\"title\":\"Port Forwarding\"},{\"depth\":3,\"slug\":\"啟用-ipv4-封包轉發\",\"title\":\"啟用 IPv4 封包轉發\"},{\"depth\":3,\"slug\":\"icmp-封包管理-ip-a-連線到-ip-b-限制\",\"title\":\"ICMP 封包管理 (IP A 連線到 IP B 限制)\"},{\"depth\":3,\"slug\":\"保存當前設定-全部規則皆適用\",\"title\":\"保存當前設定 (全部規則皆適用)\"},{\"depth\":3,\"slug\":\"刪除某一行規則\",\"title\":\"刪除某一行規則\"},{\"depth\":2,\"slug\":\"dns-server-bind9\",\"title\":\"DNS Server (Bind9)\"},{\"depth\":3,\"slug\":\"正解建立\",\"title\":\"正解建立\"},{\"depth\":3,\"slug\":\"反解建立\",\"title\":\"反解建立\"},{\"depth\":3,\"slug\":\"dns-授權\",\"title\":\"DNS 授權\"},{\"depth\":3,\"slug\":\"請求轉送\",\"title\":\"請求轉送\"},{\"depth\":3,\"slug\":\"建立大量有順序紀錄\",\"title\":\"建立大量有順序紀錄\"},{\"depth\":3,\"slug\":\"編輯版本號碼-有版本詢問時回傳特定文字\",\"title\":\"編輯版本號碼 (有版本詢問時，回傳特定文字)\"},{\"depth\":3,\"slug\":\"mx-紀錄建立\",\"title\":\"MX 紀錄建立\"},{\"depth\":2,\"slug\":\"web-file-server\",\"title\":\"Web File Server\"},{\"depth\":3,\"slug\":\"return-code-13-read-only\",\"title\":\"Return Code 13 (Read-Only)\"},{\"depth\":2,\"slug\":\"查看目前目錄下檔案及目錄之權限\",\"title\":\"查看目前目錄下檔案及目錄之權限\"},{\"depth\":2,\"slug\":\"批量加入使用者-for-loop\",\"title\":\"批量加入使用者 (for loop)\"},{\"depth\":2,\"slug\":\"使用者和群組常用設定指令\",\"title\":\"使用者和群組常用設定指令\"},{\"depth\":2,\"slug\":\"密碼常用指令\",\"title\":\"密碼常用指令\"},{\"depth\":2,\"slug\":\"dhcp-server\",\"title\":\"DHCP Server\"},{\"depth\":3,\"slug\":\"檢查-dhcp-server-已發出去的-ip-位址\",\"title\":\"檢查 DHCP Server 已發出去的 IP 位址\"},{\"depth\":3,\"slug\":\"設定跨網段-dhcp-server\",\"title\":\"設定跨網段 DHCP Server\"},{\"depth\":3,\"slug\":\"dhcp-relay\",\"title\":\"DHCP Relay\"},{\"depth\":2,\"slug\":\"在-root-使用-rmcp-及-mv-指令前先確認是否要執行\",\"title\":\"在 root 使用 rm，cp 及 mv 指令前先確認是否要執行\"},{\"depth\":2,\"slug\":\"sudo-設定\",\"title\":\"sudo 設定\"},{\"depth\":3,\"slug\":\"設定某些使用者或群組不需密碼即可使用-sudo\",\"title\":\"設定某些使用者或群組不需密碼即可使用 sudo\"},{\"depth\":3,\"slug\":\"限制-sudo-使用者可使用的指令\",\"title\":\"限制 sudo 使用者可使用的指令\"},{\"depth\":2,\"slug\":\"log-查看-以-vim-開啟\",\"title\":\"log 查看 (以 vim 開啟)\"},{\"depth\":2,\"slug\":\"ifconfig\",\"title\":\"ifconfig\"},{\"depth\":2,\"slug\":\"硬碟設定\",\"title\":\"硬碟設定\"},{\"depth\":3,\"slug\":\"掛載\",\"title\":\"掛載\"},{\"depth\":2,\"slug\":\"sed-stream-editor\",\"title\":\"sed (Stream Editor)\"},{\"depth\":2,\"slug\":\"echo-html\",\"title\":\"echo html\"},{\"depth\":2,\"slug\":\"chrony-ntp-client\",\"title\":\"chrony (NTP Client)\"},{\"depth\":2,\"slug\":\"ftp-server-vsftpd\",\"title\":\"FTP Server (vsftpd)\"},{\"depth\":3,\"slug\":\"使用-ipv4\",\"title\":\"使用 IPv4\"},{\"depth\":3,\"slug\":\"允許-root-登入\",\"title\":\"允許 Root 登入\"},{\"depth\":3,\"slug\":\"參數解釋\",\"title\":\"參數解釋\"},{\"depth\":3,\"slug\":\"ssl\",\"title\":\"SSL\"},{\"depth\":2,\"slug\":\"靜態路由-ip-route\",\"title\":\"靜態路由 (ip route)\"},{\"depth\":3,\"slug\":\"重啟後保留靜態路由設定\",\"title\":\"重啟後保留靜態路由設定\"},{\"depth\":2,\"slug\":\"playbook-ansible\",\"title\":\"PlayBook (Ansible)\"},{\"depth\":3,\"slug\":\"bash-commends-on-playbook\",\"title\":\"Bash commends on PlayBook\"},{\"depth\":4,\"slug\":\"method-1-command\",\"title\":\"Method 1 (command)\"},{\"depth\":4,\"slug\":\"method-2\",\"title\":\"Method 2\"},{\"depth\":3,\"slug\":\"file-檔案資料夾處理\",\"title\":\"file (檔案、資料夾處理)\"},{\"depth\":3,\"slug\":\"lineinfile-編輯檔案內文字\",\"title\":\"lineinfile (編輯檔案內文字)\"},{\"depth\":3,\"slug\":\"blockinfile\",\"title\":\"blockinfile\"},{\"depth\":3,\"slug\":\"replace-全局替換\",\"title\":\"replace (全局替換)\"},{\"depth\":3,\"slug\":\"copy-複製檔案\",\"title\":\"copy (複製檔案)\"},{\"depth\":3,\"slug\":\"apt-安裝-apt-套件\",\"title\":\"apt (安裝 apt 套件)\"},{\"depth\":4,\"slug\":\"單套件\",\"title\":\"單套件\"},{\"depth\":4,\"slug\":\"多套件\",\"title\":\"多套件\"},{\"depth\":3,\"slug\":\"stat-檢查檔案或路徑是否存在\",\"title\":\"stat (檢查檔案或路徑是否存在)\"},{\"depth\":3,\"slug\":\"read_csv-讀取-csv-檔案\",\"title\":\"read_csv (讀取 CSV 檔案)\"},{\"depth\":3,\"slug\":\"user-使用者建立及管理\",\"title\":\"user (使用者建立及管理)\"},{\"depth\":4,\"slug\":\"loop\",\"title\":\"loop\"},{\"depth\":3,\"slug\":\"read_csv--user-以-csv-檔案匯入-users\",\"title\":\"read_csv + user (以 CSV 檔案匯入 Users)\"},{\"depth\":3,\"slug\":\"debug--msg-print-out-輸出文字\",\"title\":\"debug + msg (print out) (輸出文字)\"},{\"depth\":3,\"slug\":\"vars_prompt-輸入值\",\"title\":\"vars_prompt (輸入值)\"},{\"depth\":2,\"slug\":\"easy-rsa-ca-tool\",\"title\":\"Easy-RSA (CA Tool)\"},{\"depth\":3,\"slug\":\"自簽-root-ca\",\"title\":\"自簽 Root CA\"},{\"depth\":3,\"slug\":\"簽署旗下的-request\",\"title\":\"簽署旗下的 Request\"},{\"depth\":2,\"slug\":\"openconnect-ssl-vpn-server-ocserv\",\"title\":\"OpenConnect SSL VPN Server (ocserv)\"},{\"depth\":2,\"slug\":\"debian-加入-windows-server-ad-網域\",\"title\":\"Debian 加入 Windows Server AD 網域\"},{\"depth\":3,\"slug\":\"不使用完整網域使用者名稱並允許使用者登入\",\"title\":\"不使用完整網域使用者名稱並允許使用者登入\"},{\"depth\":2,\"slug\":\"解壓縮-targz\",\"title\":\"解壓縮 tar.gz\"},{\"depth\":2,\"slug\":\"vlan-子介面\",\"title\":\"VLAN 子介面\"},{\"depth\":3,\"slug\":\"跨-vlan-使用-dhcp-server--dhcp-relay\",\"title\":\"跨 VLAN 使用 DHCP Server + DHCP Relay\"},{\"depth\":2,\"slug\":\"設定介面啟用或關閉時的行為\",\"title\":\"設定介面啟用或關閉時的行為\"},{\"depth\":2,\"slug\":\"strongswan-ipsec--ikev1v2\",\"title\":\"StrongSwan (IPSec & IKEv1、v2)\"},{\"depth\":3,\"slug\":\"建立用於-ipsec-的-tunnel\",\"title\":\"建立用於 IPSec 的 Tunnel\"},{\"depth\":2,\"slug\":\"frrouting-frr\",\"title\":\"FRRouting (FRR)\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"Windows Server\",\"image\":\"/winsrv.jpg\",\"alt\":\"Shellkai Huang\",\"created\":\"2024-09-16T00:00:00.000Z\",\"updated\":\"2024-09-16T00:00:00.000Z\",\"tags\":[\"Windows\",\"OS\"],\"images\":[],\"slug\":\"/winsrv/+page.svelte.md\",\"path\":\"/winsrv\",\"toc\":[{\"depth\":2,\"slug\":\"gpo-相關設定\",\"title\":\"GPO 相關設定\"},{\"depth\":3,\"slug\":\"初次登錄動畫關閉\",\"title\":\"初次登錄動畫關閉\"},{\"depth\":3,\"slug\":\"禁止存取控制台設定\",\"title\":\"禁止存取控制台設定\"},{\"depth\":3,\"slug\":\"限制或禁止使用者使用特定應用程式\",\"title\":\"限制或禁止使用者使用特定應用程式\"},{\"depth\":3,\"slug\":\"設定在-logon-ui-看不到上個登入的使用者\",\"title\":\"設定在 Logon UI 看不到上個登入的使用者\"},{\"depth\":3,\"slug\":\"登入時自動掛載共享資料夾\",\"title\":\"登入時自動掛載共享資料夾\"},{\"depth\":3,\"slug\":\"若共享資料夾有跨網域\",\"title\":\"若共享資料夾有跨網域\"},{\"depth\":3,\"slug\":\"讓-windows-server-也能掛載-debian-smbd\",\"title\":\"讓 Windows Server 也能掛載 Debian SMBD\"},{\"depth\":3,\"slug\":\"gpo-個別使用者套用規則\",\"title\":\"GPO 個別使用者套用規則\"},{\"depth\":3,\"slug\":\"開機時自動跳出訊息\",\"title\":\"開機時自動跳出訊息\"},{\"depth\":3,\"slug\":\"禁止使用-windows-update\",\"title\":\"禁止使用 Windows Update\"},{\"depth\":3,\"slug\":\"登入時自動將檔案複製到桌面\",\"title\":\"登入時自動將檔案複製到桌面\"},{\"depth\":3,\"slug\":\"用指令載入登錄檔\",\"title\":\"用指令載入登錄檔\"},{\"depth\":2,\"slug\":\"dns\",\"title\":\"DNS\"},{\"depth\":3,\"slug\":\"dns-快取紀錄關閉\",\"title\":\"DNS 快取紀錄關閉\"},{\"depth\":3,\"slug\":\"dns-同步\",\"title\":\"DNS 同步\"},{\"depth\":4,\"slug\":\"通知-notify\",\"title\":\"通知 (Notify)\"},{\"depth\":4,\"slug\":\"start-of-authority-record-soa\",\"title\":\"Start of Authority Record (SOA)\"},{\"depth\":3,\"slug\":\"conditional-forwarders\",\"title\":\"Conditional Forwarders\"},{\"depth\":2,\"slug\":\"使用者設定-cmd--for-loop\",\"title\":\"使用者設定 (cmd & for loop)\"},{\"depth\":2,\"slug\":\"進階使用者設定-powershell--for-loop\",\"title\":\"進階使用者設定 (PowerShell & for loop)\"},{\"depth\":3,\"slug\":\"set-aduser\",\"title\":\"Set-ADUser\"},{\"depth\":3,\"slug\":\"dsmod\",\"title\":\"dsmod\"},{\"depth\":2,\"slug\":\"群組設定-cmd--for-loop\",\"title\":\"群組設定 (cmd & for loop)\"},{\"depth\":3,\"slug\":\"一次允許多個可使用遠端桌面的使用者\",\"title\":\"一次允許多個可使用遠端桌面的使用者\"},{\"depth\":2,\"slug\":\"允許-icmp-協議\",\"title\":\"允許 ICMP 協議\"},{\"depth\":2,\"slug\":\"讓網域內電腦自動信任-ca-憑證\",\"title\":\"讓網域內電腦自動信任 CA 憑證\"},{\"depth\":3,\"slug\":\"允許自動信任設定\",\"title\":\"允許自動信任設定\"},{\"depth\":3,\"slug\":\"設定自動信任的電腦\",\"title\":\"設定自動信任的電腦\"},{\"depth\":2,\"slug\":\"共享資料夾管理-file-server-resource-manager\",\"title\":\"共享資料夾管理 (File Server Resource Manager)\"},{\"depth\":3,\"slug\":\"限制共享資料夾空間\",\"title\":\"限制共享資料夾空間\"},{\"depth\":3,\"slug\":\"限制共享資料夾存放檔案類型\",\"title\":\"限制共享資料夾存放檔案類型\"},{\"depth\":2,\"slug\":\"快速啟動網路介面控制\",\"title\":\"快速啟動網路介面控制\"},{\"depth\":2,\"slug\":\"更改-remote-desktop-的-tcp-port-登錄檔修改\",\"title\":\"更改 Remote Desktop 的 TCP Port (登錄檔修改)\"},{\"depth\":2,\"slug\":\"dhcp-server-位址保留\",\"title\":\"DHCP Server 位址保留\"},{\"depth\":2,\"slug\":\"vpn-設定\",\"title\":\"VPN 設定\"},{\"depth\":3,\"slug\":\"sstp-設定\",\"title\":\"SSTP 設定\"},{\"depth\":4,\"slug\":\"有-web-server--https\",\"title\":\"有 Web Server + HTTPS\"},{\"depth\":3,\"slug\":\"radius-驗證伺服器\",\"title\":\"RADIUS 驗證伺服器\"},{\"depth\":2,\"slug\":\"讓外部電腦信任根憑證-root-ca\",\"title\":\"讓外部電腦信任根憑證 (Root CA)\"},{\"depth\":2,\"slug\":\"windows-11\",\"title\":\"Windows 11\"},{\"depth\":3,\"slug\":\"安裝跳過-tpmcpu-和-secure-boot-檢查\",\"title\":\"安裝跳過 TPM、CPU 和 Secure Boot 檢查\"},{\"depth\":2,\"slug\":\"organizational-unit-ou\",\"title\":\"Organizational Unit (OU)\"},{\"depth\":3,\"slug\":\"新增\",\"title\":\"新增\"},{\"depth\":3,\"slug\":\"刪除\",\"title\":\"刪除\"},{\"depth\":2,\"slug\":\"當-iis-有使用到網路資源的設定\",\"title\":\"當 IIS 有使用到網路資源的設定\"},{\"depth\":2,\"slug\":\"edge-group-policy-templates-admx-54-分區可能出\",\"title\":\"Edge Group Policy Templates ADMX (54 分區可能出)\"},{\"depth\":3,\"slug\":\"安裝\",\"title\":\"安裝\"},{\"depth\":3,\"slug\":\"套用更新\",\"title\":\"套用更新\"},{\"depth\":3,\"slug\":\"封鎖衝浪遊戲-surf-game\",\"title\":\"封鎖衝浪遊戲 (Surf Game)\"},{\"depth\":3,\"slug\":\"啟動首頁和新索引標籤頁面-startup-home-page-and-new-tab-page\",\"title\":\"啟動、首頁和新索引標籤頁面 (Startup, home page and new tab page)\"},{\"depth\":3,\"slug\":\"允許或拒絕網頁截取螢幕畫面-allow-or-deny-screen-capture\",\"title\":\"允許或拒絕網頁截取螢幕畫面 (Allow or deny screen capture)\"},{\"depth\":3,\"slug\":\"拒絕存取特定網站-block-access-to-a-list-of-urls\",\"title\":\"拒絕存取特定網站 (Block access to a list of URLs)\"},{\"depth\":2,\"slug\":\"對單個使用者或群組做密碼限制-ad-ac\",\"title\":\"對單個使用者或群組做密碼限制 (AD AC)\"},{\"depth\":2,\"slug\":\"遠端桌面服務-remote-desktop-service\",\"title\":\"遠端桌面服務 (Remote Desktop Service)\"},{\"depth\":2,\"slug\":\"啟用-ip-forwarding-regedit\",\"title\":\"啟用 IP Forwarding (Regedit)\"},{\"depth\":2,\"slug\":\"啟用-ntp-server-windows-server\",\"title\":\"啟用 NTP Server (Windows Server)\"},{\"depth\":2,\"slug\":\"次級憑證的簽證及安裝-sub-ca\",\"title\":\"次級憑證的簽證及安裝 (Sub CA)\"},{\"depth\":3,\"slug\":\"error-the-revocation-function-was-unable-to-check-revocation-because-the-revocation-server-was-offline\",\"title\":\"error: The revocation function was unable to check revocation because the revocation server was offline\"},{\"depth\":2,\"slug\":\"透過-powershell-建立-raid\",\"title\":\"透過 PowerShell 建立 RAID\"},{\"depth\":3,\"slug\":\"建立-storage-pool\",\"title\":\"建立 Storage Pool\"},{\"depth\":3,\"slug\":\"建立-raid-磁區\",\"title\":\"建立 RAID 磁區\"},{\"depth\":2,\"slug\":\"啟用重複資料刪除機制\",\"title\":\"啟用重複資料刪除機制\"},{\"depth\":2,\"slug\":\"ad-users-csv-import--export\",\"title\":\"AD Users CSV Import / Export\"},{\"depth\":3,\"slug\":\"csvde-import-無法使用\",\"title\":\"csvde (Import 無法使用？)\"},{\"depth\":3,\"slug\":\"powershell-import-users\",\"title\":\"Powershell Import Users\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"About Me!\",\"image\":\"/hello-world/kita-ikuyo.jpg\",\"alt\":\"Shellkai Huang\",\"created\":\"2024-09-14T00:00:00.000Z\",\"updated\":\"2024-09-14T00:00:00.000Z\",\"images\":[],\"tags\":[],\"slug\":\"/hello-world/about_me/+page.svelte.md\",\"path\":\"/hello-world/about_me\",\"toc\":[{\"depth\":2,\"slug\":\"關於我\",\"title\":\"關於我\"},{\"depth\":2,\"slug\":\"contestant-memories\",\"title\":\"Contestant memories\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"(Blog's Template Document) Elements\",\"created\":\"2021-12-12T00:00:00.000Z\",\"tags\":[\"Document\",\"Elements\"],\"updated\":\"2024-09-20T10:23:01.969Z\",\"images\":[],\"slug\":\"/hello-world/elements/+page.svelte.md\",\"path\":\"/hello-world/elements\",\"toc\":[{\"depth\":2,\"slug\":\"headings\",\"title\":\"Headings\"},{\"depth\":3,\"slug\":\"heading\",\"title\":\"Heading\"},{\"depth\":4,\"slug\":\"heading-1\",\"title\":\"Heading\"},{\"depth\":5,\"slug\":\"heading-2\",\"title\":\"Heading\"},{\"depth\":6,\"slug\":\"heading-3\",\"title\":\"Heading\"},{\"depth\":2,\"slug\":\"paragraphs\",\"title\":\"Paragraphs\"},{\"depth\":2,\"slug\":\"lists\",\"title\":\"Lists\"},{\"depth\":3,\"slug\":\"definition-list-dl\",\"title\":\"Definition List (dl)\"},{\"depth\":3,\"slug\":\"ordered-list-ol\",\"title\":\"Ordered List (ol)\"},{\"depth\":3,\"slug\":\"unordered-list-ul\",\"title\":\"Unordered List (ul)\"},{\"depth\":3,\"slug\":\"checkbox-list-ul\",\"title\":\"Checkbox List (ul)\"},{\"depth\":2,\"slug\":\"table\",\"title\":\"Table\"},{\"depth\":2,\"slug\":\"footnotes\",\"title\":\"Footnotes\"},{\"depth\":2,\"slug\":\"code\",\"title\":\"Code\"},{\"depth\":2,\"slug\":\"misc\",\"title\":\"Misc\"},{\"depth\":2,\"slug\":\"svelte-components\",\"title\":\"Svelte Components\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"ToC Disabled\",\"summary\":\"This post has disabled table of contents.\",\"created\":\"2021-12-12T00:00:00.000Z\",\"tags\":[\"Front-Matter\"],\"toc\":false,\"updated\":\"2024-09-20T10:23:01.970Z\",\"images\":[],\"slug\":\"/hello-world/toc-disabled/+page.md\",\"path\":\"/hello-world/toc-disabled\",\"type\":\"article\",\"html\":\"\"},{\"title\":\"Hello World\",\"image\":\"/hello-world/ciallo.jpg\",\"created\":\"2021-11-01T00:00:00.000Z\",\"updated\":\"2021-12-12T00:00:00.000Z\",\"tags\":[\"Hello World\"],\"images\":[],\"slug\":\"/hello-world/+page.svelte.md\",\"path\":\"/hello-world\",\"toc\":false,\"type\":\"article\",\"html\":\"\"}]"}</script>
			<script>
				{
					__sveltekit_26bnjl = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../_app/immutable/entry/start.TldekpM4.js"),
						import("../_app/immutable/entry/app.BJuOPXn7.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
